import{c as ae}from"./_commonjsHelpers-042e6b4d.js";import{r as ye}from"./jquery-4e911315.js";import{r as we,a as Ce}from"./microplugin-d45d526b.js";var ue={},Oe={get exports(){return ue},set exports(te){ue=te}};(function(te,_e){(function(l,Y){te.exports=Y()})(ae,function(){var l=function(p,g){this.items=p,this.settings=g||{diacritics:!0}};l.prototype.tokenize=function(p){if(p=x(String(p||"").toLowerCase()),!p||!p.length)return[];var g,h,m,v,_=[],O=p.split(/ +/);for(g=0,h=O.length;g<h;g++){if(m=E(O[g]),this.settings.diacritics)for(v in M)M.hasOwnProperty(v)&&(m=m.replace(new RegExp(v,"g"),M[v]));_.push({string:O[g],regex:new RegExp(m,"i")})}return _},l.prototype.iterator=function(p,g){var h;j(p)?h=Array.prototype.forEach||function(m){for(var v=0,_=this.length;v<_;v++)m(this[v],v,this)}:h=function(m){for(var v in this)this.hasOwnProperty(v)&&m(this[v],v,this)},h.apply(p,[g])},l.prototype.getScoreFunction=function(p,g){var h,m,v,_,O;h=this,p=h.prepareSearch(p,g),v=p.tokens,m=p.options.fields,_=v.length,O=p.options.nesting;var N=function(S,F){var k,A;return!S||(S=String(S||""),A=S.search(F.regex),A===-1)?0:(k=F.string.length/S.length,A===0&&(k+=.5),k)},B=function(){var S=m.length;return S?S===1?function(F,k){return N(y(k,m[0],O),F)}:function(F,k){for(var A=0,G=0;A<S;A++)G+=N(y(k,m[A],O),F);return G/S}:function(){return 0}}();return _?_===1?function(S){return B(v[0],S)}:p.options.conjunction==="and"?function(S){for(var F,k=0,A=0;k<_;k++){if(F=B(v[k],S),F<=0)return 0;A+=F}return A/_}:function(S){for(var F=0,k=0;F<_;F++)k+=B(v[F],S);return k/_}:function(){return 0}},l.prototype.getSortFunction=function(p,g){var h,m,v,_,O,N,B,S,F,k,A;if(v=this,p=v.prepareSearch(p,g),A=!p.query&&g.sort_empty||g.sort,F=function(G,U){return G==="$score"?U.score:y(v.items[U.id],G,g.nesting)},O=[],A)for(h=0,m=A.length;h<m;h++)(p.query||A[h].field!=="$score")&&O.push(A[h]);if(p.query){for(k=!0,h=0,m=O.length;h<m;h++)if(O[h].field==="$score"){k=!1;break}k&&O.unshift({field:"$score",direction:"desc"})}else for(h=0,m=O.length;h<m;h++)if(O[h].field==="$score"){O.splice(h,1);break}for(S=[],h=0,m=O.length;h<m;h++)S.push(O[h].direction==="desc"?-1:1);return N=O.length,N?N===1?(_=O[0].field,B=S[0],function(G,U){return B*Y(F(_,G),F(_,U))}):function(G,U){var Z,z,J;for(Z=0;Z<N;Z++)if(J=O[Z].field,z=S[Z]*Y(F(J,G),F(J,U)),z)return z;return 0}:null},l.prototype.prepareSearch=function(p,g){if(typeof p=="object")return p;g=V({},g);var h=g.fields,m=g.sort,v=g.sort_empty;return h&&!j(h)&&(g.fields=[h]),m&&!j(m)&&(g.sort=[m]),v&&!j(v)&&(g.sort_empty=[v]),{options:g,query:String(p||"").toLowerCase(),tokens:this.tokenize(p),total:0,items:[]}},l.prototype.search=function(p,g){var h=this,m,v,_,O;return v=this.prepareSearch(p,g),g=v.options,p=v.query,O=g.score||h.getScoreFunction(v),p.length?h.iterator(h.items,function(N,B){m=O(N),(g.filter===!1||m>0)&&v.items.push({score:m,id:B})}):h.iterator(h.items,function(N,B){v.items.push({score:1,id:B})}),_=h.getSortFunction(v,g),_&&v.items.sort(_),v.total=v.items.length,typeof g.limit=="number"&&(v.items=v.items.slice(0,g.limit)),v};var Y=function(p,g){return typeof p=="number"&&typeof g=="number"?p>g?1:p<g?-1:0:(p=W(String(p||"")),g=W(String(g||"")),p>g?1:g>p?-1:0)},V=function(p,g){var h,m,v,_;for(h=1,m=arguments.length;h<m;h++)if(_=arguments[h],!!_)for(v in _)_.hasOwnProperty(v)&&(p[v]=_[v]);return p},y=function(p,g,h){if(!(!p||!g)){if(!h)return p[g];for(var m=g.split(".");m.length&&(p=p[m.shift()]););return p}},x=function(p){return(p+"").replace(/^\s+|\s+$|/g,"")},E=function(p){return(p+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},j=Array.isArray||typeof $<"u"&&$.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},M={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},W=function(){var p,g,h,m,v="",_={};for(h in M)if(M.hasOwnProperty(h))for(m=M[h].substring(2,M[h].length-1),v+=m,p=0,g=m.length;p<g;p++)_[m.charAt(p)]=h;var O=new RegExp("["+v+"]","g");return function(N){return N.replace(O,function(B){return _[B]}).toLowerCase()}}();return l}),function(l,Y){te.exports=Y()}(ae,function(){var l={};l.mixin=function(V){V.plugins={},V.prototype.initializePlugins=function(y){var x,E,j,M=this,W=[];if(M.plugins={names:[],settings:{},requested:{},loaded:{}},Y.isArray(y))for(x=0,E=y.length;x<E;x++)typeof y[x]=="string"?W.push(y[x]):(M.plugins.settings[y[x].name]=y[x].options,W.push(y[x].name));else if(y)for(j in y)y.hasOwnProperty(j)&&(M.plugins.settings[j]=y[j],W.push(j));for(;W.length;)M.require(W.shift())},V.prototype.loadPlugin=function(y){var x=this,E=x.plugins,j=V.plugins[y];if(!V.plugins.hasOwnProperty(y))throw new Error('Unable to find "'+y+'" plugin');E.requested[y]=!0,E.loaded[y]=j.fn.apply(x,[x.plugins.settings[y]||{}]),E.names.push(y)},V.prototype.require=function(y){var x=this,E=x.plugins;if(!x.plugins.loaded.hasOwnProperty(y)){if(E.requested[y])throw new Error('Plugin has circular dependency ("'+y+'")');x.loadPlugin(y)}return E.loaded[y]},V.define=function(y,x){V.plugins[y]={name:y,fn:x}}};var Y={isArray:Array.isArray||function(V){return Object.prototype.toString.call(V)==="[object Array]"}};return l}),function(l,Y){te.exports=Y(ye(),we(),Ce())}(ae,function(l,Y,V){var y=function(e,t){if(!(typeof t=="string"&&!t.length)){var i=typeof t=="string"?new RegExp(t,"i"):t,r=function(s){var n=0;if(s.nodeType===3){var o=s.data.search(i);if(o>=0&&s.data.length>0){var f=s.data.match(i),a=document.createElement("span");a.className="highlight";var u=s.splitText(o);u.splitText(f[0].length);var d=u.cloneNode(!0);a.appendChild(d),u.parentNode.replaceChild(a,u),n=1}}else if(s.nodeType===1&&s.childNodes&&!/(script|style)/i.test(s.tagName)&&(s.className!=="highlight"||s.tagName!=="SPAN"))for(var b=0;b<s.childNodes.length;++b)b+=r(s.childNodes[b]);return n};return e.each(function(){r(this)})}};l.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var x=function(){};x.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;if(i===0)return delete this._events;if(i===1)return delete this._events[e];this._events=this._events||{},e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},x.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=x.prototype[t[i]]};var E=/Mac/.test(navigator.userAgent),j=65,M=13,W=27,p=37,g=38,h=80,m=39,v=40,_=78,O=8,N=46,B=16,S=E?91:17,F=E?18:17,k=9,A=1,G=2,U=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,Z=function(e){return typeof e<"u"},z=function(e){return typeof e>"u"||e===null?null:typeof e=="boolean"?e?"1":"0":e+""},J=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},re={};re.before=function(e,t,i){var r=e[t];e[t]=function(){return i.apply(e,arguments),r.apply(e,arguments)}},re.after=function(e,t,i){var r=e[t];e[t]=function(){var s=r.apply(e,arguments);return i.apply(e,arguments),s}};var ce=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},fe=function(e,t){var i;return function(){var r=this,s=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(r,s)},t)}},le=function(e,t,i){var r,s=e.trigger,n={};e.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)n[o]=arguments;else return s.apply(e,arguments)},i.apply(e,[]),e.trigger=s;for(r in n)n.hasOwnProperty(r)&&s.apply(e,n[r])},pe=function(e,t,i,r){e.on(t,i,function(s){for(var n=s.target;n&&n.parentNode!==e[0];)n=n.parentNode;return s.currentTarget=n,r.apply(this,[s])})},ne=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),r=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-r,t.length=r}return t},de=function(e,t,i){var r,s,n={};if(i)for(r=0,s=i.length;r<s;r++)n[i[r]]=e.css(i[r]);else n=e.css();t.css(n)},he=function(e,t){return e?(I.$testInput||(I.$testInput=l("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),I.$testInput.text(e),de(t,I.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),I.$testInput.width()):0},ge=function(e){var t=null,i=function(r,s){var n,o,f,a,u,d,b,w;r=r||window.event||{},s=s||{},!(r.metaKey||r.altKey)&&(!s.force&&e.data("grow")===!1||(n=e.val(),r.type&&r.type.toLowerCase()==="keydown"&&(o=r.keyCode,f=o>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||o===32,o===N||o===O?(w=ne(e[0]),w.length?n=n.substring(0,w.start)+n.substring(w.start+w.length):o===O&&w.start?n=n.substring(0,w.start-1)+n.substring(w.start+1):o===N&&typeof w.start<"u"&&(n=n.substring(0,w.start)+n.substring(w.start+1))):f&&(d=r.shiftKey,b=String.fromCharCode(r.keyCode),d?b=b.toUpperCase():b=b.toLowerCase(),n+=b)),a=e.attr("placeholder"),!n&&a&&(n=a),u=he(n,e)+4,u!==t&&(t=u,e.width(u),e.triggerHandler("resize"))))};e.on("keydown keyup update blur",i),i()},ve=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},me=function(e,t){t||(t={});var i="Selectize";console.error(i+": "+e),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())},I=function(e,t){var i,r,s,n,o=this;n=e[0],n.selectize=o;var f=window.getComputedStyle&&window.getComputedStyle(n,null);if(s=f?f.getPropertyValue("direction"):n.currentStyle&&n.currentStyle.direction,s=s||e.parents("[dir]:first").attr("dir")||"",l.extend(o,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:n.tagName.toLowerCase()==="select"?A:G,rtl:/rtl/i.test(s),eventNS:".selectize"+ ++I.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:t.loadThrottle===null?o.onSearchChange:fe(o.onSearchChange,t.loadThrottle)}),o.sifter=new Y(this.options,{diacritics:t.diacritics}),o.settings.options){for(i=0,r=o.settings.options.length;i<r;i++)o.registerOption(o.settings.options[i]);delete o.settings.options}if(o.settings.optgroups){for(i=0,r=o.settings.optgroups.length;i<r;i++)o.registerOptionGroup(o.settings.optgroups[i]);delete o.settings.optgroups}o.settings.mode=o.settings.mode||(o.settings.maxItems===1?"single":"multi"),typeof o.settings.hideSelected!="boolean"&&(o.settings.hideSelected=o.settings.mode==="multi"),o.initializePlugins(o.settings.plugins),o.setupCallbacks(),o.setupTemplates(),o.setup()};return x.mixin(I),typeof V<"u"?V.mixin(I):me("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),l.extend(I.prototype,{setup:function(){var e=this,t=e.settings,i=e.eventNS,r=l(window),s=l(document),n=e.$input,o,f,a,u,d,b,w,D,C,P;if(w=e.settings.mode,D=n.attr("class")||"",o=l("<div>").addClass(t.wrapperClass).addClass(D).addClass(w),f=l("<div>").addClass(t.inputClass).addClass("items").appendTo(o),a=l('<input type="text" autocomplete="off" />').appendTo(f).attr("tabindex",n.is(":disabled")?"-1":e.tabIndex),b=l(t.dropdownParent||o),u=l("<div>").addClass(t.dropdownClass).addClass(w).hide().appendTo(b),d=l("<div>").addClass(t.dropdownContentClass).appendTo(u),(P=n.attr("id"))&&(a.attr("id",P+"-selectized"),l("label[for='"+P+"']").attr("for",P+"-selectized")),e.settings.copyClassesToDropdown&&u.addClass(D),o.css({width:n[0].style.width}),e.plugins.names.length&&(C="plugin-"+e.plugins.names.join(" plugin-"),o.addClass(C),u.addClass(C)),(t.maxItems===null||t.maxItems>1)&&e.tagType===A&&n.attr("multiple","multiple"),e.settings.placeholder&&a.attr("placeholder",t.placeholder),!e.settings.splitOn&&e.settings.delimiter){var L=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+L+"+\\s*")}n.attr("autocorrect")&&a.attr("autocorrect",n.attr("autocorrect")),n.attr("autocapitalize")&&a.attr("autocapitalize",n.attr("autocapitalize")),a[0].type=n[0].type,e.$wrapper=o,e.$control=f,e.$control_input=a,e.$dropdown=u,e.$dropdown_content=d,u.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(c){c.stopImmediatePropagation()}),u.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),u.on("mousedown click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),pe(f,"mousedown","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),ge(a),f.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),a.on({mousedown:function(c){c.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keyup:function(){return e.onKeyUp.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},blur:function(){return e.onBlur.apply(e,arguments)},focus:function(){return e.ignoreBlur=!1,e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),s.on("keydown"+i,function(c){e.isCmdDown=c[E?"metaKey":"ctrlKey"],e.isCtrlDown=c[E?"altKey":"ctrlKey"],e.isShiftDown=c.shiftKey}),s.on("keyup"+i,function(c){c.keyCode===F&&(e.isCtrlDown=!1),c.keyCode===B&&(e.isShiftDown=!1),c.keyCode===S&&(e.isCmdDown=!1)}),s.on("mousedown"+i,function(c){if(e.isFocused){if(c.target===e.$dropdown[0]||c.target.parentNode===e.$dropdown[0])return!1;!e.$control.has(c.target).length&&c.target!==e.$control[0]&&e.blur(c.target)}}),r.on(["scroll"+i,"resize"+i].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),r.on("mousemove"+i,function(){e.ignoreHover=!1}),this.revertSettings={$children:n.children().detach(),tabindex:n.attr("tabindex")},n.attr("tabindex",-1).hide().after(e.$wrapper),l.isArray(t.items)&&(e.setValue(t.items),delete t.items),U&&n.on("invalid"+i,function(c){c.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,n.is(":disabled")&&e.disable(),e.on("change",this.onChange),n.data("selectize",e),n.addClass("selectized"),e.trigger("initialize"),t.preload===!0&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,i=e.settings.optgroupLabelField,r={optgroup:function(s){return'<div class="optgroup">'+s.html+"</div>"},optgroup_header:function(s,n){return'<div class="optgroup-header">'+n(s[i])+"</div>"},option:function(s,n){return'<div class="option">'+n(s[t])+"</div>"},item:function(s,n){return'<div class="item">'+n(s[t])+"</div>"},option_create:function(s,n){return'<div class="create">Add <strong>'+n(s.input)+"</strong>&hellip;</div>"}};e.settings.render=l.extend({},r,e.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;(!t.isFocused||!t.isOpen)&&(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,i=e.isDefaultPrevented();if(l(e.target),t.isFocused){if(e.target!==t.$control_input[0])return t.settings.mode==="single"?t.isOpen?t.close():t.open():i||t.setActiveItem(null),!1}else i||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var t=this;if(t.isFull()||t.isInputHidden||t.isLocked){e.preventDefault();return}t.settings.splitOn&&setTimeout(function(){var i=t.$control_input.val();if(i.match(t.settings.splitOn))for(var r=l.trim(i).split(t.settings.splitOn),s=0,n=r.length;s<n;s++)t.createItem(r[s])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&this.settings.mode==="multi"&&t===this.settings.delimiter)return this.createItem(),e.preventDefault(),!1},onKeyDown:function(e){e.target,this.$control_input[0];var t=this;if(t.isLocked){e.keyCode!==k&&e.preventDefault();return}switch(e.keyCode){case j:if(t.isCmdDown){t.selectAll();return}break;case W:t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close());return;case _:if(!e.ctrlKey||e.altKey)break;case v:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}e.preventDefault();return;case h:if(!e.ctrlKey||e.altKey)break;case g:if(t.$activeOption){t.ignoreHover=!0;var r=t.getAdjacentOption(t.$activeOption,-1);r.length&&t.setActiveOption(r,!0,!0)}e.preventDefault();return;case M:t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault());return;case p:t.advanceSelection(-1,e);return;case m:t.advanceSelection(1,e);return;case k:t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),t.settings.create&&t.createItem()&&e.preventDefault();return;case O:case N:t.deleteSelection(e);return}if((t.isFull()||t.isInputHidden)&&!(E?e.metaKey:e.ctrlKey)){e.preventDefault();return}},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(r){i.apply(t,[e,r])})))},onFocus:function(e){var t=this,i=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0]){i.ignoreBlur=!0,i.onFocus(e);return}var r=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus&&t.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,r):r()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,i,r=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),i=l(e.currentTarget),i.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(t=i.attr("data-value"),typeof t<"u"&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(t),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&r.setActiveOption(r.getOption(t))))},onItemSelect:function(e){var t=this;t.isLocked||t.settings.mode==="multi"&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(r){t.loading=Math.max(t.loading-1,0),r&&r.length&&(t.addOption(r),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",r)}])},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===A&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var i=t?[]:["change"];le(this,i,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var i=this,r,s,n,o,f,a,u,d;if(i.settings.mode!=="single"){if(e=l(e),!e.length){l(i.$activeItems).removeClass("active"),i.$activeItems=[],i.isFocused&&i.showInput();return}if(r=t&&t.type.toLowerCase(),r==="mousedown"&&i.isShiftDown&&i.$activeItems.length){for(d=i.$control.children(".active:last"),o=Array.prototype.indexOf.apply(i.$control[0].childNodes,[d[0]]),f=Array.prototype.indexOf.apply(i.$control[0].childNodes,[e[0]]),o>f&&(u=o,o=f,f=u),s=o;s<=f;s++)a=i.$control[0].childNodes[s],i.$activeItems.indexOf(a)===-1&&(l(a).addClass("active"),i.$activeItems.push(a));t.preventDefault()}else r==="mousedown"&&i.isCtrlDown||r==="keydown"&&this.isShiftDown?e.hasClass("active")?(n=i.$activeItems.indexOf(e[0]),i.$activeItems.splice(n,1),e.removeClass("active")):i.$activeItems.push(e.addClass("active")[0]):(l(i.$activeItems).removeClass("active"),i.$activeItems=[e.addClass("active")[0]]);i.hideInput(),this.isFocused||i.focus()}},setActiveOption:function(e,t,i){var r,s,n,o,f,a=this;a.$activeOption&&a.$activeOption.removeClass("active"),a.$activeOption=null,e=l(e),e.length&&(a.$activeOption=e.addClass("active"),(t||!Z(t))&&(r=a.$dropdown_content.height(),s=a.$activeOption.outerHeight(!0),t=a.$dropdown_content.scrollTop()||0,n=a.$activeOption.offset().top-a.$dropdown_content.offset().top+t,o=n,f=n-r+s,n+s>r+t?a.$dropdown_content.stop().animate({scrollTop:f},i?a.settings.scrollDuration:0):n<t&&a.$dropdown_content.stop().animate({scrollTop:o},i?a.settings.scrollDuration:0)))},selectAll:function(){var e=this;e.settings.mode!=="single"&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return typeof t=="string"&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(e){var t,i,r,s=this,n=s.settings,o=this.getSearchOptions();if(n.score&&(r=s.settings.score.apply(this,[e]),typeof r!="function"))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==s.lastQuery?(s.lastQuery=e,i=s.sifter.search(e,l.extend(o,{score:r})),s.currentResults=i):i=l.extend(!0,{},s.currentResults),n.hideSelected)for(t=i.items.length-1;t>=0;t--)s.items.indexOf(z(i.items[t].id))!==-1&&i.items.splice(t,1);return i},refreshOptions:function(e){var t,i,r,s,n,o,f,a,u,d,b,w,D,C,P,L;typeof e>"u"&&(e=!0);var c=this,ee=l.trim(c.$control_input.val()),K=c.search(ee),X=c.$dropdown_content,ie=c.$activeOption&&z(c.$activeOption.attr("data-value"));for(s=K.items.length,typeof c.settings.maxOptions=="number"&&(s=Math.min(s,c.settings.maxOptions)),n={},o=[],t=0;t<s;t++)for(f=c.options[K.items[t].id],a=c.render("option",f),u=f[c.settings.optgroupField]||"",d=l.isArray(u)?u:[u],i=0,r=d&&d.length;i<r;i++)u=d[i],c.optgroups.hasOwnProperty(u)||(u=""),n.hasOwnProperty(u)||(n[u]=document.createDocumentFragment(),o.push(u)),n[u].appendChild(a);for(this.settings.lockOptgroupOrder&&o.sort(function(se,T){var q=c.optgroups[se].$order||0,R=c.optgroups[T].$order||0;return q-R}),b=document.createDocumentFragment(),t=0,s=o.length;t<s;t++)u=o[t],c.optgroups.hasOwnProperty(u)&&n[u].childNodes.length?(w=document.createDocumentFragment(),w.appendChild(c.render("optgroup_header",c.optgroups[u])),w.appendChild(n[u]),b.appendChild(c.render("optgroup",l.extend({},c.optgroups[u],{html:ve(w),dom:w})))):b.appendChild(n[u]);if(X.html(b),c.settings.highlight&&(X.removeHighlight(),K.query.length&&K.tokens.length))for(t=0,s=K.tokens.length;t<s;t++)y(X,K.tokens[t].regex);if(!c.settings.hideSelected)for(t=0,s=c.items.length;t<s;t++)c.getOption(c.items[t]).addClass("selected");D=c.canCreate(ee),D&&(X.prepend(c.render("option_create",{input:ee})),L=l(X[0].childNodes[0])),c.hasOptions=K.items.length>0||D,c.hasOptions?(K.items.length>0?(P=ie&&c.getOption(ie),P&&P.length?C=P:c.settings.mode==="single"&&c.items.length&&(C=c.getOption(c.items[0])),(!C||!C.length)&&(L&&!c.settings.addPrecedence?C=c.getAdjacentOption(L,1):C=X.find("[data-selectable]:first"))):C=L,c.setActiveOption(C),e&&!c.isOpen&&c.open()):(c.setActiveOption(null),e&&c.isOpen&&c.close())},addOption:function(e){var t,i,r,s=this;if(l.isArray(e)){for(t=0,i=e.length;t<i;t++)s.addOption(e[t]);return}(r=s.registerOption(e))&&(s.userOptions[r]=!0,s.lastQuery=null,s.trigger("option_add",r,e))},registerOption:function(e){var t=z(e[this.settings.valueField]);return typeof t>"u"||t===null||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=z(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var i=this,r,s,n,o,f,a,u;if(e=z(e),n=z(t[i.settings.valueField]),e!==null&&i.options.hasOwnProperty(e)){if(typeof n!="string")throw new Error("Value must be set in option data");u=i.options[e].$order,n!==e&&(delete i.options[e],o=i.items.indexOf(e),o!==-1&&i.items.splice(o,1,n)),t.$order=t.$order||u,i.options[n]=t,f=i.renderCache.item,a=i.renderCache.option,f&&(delete f[e],delete f[n]),a&&(delete a[e],delete a[n]),i.items.indexOf(n)!==-1&&(r=i.getItem(e),s=l(i.render("item",t)),r.hasClass("active")&&s.addClass("active"),r.replaceWith(s)),i.lastQuery=null,i.isOpen&&i.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=z(e);var r=i.renderCache.item,s=i.renderCache.option;r&&delete r[e],s&&delete s[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={};var t=e.options;l.each(e.options,function(i,r){e.items.indexOf(i)==-1&&delete t[i]}),e.options=e.sifter.items=t,e.lastQuery=null,e.trigger("option_clear")},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var i=this.$dropdown.find("[data-selectable]"),r=i.index(e)+t;return r>=0&&r<i.length?i.eq(r):l()},getElementWithValue:function(e,t){if(e=z(e),typeof e<"u"&&e!==null){for(var i=0,r=t.length;i<r;i++)if(t[i].getAttribute("data-value")===e)return l(t[i])}return l()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var i=this.$control[0].childNodes,r=0;r<i.length;r++)this.buffer.appendChild(i[r]);for(var s=l.isArray(e)?e:[e],r=0,n=s.length;r<n;r++)this.isPending=r<n-1,this.addItem(s[r],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){var i=t?[]:["change"];le(this,i,function(){var r,s,n,o=this,f=o.settings.mode,a,u;if(e=z(e),o.items.indexOf(e)!==-1){f==="single"&&o.close();return}o.options.hasOwnProperty(e)&&(f==="single"&&o.clear(t),!(f==="multi"&&o.isFull())&&(r=l(o.render("item",o.options[e])),u=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(r),(!o.isPending||!u&&o.isFull())&&o.refreshState(),o.isSetup&&(n=o.$dropdown_content.find("[data-selectable]"),o.isPending||(s=o.getOption(e),a=o.getAdjacentOption(s,1).attr("data-value"),o.refreshOptions(o.isFocused&&f!=="single"),a&&o.setActiveOption(o.getOption(a))),!n.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",e,r),o.isPending||o.updateOriginalInput({silent:t}))))})},removeItem:function(e,t){var i=this,r,s,n;r=e instanceof l?e:i.getItem(e),e=z(r.attr("data-value")),s=i.items.indexOf(e),s!==-1&&(r.remove(),r.hasClass("active")&&(n=i.$activeItems.indexOf(r[0]),i.$activeItems.splice(n,1)),i.items.splice(s,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(e)&&i.removeOption(e,t),s<i.caretPos&&i.setCaret(i.caretPos-1),i.refreshState(),i.updatePlaceholder(),i.updateOriginalInput({silent:t}),i.positionDropdown(),i.trigger("item_remove",e,r))},createItem:function(e,t){var i=this,r=i.caretPos;e=e||l.trim(i.$control_input.val()||"");var s=arguments[arguments.length-1];if(typeof s!="function"&&(s=function(){}),typeof t!="boolean"&&(t=!0),!i.canCreate(e))return s(),!1;i.lock();var n=typeof i.settings.create=="function"?this.settings.create:function(a){var u={};return u[i.settings.labelField]=a,u[i.settings.valueField]=a,u},o=ce(function(a){if(i.unlock(),!a||typeof a!="object")return s();var u=z(a[i.settings.valueField]);if(typeof u!="string")return s();i.setTextboxValue(""),i.addOption(a),i.setCaret(r),i.addItem(u),i.refreshOptions(t&&i.settings.mode!=="single"),s(a)}),f=n.apply(this,[e,o]);return typeof f<"u"&&o(f),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!l.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!i)},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,r,s,n=this;if(e=e||{},n.tagType===A){for(r=[],t=0,i=n.items.length;t<i;t++)s=n.options[n.items[t]][n.settings.labelField]||"",r.push('<option value="'+J(n.items[t])+'" selected="selected">'+J(s)+"</option>");!r.length&&!this.$input.attr("multiple")&&r.push('<option value="" selected="selected"></option>'),n.$input.html(r.join(""))}else n.$input.val(n.getValue()),n.$input.attr("value",n.$input.val());n.isSetup&&(e.silent||n.trigger("change",n.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;e.settings.mode==="single"&&e.items.length&&(e.hideInput(),e.isBlurring||e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t=this.settings.dropdownParent==="body"?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),i=e[0],r=this.buffer||this.$control[0];t===0?r.insertBefore(i,r.firstChild):r.insertBefore(i,r.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,i,r,s,n,o,f,a,u,d=this;if(r=e&&e.keyCode===O?-1:1,s=ne(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(f=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),n=[],d.$activeItems.length){for(u=d.$control.children(".active:"+(r>0?"last":"first")),o=d.$control.children(":not(input)").index(u),r>0&&o++,t=0,i=d.$activeItems.length;t<i;t++)n.push(l(d.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(d.isFocused||d.settings.mode==="single")&&d.items.length&&(r<0&&s.start===0&&s.length===0?n.push(d.items[d.caretPos-1]):r>0&&s.start===d.$control_input.val().length&&n.push(d.items[d.caretPos]));if(!n.length||typeof d.settings.onDelete=="function"&&d.settings.onDelete.apply(d,[n])===!1)return!1;for(typeof o<"u"&&d.setCaret(o);n.length;)d.removeItem(n.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),f&&(a=d.getOption(f),a.length&&d.setActiveOption(a)),!0},advanceSelection:function(e,t){var i,r,s,n,o,f,a=this;e!==0&&(a.rtl&&(e*=-1),i=e>0?"last":"first",r=ne(a.$control_input[0]),a.isFocused&&!a.isInputHidden?(n=a.$control_input.val().length,o=e<0?r.start===0&&r.length===0:r.start===n,o&&!n&&a.advanceCaret(e,t)):(f=a.$control.children(".active:"+i),f.length&&(s=a.$control.children(":not(input)").index(f),a.setActiveItem(null),a.setCaret(e>0?s+1:s))))},advanceCaret:function(e,t){var i=this,r,s;e!==0&&(r=e>0?"next":"prev",i.isShiftDown?(s=i.$control_input[r](),s.length&&(i.hideInput(),i.setActiveItem(s),t&&t.preventDefault())):i.setCaret(i.caretPos+e))},setCaret:function(e){var t=this;if(t.settings.mode==="single"?e=t.items.length:e=Math.max(0,Math.min(t.items.length,e)),!t.isPending){var i,r,s,n;for(s=t.$control.children(":not(input)"),i=0,r=s.length;i<r;i++)n=l(s[i]).detach(),i<e?t.$control_input.before(n):t.$control.append(n)}t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),--I.count==0&&I.$testInput&&(I.$testInput.remove(),I.$testInput=void 0),l(window).off(t),l(document).off(t),l(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var i,r,s="",n=!1,o=this;return(e==="option"||e==="item")&&(i=z(t[o.settings.valueField]),n=!!i),n&&(Z(o.renderCache[e])||(o.renderCache[e]={}),o.renderCache[e].hasOwnProperty(i))?o.renderCache[e][i]:(s=l(o.settings.render[e].apply(this,[t,J])),e==="option"||e==="option_create"?t[o.settings.disabledField]||s.attr("data-selectable",""):e==="optgroup"&&(r=t[o.settings.optgroupValueField]||"",s.attr("data-group",r),t[o.settings.disabledField]&&s.attr("data-disabled","")),(e==="option"||e==="item")&&s.attr("data-value",i||""),n&&(o.renderCache[e][i]=s[0]),s[0])},clearCache:function(e){var t=this;typeof e>"u"?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&(typeof i!="function"||i.apply(t,[e]))&&(typeof i!="string"||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),I.count=0,I.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},l.fn.selectize=function(e){var t=l.fn.selectize.defaults,i=l.extend({},t,e),r=i.dataAttr,s=i.labelField,n=i.valueField,o=i.disabledField,f=i.optgroupField,a=i.optgroupLabelField,u=i.optgroupValueField,d=function(w,D){var C,P,L,c,ee=w.attr(r);if(ee)for(D.options=JSON.parse(ee),C=0,P=D.options.length;C<P;C++)D.items.push(D.options[C][n]);else{var K=l.trim(w.val()||"");if(!i.allowEmptyOption&&!K.length)return;for(L=K.split(i.delimiter),C=0,P=L.length;C<P;C++)c={},c[s]=L[C],c[n]=L[C],D.options.push(c);D.items=L}},b=function(w,D){var C,P,L,c,ee=D.options,K={},X=function(T){var q=r&&T.attr(r);return typeof q=="string"&&q.length?JSON.parse(q):null},ie=function(T,q){T=l(T);var R=z(T.val());if(!(!R&&!i.allowEmptyOption)){if(K.hasOwnProperty(R)){if(q){var Q=K[R][f];Q?l.isArray(Q)?Q.push(q):K[R][f]=[Q,q]:K[R][f]=q}return}var H=X(T)||{};H[s]=H[s]||T.text(),H[n]=H[n]||R,H[o]=H[o]||T.prop("disabled"),H[f]=H[f]||q,K[R]=H,ee.push(H),T.is(":selected")&&D.items.push(R)}},se=function(T){var q,R,Q,H,oe;for(T=l(T),Q=T.attr("label"),Q&&(H=X(T)||{},H[a]=Q,H[u]=Q,H[o]=T.prop("disabled"),D.optgroups.push(H)),oe=l("option",T),q=0,R=oe.length;q<R;q++)ie(oe[q],Q)};for(D.maxItems=w.attr("multiple")?null:1,c=w.children(),C=0,P=c.length;C<P;C++)L=c[C].tagName.toLowerCase(),L==="optgroup"?se(c[C]):L==="option"&&ie(c[C])};return this.each(function(){if(!this.selectize){var w=l(this),D=this.tagName.toLowerCase(),C=w.attr("placeholder")||w.attr("data-placeholder");!C&&!i.allowEmptyOption&&(C=w.children('option[value=""]').text());var P={placeholder:C,options:[],optgroups:[],items:[]};D==="select"?b(w,P):d(w,P),new I(w,l.extend(!0,{},t,P,e))}})},l.fn.selectize.defaults=I.defaults,l.fn.selectize.support={validity:U},I.define("drag_drop",function(e){if(!l.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(this.settings.mode==="multi"){var t=this;t.lock=function(){var i=t.lock;return function(){var r=t.$control.data("sortable");return r&&r.disable(),i.apply(t,arguments)}}(),t.unlock=function(){var i=t.unlock;return function(){var r=t.$control.data("sortable");return r&&r.enable(),i.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var r=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(s,n){n.placeholder.css("width",n.helper.css("width")),r.css({overflow:"visible"})},stop:function(){r.css({overflow:"hidden"});var s=t.$activeItems?t.$activeItems.slice():null,n=[];r.children("[data-value]").each(function(){n.push(l(this).attr("data-value"))}),t.setValue(n),t.setActiveItem(s)}})}}()}}),I.define("dropdown_header",function(e){var t=this;e=l.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(i){return'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a href="javascript:void(0)" class="'+i.closeClass+'">&times;</a></div></div>'}},e),t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$dropdown_header=l(e.html(e)),t.$dropdown.prepend(t.$dropdown_header)}}()}),I.define("optgroup_columns",function(e){var t=this;e=l.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(s,n){var o=s.closest("[data-group]").find("[data-selectable]"),f=o.index(s)+n;return f>=0&&f<o.length?o.eq(f):l()},this.onKeyDown=function(){var s=t.onKeyDown;return function(n){var o,f,a,u;if(this.isOpen&&(n.keyCode===p||n.keyCode===m)){t.ignoreHover=!0,u=this.$activeOption.closest("[data-group]"),o=u.find("[data-selectable]").index(this.$activeOption),n.keyCode===p?u=u.prev("[data-group]"):u=u.next("[data-group]"),a=u.find("[data-selectable]"),f=a.eq(Math.min(a.length-1,o)),f.length&&this.setActiveOption(f);return}return s.apply(this,arguments)}}();var i=function(){var s,n=i.width,o=document;return typeof n>"u"&&(s=o.createElement("div"),s.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',s=s.firstChild,o.body.appendChild(s),n=i.width=s.offsetWidth-s.clientWidth,o.body.removeChild(s)),n},r=function(){var s,n,o,f,a,u,d;if(d=l("[data-group]",t.$dropdown_content),n=d.length,!(!n||!t.$dropdown_content.width())){if(e.equalizeHeight){for(o=0,s=0;s<n;s++)o=Math.max(o,d.eq(s).height());d.css({height:o})}e.equalizeWidth&&(u=t.$dropdown_content.innerWidth()-i(),f=Math.round(u/n),d.css({width:f}),n>1&&(a=u-f*(n-1),d.eq(n-1).css({width:a})))}};(e.equalizeHeight||e.equalizeWidth)&&(re.after(this,"positionDropdown",r),re.after(this,"refreshOptions",r))}),I.define("remove_button",function(e){e=l.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var t=function(r,s){s.className="remove-single";var n=r,o='<a href="javascript:void(0)" class="'+s.className+'" tabindex="-1" title="'+J(s.title)+'">'+s.label+"</a>",f=function(a,u){return l("<span>").append(a).append(u)};r.setup=function(){var a=n.setup;return function(){if(s.append){var u=l(n.$input.context).attr("id");l("#"+u);var d=n.settings.render.item;n.settings.render.item=function(b){return f(d.apply(r,arguments),o)}}a.apply(r,arguments),r.$control.on("click","."+s.className,function(b){b.preventDefault(),!n.isLocked&&n.clear()})}}()},i=function(r,s){var n=r,o='<a href="javascript:void(0)" class="'+s.className+'" tabindex="-1" title="'+J(s.title)+'">'+s.label+"</a>",f=function(a,u){var d=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,d)+u+a.substring(d)};r.setup=function(){var a=n.setup;return function(){if(s.append){var u=n.settings.render.item;n.settings.render.item=function(d){return f(u.apply(r,arguments),o)}}a.apply(r,arguments),r.$control.on("click","."+s.className,function(d){if(d.preventDefault(),!n.isLocked){var b=l(d.currentTarget).parent();n.setActiveItem(b),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()};if(this.settings.mode==="single"){t(this,e);return}else i(this,e)}),I.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(i){return i[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(r){var s,n;if(r.keyCode===O&&this.$control_input.val()===""&&!this.$activeItems.length&&(s=this.caretPos-1,s>=0&&s<this.items.length)){n=this.options[this.items[s]],this.deleteSelection(r)&&(this.setTextboxValue(e.text.apply(this,[n])),this.refreshOptions(!0)),r.preventDefault();return}return i.apply(this,arguments)}}()}),I})})(Oe);

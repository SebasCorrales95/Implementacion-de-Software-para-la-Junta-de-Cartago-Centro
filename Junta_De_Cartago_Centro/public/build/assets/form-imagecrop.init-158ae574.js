import{c as gi}from"./_commonjsHelpers-042e6b4d.js";import{r as fi}from"./jquery-4e911315.js";/*!
 * Cropper v4.1.0
 * https://fengyuanchen.github.io/cropper
 *
 * Copyright 2014-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-10-12T07:43:51.850Z
 */(function(Z,vt){(function(g,F){F(fi())})(gi,function(g){function F(t){return(F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(t)}function Dt(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kt(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Bt(t){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?kt(e,!0).forEach(function(n){var a,o,h;a=t,h=e[o=n],o in a?Object.defineProperty(a,o,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[o]=h}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):kt(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Ot(t){return function(i){if(Array.isArray(i)){for(var e=0,n=new Array(i.length);e<i.length;e++)n[e]=i[e];return n}}(t)||function(i){if(Symbol.iterator in Object(i)||Object.prototype.toString.call(i)==="[object Arguments]")return Array.from(i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}g=g&&g.hasOwnProperty("default")?g.default:g;var st=typeof window<"u"&&window.document!==void 0,U=st?window:{},wt=st&&"ontouchstart"in U.document.documentElement,z=st&&"PointerEvent"in U,C="cropper",ct="all",dt="crop",J="move",pt="zoom",m="e",v="w",S="s",W="n",H="ne",j="nw",G="se",bt="sw",Rt="".concat(C,"-crop"),Zt="".concat(C,"-disabled"),N="".concat(C,"-hidden"),Ft="".concat(C,"-hide"),Ye="".concat(C,"-invisible"),Tt="".concat(C,"-modal"),Ht="".concat(C,"-move"),yt="".concat(C,"Action"),Et="".concat(C,"Preview"),Yt="crop",Gt="move",Vt="none",Xt="crop",zt="cropend",$t="cropmove",St="cropstart",_t="dblclick",te=z?"pointerdown":wt?"touchstart":"mousedown",ee=z?"pointermove":wt?"touchmove":"mousemove",ie=z?"pointerup pointercancel":wt?"touchend touchcancel":"mouseup",jt="zoom",ae="image/jpeg",Xe=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ze=/^data:/,$e=/^data:image\/jpeg;base64,/,Se=/^img|canvas$/i,ne={viewMode:0,dragMode:Yt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},je=Number.isNaN||U.isNaN;function f(t){return typeof t=="number"&&!je(t)}var oe=function(t){return 0<t&&t<1/0};function At(t){return t===void 0}function nt(t){return F(t)==="object"&&t!==null}var Ae=Object.prototype.hasOwnProperty;function lt(t){if(!nt(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&Ae.call(e,"isPrototypeOf")}catch{return!1}}function L(t){return typeof t=="function"}var Ie=Array.prototype.slice;function re(t){return Array.from?Array.from(t):Ie.call(t)}function O(t,i){return t&&L(i)&&(Array.isArray(t)||f(t.length)?re(t).forEach(function(e,n){i.call(t,e,n,t)}):nt(t)&&Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)})),t}var D=Object.assign||function(t){for(var i=arguments.length,e=new Array(1<i?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return nt(t)&&0<e.length&&e.forEach(function(a){nt(a)&&Object.keys(a).forEach(function(o){t[o]=a[o]})}),t},Pe=/\.\d*(?:0|9){12}\d*$/;function ut(t,i){var e=1<arguments.length&&i!==void 0?i:1e11;return Pe.test(t)?Math.round(t*e)/e:t}var Ue=/^width|height|left|top|marginLeft|marginTop$/;function tt(t,i){var e=t.style;O(i,function(n,a){Ue.test(a)&&f(n)&&(n="".concat(n,"px")),e[a]=n})}function E(t,i){if(i)if(f(t.length))O(t,function(n){E(n,i)});else if(t.classList)t.classList.add(i);else{var e=t.className.trim();e?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i}}function K(t,i){i&&(f(t.length)?O(t,function(e){K(e,i)}):t.classList?t.classList.remove(i):0<=t.className.indexOf(i)&&(t.className=t.className.replace(i,"")))}function mt(t,i,e){i&&(f(t.length)?O(t,function(n){mt(n,i,e)}):e?E(t,i):K(t,i))}var qe=/([a-z\d])([A-Z])/g;function It(t){return t.replace(qe,"$1-$2").toLowerCase()}function Pt(t,i){return nt(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(It(i)))}function xt(t,i,e){nt(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(It(i)),e)}var he=/\s\s*/,se=function(){var t=!1;if(st){var i=!1,e=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,i},set:function(a){i=a}});U.addEventListener("test",e,n),U.removeEventListener("test",e,n)}return t}();function q(t,i,e,n){var a=3<arguments.length&&n!==void 0?n:{},o=e;i.trim().split(he).forEach(function(h){if(!se){var s=t.listeners;s&&s[h]&&s[h][e]&&(o=s[h][e],delete s[h][e],Object.keys(s[h]).length===0&&delete s[h],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(h,o,a)})}function A(t,i,e,n){var a=3<arguments.length&&n!==void 0?n:{},o=e;i.trim().split(he).forEach(function(h){if(a.once&&!se){var s=t.listeners,d=s===void 0?{}:s;o=function(){delete d[h][e],t.removeEventListener(h,o,a);for(var r=arguments.length,p=new Array(r),c=0;c<r;c++)p[c]=arguments[c];e.apply(t,p)},d[h]||(d[h]={}),d[h][e]&&t.removeEventListener(h,d[h][e],a),d[h][e]=o,t.listeners=d}t.addEventListener(h,o,a)})}function gt(t,i,e){var n;return L(Event)&&L(CustomEvent)?n=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(n)}function ce(t){var i=t.getBoundingClientRect();return{left:i.left+(window.pageXOffset-document.documentElement.clientLeft),top:i.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ut=U.location,Qe=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function de(t){var i=t.match(Qe);return i!==null&&(i[1]!==Ut.protocol||i[2]!==Ut.hostname||i[3]!==Ut.port)}function pe(t){var i="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+i}function Mt(t){var i=t.rotate,e=t.scaleX,n=t.scaleY,a=t.translateX,o=t.translateY,h=[];f(a)&&a!==0&&h.push("translateX(".concat(a,"px)")),f(o)&&o!==0&&h.push("translateY(".concat(o,"px)")),f(i)&&i!==0&&h.push("rotate(".concat(i,"deg)")),f(e)&&e!==1&&h.push("scaleX(".concat(e,")")),f(n)&&n!==1&&h.push("scaleY(".concat(n,")"));var s=h.length?h.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Wt(t,i){var e=t.pageX,n=t.pageY,a={endX:e,endY:n};return i?a:Bt({startX:e,startY:n},a)}function et(t,i){var e=t.aspectRatio,n=t.height,a=t.width,o=1<arguments.length&&i!==void 0?i:"contain",h=oe(a),s=oe(n);if(h&&s){var d=n*e;o==="contain"&&a<d||o==="cover"&&d<a?n=a/e:a=n*e}else h?n=a/e:s&&(a=n*e);return{width:a,height:n}}var le=String.fromCharCode,Je=/^data:.*,/;function Ke(t){var i,e=new DataView(t);try{var n,a,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,s=2;s+1<h;){if(e.getUint8(s)===255&&e.getUint8(s+1)===225){a=s;break}s+=1}if(a){var d=a+10;if(function(y,w,x){var M="";x+=w;for(var k=w;k<x;k+=1)M+=le(y.getUint8(k));return M}(e,a+4,4)==="Exif"){var r=e.getUint16(d);if(((n=r===18761)||r===19789)&&e.getUint16(d+2,n)===42){var p=e.getUint32(d+4,n);8<=p&&(o=d+p)}}}if(o){var c,l,b=e.getUint16(o,n);for(l=0;l<b;l+=1)if(c=o+12*l+2,e.getUint16(c,n)===274){c+=8,i=e.getUint16(c,n),e.setUint16(c,1,n);break}}}catch{i=1}return i}var Ze={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,n=this.cropper;E(n,N),K(t,N);var a={width:Math.max(e.offsetWidth,Number(i.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(i.minContainerHeight)||100)};tt(n,{width:(this.containerData=a).width,height:a.height}),E(t,N),K(n,N)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,n=Math.abs(i.rotate)%180==90,a=n?i.naturalHeight:i.naturalWidth,o=n?i.naturalWidth:i.naturalHeight,h=a/o,s=t.width,d=t.height;t.height*h>t.width?e===3?s=t.height*h:d=t.width/h:e===3?d=t.width/h:s=t.height*h;var r={aspectRatio:h,naturalWidth:a,naturalHeight:o,width:s,height:d};r.left=(t.width-s)/2,r.top=(t.height-d)/2,r.oldLeft=r.left,r.oldTop=r.top,this.canvasData=r,this.limited=e===1||e===2,this.limitCanvas(!0,!0),this.initialImageData=D({},i),this.initialCanvasData=D({},r)},limitCanvas:function(t,i){var e=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,h=e.viewMode,s=a.aspectRatio,d=this.cropped&&o;if(t){var r=Number(e.minCanvasWidth)||0,p=Number(e.minCanvasHeight)||0;1<h?(r=Math.max(r,n.width),p=Math.max(p,n.height),h===3&&(r<p*s?r=p*s:p=r/s)):0<h&&(r?r=Math.max(r,d?o.width:0):p?p=Math.max(p,d?o.height:0):d&&((r=o.width)<(p=o.height)*s?r=p*s:p=r/s));var c=et({aspectRatio:s,width:r,height:p});r=c.width,p=c.height,a.minWidth=r,a.minHeight=p,a.maxWidth=1/0,a.maxHeight=1/0}if(i)if((d?0:1)<h){var l=n.width-a.width,b=n.height-a.height;a.minLeft=Math.min(0,l),a.minTop=Math.min(0,b),a.maxLeft=Math.max(0,l),a.maxTop=Math.max(0,b),d&&this.limited&&(a.minLeft=Math.min(o.left,o.left+(o.width-a.width)),a.minTop=Math.min(o.top,o.top+(o.height-a.height)),a.maxLeft=o.left,a.maxTop=o.top,h===2&&(a.width>=n.width&&(a.minLeft=Math.min(0,l),a.maxLeft=Math.max(0,l)),a.height>=n.height&&(a.minTop=Math.min(0,b),a.maxTop=Math.max(0,b))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,i){var e=this.canvasData,n=this.imageData;if(i){var a=function(r){var p=r.width,c=r.height,l=r.degree;if((l=Math.abs(l)%180)===90)return{width:c,height:p};var b=l%90*Math.PI/180,y=Math.sin(b),w=Math.cos(b),x=p*w+c*y,M=p*y+c*w;return 90<l?{width:M,height:x}:{width:x,height:M}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),o=a.width,h=a.height,s=e.width*(o/e.naturalWidth),d=e.height*(h/e.naturalHeight);e.left-=(s-e.width)/2,e.top-=(d-e.height)/2,e.width=s,e.height=d,e.aspectRatio=o/h,e.naturalWidth=o,e.naturalHeight=h,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,tt(this.canvas,D({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,n=e.naturalWidth*(i.width/i.naturalWidth),a=e.naturalHeight*(i.height/i.naturalHeight);D(e,{width:n,height:a,left:(i.width-n)/2,top:(i.height-a)/2}),tt(this.image,D({width:e.width,height:e.height},Mt(D({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:i.width,height:i.height};e&&(i.height*e>i.width?a.height=a.width/e:a.width=a.height*e),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=i.left+(i.width-a.width)/2,a.top=i.top+(i.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=D({},a)},limitCropBox:function(t,i){var e=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,h=this.limited,s=e.aspectRatio;if(t){var d=Number(e.minCropBoxWidth)||0,r=Number(e.minCropBoxHeight)||0,p=h?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,c=h?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;d=Math.min(d,n.width),r=Math.min(r,n.height),s&&(d&&r?d<r*s?r=d/s:d=r*s:d?r=d/s:r&&(d=r*s),p<c*s?c=p/s:p=c*s),o.minWidth=Math.min(d,p),o.minHeight=Math.min(r,c),o.maxWidth=p,o.maxHeight=c}i&&(h?(o.minLeft=Math.max(0,a.left),o.minTop=Math.max(0,a.top),o.maxLeft=Math.min(n.width,a.left+a.width)-o.width,o.maxTop=Math.min(n.height,a.top+a.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=n.width-o.width,o.maxTop=n.height-o.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&xt(this.face,yt,e.width>=i.width&&e.height>=i.height?J:ct),tt(this.cropBox,D({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),gt(this.element,Xt,this.getData())}},Fe={initPreview:function(){var t=this.element,i=this.crossOrigin,e=this.options.preview,n=i?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",o=document.createElement("img");if(i&&(o.crossOrigin=i),o.src=n,o.alt=a,this.viewBox.appendChild(o),this.viewBoxImage=o,e){var h=e;typeof e=="string"?h=t.ownerDocument.querySelectorAll(e):e.querySelector&&(h=[e]),O(this.previews=h,function(s){var d=document.createElement("img");xt(s,Et,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),i&&(d.crossOrigin=i),d.src=n,d.alt=a,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(d)})}},resetPreview:function(){O(this.previews,function(t){var i=Pt(t,Et);tt(t,{width:i.width,height:i.height}),t.innerHTML=i.html,function(e,n){if(nt(e[n]))try{delete e[n]}catch{e[n]=void 0}else if(e.dataset)try{delete e.dataset[n]}catch{e.dataset[n]=void 0}else e.removeAttribute("data-".concat(It(n)))}(t,Et)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,n=e.width,a=e.height,o=t.width,h=t.height,s=e.left-i.left-t.left,d=e.top-i.top-t.top;this.cropped&&!this.disabled&&(tt(this.viewBoxImage,D({width:o,height:h},Mt(D({translateX:-s,translateY:-d},t)))),O(this.previews,function(r){var p=Pt(r,Et),c=p.width,l=p.height,b=c,y=l,w=1;n&&(y=a*(w=c/n)),a&&l<y&&(b=n*(w=l/a),y=l),tt(r,{width:b,height:y}),tt(r.getElementsByTagName("img")[0],D({width:o*w,height:h*w},Mt(D({translateX:-s*w,translateY:-d*w},t))))}))}},Ge={bind:function(){var t=this.element,i=this.options,e=this.cropper;L(i.cropstart)&&A(t,St,i.cropstart),L(i.cropmove)&&A(t,$t,i.cropmove),L(i.cropend)&&A(t,zt,i.cropend),L(i.crop)&&A(t,Xt,i.crop),L(i.zoom)&&A(t,jt,i.zoom),A(e,te,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&A(e,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&A(e,_t,this.onDblclick=this.dblclick.bind(this)),A(t.ownerDocument,ee,this.onCropMove=this.cropMove.bind(this)),A(t.ownerDocument,ie,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&A(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;L(i.cropstart)&&q(t,St,i.cropstart),L(i.cropmove)&&q(t,$t,i.cropmove),L(i.cropend)&&q(t,zt,i.cropend),L(i.crop)&&q(t,Xt,i.crop),L(i.zoom)&&q(t,jt,i.zoom),q(e,te,this.onCropStart),i.zoomable&&i.zoomOnWheel&&q(e,"wheel",this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&q(e,_t,this.onDblclick),q(t.ownerDocument,ee,this.onCropMove),q(t.ownerDocument,ie,this.onCropEnd),i.responsive&&q(window,"resize",this.onResize)}},Ve={resize:function(){var t=this.options,i=this.container,e=this.containerData,n=Number(t.minContainerWidth)||200,a=Number(t.minContainerHeight)||100;if(!(this.disabled||e.width<=n||e.height<=a)){var o,h,s=i.offsetWidth/e.width;(s!=1||i.offsetHeight!==e.height)&&(t.restore&&(o=this.getCanvasData(),h=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(O(o,function(d,r){o[r]=d*s})),this.setCropBoxData(O(h,function(d,r){h[r]=d*s}))))}},dblclick:function(){this.disabled||this.options.dragMode===Vt||this.setDragMode(function(t,i){return t.classList?t.classList.contains(i):-1<t.className.indexOf(i)}(this.dragBox,Rt)?Gt:Yt)},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?n=0<t.deltaY?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=0<t.detail?1:-1),this.zoom(-n*e,t)))},cropStart:function(t){var i=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(f(i)&&i!==1||f(e)&&e!==0||t.ctrlKey))){var n,a=this.options,o=this.pointers;t.changedTouches?O(t.changedTouches,function(h){o[h.identifier]=Wt(h)}):o[t.pointerId||0]=Wt(t),n=1<Object.keys(o).length&&a.zoomable&&a.zoomOnTouch?pt:Pt(t.target,yt),Xe.test(n)&&gt(this.element,St,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===dt&&(this.cropping=!0,E(this.dragBox,Tt)))}},cropMove:function(t){var i=this.action;if(!this.disabled&&i){var e=this.pointers;t.preventDefault(),gt(this.element,$t,{originalEvent:t,action:i})!==!1&&(t.changedTouches?O(t.changedTouches,function(n){D(e[n.identifier]||{},Wt(n,!0))}):D(e[t.pointerId||0]||{},Wt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?O(t.changedTouches,function(n){delete e[n.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,mt(this.dragBox,Tt,this.cropped&&this.options.modal)),gt(this.element,zt,{originalEvent:t,action:i}))}}},_e={change:function(t){var i,e=this.options,n=this.canvasData,a=this.containerData,o=this.cropBoxData,h=this.pointers,s=this.action,d=e.aspectRatio,r=o.left,p=o.top,c=o.width,l=o.height,b=r+c,y=p+l,w=0,x=0,M=a.width,k=a.height,T=!0;!d&&t.shiftKey&&(d=c&&l?c/l:1),this.limited&&(w=o.minLeft,x=o.minTop,M=w+Math.min(a.width,n.width,n.left+n.width),k=x+Math.min(a.height,n.height,n.top+n.height));function B(R){switch(R){case m:b+u.x>M&&(u.x=M-b);break;case v:r+u.x<w&&(u.x=w-r);break;case W:p+u.y<x&&(u.y=x-p);break;case S:y+u.y>k&&(u.y=k-y)}}var I=h[Object.keys(h)[0]],u={x:I.endX-I.startX,y:I.endY-I.startY};switch(s){case ct:r+=u.x,p+=u.y;break;case m:if(0<=u.x&&(M<=b||d&&(p<=x||k<=y))){T=!1;break}B(m),(c+=u.x)<0&&(s=v,r-=c=-c),d&&(l=c/d,p+=(o.height-l)/2);break;case W:if(u.y<=0&&(p<=x||d&&(r<=w||M<=b))){T=!1;break}B(W),l-=u.y,p+=u.y,l<0&&(s=S,p-=l=-l),d&&(c=l*d,r+=(o.width-c)/2);break;case v:if(u.x<=0&&(r<=w||d&&(p<=x||k<=y))){T=!1;break}B(v),c-=u.x,r+=u.x,c<0&&(s=m,r-=c=-c),d&&(l=c/d,p+=(o.height-l)/2);break;case S:if(0<=u.y&&(k<=y||d&&(r<=w||M<=b))){T=!1;break}B(S),(l+=u.y)<0&&(s=W,p-=l=-l),d&&(c=l*d,r+=(o.width-c)/2);break;case H:if(d){if(u.y<=0&&(p<=x||M<=b)){T=!1;break}B(W),l-=u.y,p+=u.y,c=l*d}else B(W),B(m),0<=u.x?b<M?c+=u.x:u.y<=0&&p<=x&&(T=!1):c+=u.x,u.y<=0?x<p&&(l-=u.y,p+=u.y):(l-=u.y,p+=u.y);c<0&&l<0?(s=bt,p-=l=-l,r-=c=-c):c<0?(s=j,r-=c=-c):l<0&&(s=G,p-=l=-l);break;case j:if(d){if(u.y<=0&&(p<=x||r<=w)){T=!1;break}B(W),l-=u.y,p+=u.y,c=l*d,r+=o.width-c}else B(W),B(v),u.x<=0?w<r?(c-=u.x,r+=u.x):u.y<=0&&p<=x&&(T=!1):(c-=u.x,r+=u.x),u.y<=0?x<p&&(l-=u.y,p+=u.y):(l-=u.y,p+=u.y);c<0&&l<0?(s=G,p-=l=-l,r-=c=-c):c<0?(s=H,r-=c=-c):l<0&&(s=bt,p-=l=-l);break;case bt:if(d){if(u.x<=0&&(r<=w||k<=y)){T=!1;break}B(v),c-=u.x,r+=u.x,l=c/d}else B(S),B(v),u.x<=0?w<r?(c-=u.x,r+=u.x):0<=u.y&&k<=y&&(T=!1):(c-=u.x,r+=u.x),0<=u.y?y<k&&(l+=u.y):l+=u.y;c<0&&l<0?(s=H,p-=l=-l,r-=c=-c):c<0?(s=G,r-=c=-c):l<0&&(s=j,p-=l=-l);break;case G:if(d){if(0<=u.x&&(M<=b||k<=y)){T=!1;break}B(m),l=(c+=u.x)/d}else B(S),B(m),0<=u.x?b<M?c+=u.x:0<=u.y&&k<=y&&(T=!1):c+=u.x,0<=u.y?y<k&&(l+=u.y):l+=u.y;c<0&&l<0?(s=j,p-=l=-l,r-=c=-c):c<0?(s=bt,r-=c=-c):l<0&&(s=H,p-=l=-l);break;case J:this.move(u.x,u.y),T=!1;break;case pt:this.zoom(function(R){var ot=Bt({},R),V=[];return O(R,function(P,it){delete ot[it],O(ot,function(_){var Y=Math.abs(P.startX-_.startX),X=Math.abs(P.startY-_.startY),Ct=Math.abs(P.endX-_.endX),rt=Math.abs(P.endY-_.endY),ft=Math.sqrt(Y*Y+X*X),at=(Math.sqrt(Ct*Ct+rt*rt)-ft)/ft;V.push(at)})}),V.sort(function(P,it){return Math.abs(P)<Math.abs(it)}),V[0]}(h),t),T=!1;break;case dt:if(!u.x||!u.y){T=!1;break}i=ce(this.cropper),r=I.startX-i.left,p=I.startY-i.top,c=o.minWidth,l=o.minHeight,0<u.x?s=0<u.y?G:H:u.x<0&&(r-=c,s=0<u.y?bt:j),u.y<0&&(p-=l),this.cropped||(K(this.cropBox,N),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}T&&(o.width=c,o.height=l,o.left=r,o.top=p,this.action=s,this.renderCropBox()),O(h,function(R){R.startX=R.endX,R.startY=R.endY})}},ti={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&E(this.dragBox,Tt),K(this.cropBox,N),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=D({},this.initialImageData),this.canvasData=D({},this.initialCanvasData),this.cropBoxData=D({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(D(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),K(this.dragBox,Tt),E(this.cropBox,N)),this},replace:function(t,i){var e=1<arguments.length&&i!==void 0&&i;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,O(this.previews,function(n){n.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,K(this.cropper,Zt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,E(this.cropper,Zt)),this},destroy:function(){var t=this.element;return t[C]&&(t[C]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate()),this},move:function(t,i){var e=1<arguments.length&&i!==void 0?i:t,n=this.canvasData,a=n.left,o=n.top;return this.moveTo(At(t)?t:a+Number(t),At(e)?e:o+Number(e))},moveTo:function(t,i){var e=1<arguments.length&&i!==void 0?i:t,n=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(f(t)&&(n.left=t,a=!0),f(e)&&(n.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var n=this.options,a=this.canvasData,o=a.width,h=a.height,s=a.naturalWidth,d=a.naturalHeight;if(0<=(t=Number(t))&&this.ready&&!this.disabled&&n.zoomable){var r=s*t,p=d*t;if(gt(this.element,jt,{ratio:t,oldRatio:o/s,originalEvent:e})===!1)return this;if(e){var c=this.pointers,l=ce(this.cropper),b=c&&Object.keys(c).length?function(y){var w=0,x=0,M=0;return O(y,function(k){var T=k.startX,B=k.startY;w+=T,x+=B,M+=1}),{pageX:w/=M,pageY:x/=M}}(c):{pageX:e.pageX,pageY:e.pageY};a.left-=(r-o)*((b.pageX-l.left-a.left)/o),a.top-=(p-h)*((b.pageY-l.top-a.top)/h)}else lt(i)&&f(i.x)&&f(i.y)?(a.left-=(r-o)*((i.x-a.left)/o),a.top-=(p-h)*((i.y-a.top)/h)):(a.left-=(r-o)/2,a.top-=(p-h)/2);a.width=r,a.height=p,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return f(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,f(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(f(i)?i:1,t)},scale:function(t,i){var e=1<arguments.length&&i!==void 0?i:t,n=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(f(t)&&(n.scaleX=t,a=!0),f(e)&&(n.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(t){var i,e=0<arguments.length&&t!==void 0&&t,n=this.options,a=this.imageData,o=this.canvasData,h=this.cropBoxData;if(this.ready&&this.cropped){i={x:h.left-o.left,y:h.top-o.top,width:h.width,height:h.height};var s=a.width/a.naturalWidth;if(O(i,function(p,c){i[c]=p/s}),e){var d=Math.round(i.y+i.height),r=Math.round(i.x+i.width);i.x=Math.round(i.x),i.y=Math.round(i.y),i.width=r-i.x,i.height=d-i.y}}else i={x:0,y:0,width:0,height:0};return n.rotatable&&(i.rotate=a.rotate||0),n.scalable&&(i.scaleX=a.scaleX||1,i.scaleY=a.scaleY||1),i},setData:function(t){var i=this.options,e=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&lt(t)){var o=!1;i.rotatable&&f(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,o=!0),i.scalable&&(f(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,o=!0),f(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var h=e.width/e.naturalWidth;f(t.x)&&(a.left=t.x*h+n.left),f(t.y)&&(a.top=t.y*h+n.top),f(t.width)&&(a.width=t.width*h),f(t.height)&&(a.height=t.height*h),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?D({},this.containerData):{}},getImageData:function(){return this.sized?D({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&O(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&lt(t)&&(f(t.left)&&(i.left=t.left),f(t.top)&&(i.top=t.top),f(t.width)?(i.width=t.width,i.height=t.width/e):f(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,i=this.cropBoxData;return this.ready&&this.cropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(t){var i,e,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&lt(t)&&(f(t.left)&&(n.left=t.left),f(t.top)&&(n.top=t.top),f(t.width)&&t.width!==n.width&&(i=!0,n.width=t.width),f(t.height)&&t.height!==n.height&&(e=!0,n.height=t.height),a&&(i?n.height=n.width/a:e&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(t){var i=0<arguments.length&&t!==void 0?t:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=function(ft,at,Qt,ht){var ue=at.aspectRatio,ai=at.naturalWidth,ni=at.naturalHeight,me=at.rotate,oi=me===void 0?0:me,ge=at.scaleX,ri=ge===void 0?1:ge,fe=at.scaleY,hi=fe===void 0?1:fe,ve=Qt.aspectRatio,si=Qt.naturalWidth,ci=Qt.naturalHeight,we=ht.fillColor,di=we===void 0?"transparent":we,be=ht.imageSmoothingEnabled,pi=be===void 0||be,ye=ht.imageSmoothingQuality,li=ye===void 0?"low":ye,xe=ht.maxWidth,Me=xe===void 0?1/0:xe,Ce=ht.maxHeight,De=Ce===void 0?1/0:Ce,ke=ht.minWidth,Be=ke===void 0?0:ke,Oe=ht.minHeight,Te=Oe===void 0?0:Oe,Lt=document.createElement("canvas"),Q=Lt.getContext("2d"),Ee=et({aspectRatio:ve,width:Me,height:De}),We=et({aspectRatio:ve,width:Be,height:Te},"cover"),Jt=Math.min(Ee.width,Math.max(We.width,si)),Kt=Math.min(Ee.height,Math.max(We.height,ci)),Ne=et({aspectRatio:ue,width:Me,height:De}),Le=et({aspectRatio:ue,width:Be,height:Te},"cover"),Re=Math.min(Ne.width,Math.max(Le.width,ai)),He=Math.min(Ne.height,Math.max(Le.height,ni)),ui=[-Re/2,-He/2,Re,He];return Lt.width=ut(Jt),Lt.height=ut(Kt),Q.fillStyle=di,Q.fillRect(0,0,Jt,Kt),Q.save(),Q.translate(Jt/2,Kt/2),Q.rotate(oi*Math.PI/180),Q.scale(ri,hi),Q.imageSmoothingEnabled=pi,Q.imageSmoothingQuality=li,Q.drawImage.apply(Q,[ft].concat(Ot(ui.map(function(mi){return Math.floor(ut(mi))})))),Q.restore(),Lt}(this.image,this.imageData,e,i);if(!this.cropped)return n;var a=this.getData(),o=a.x,h=a.y,s=a.width,d=a.height,r=n.width/Math.floor(e.naturalWidth);r!=1&&(o*=r,h*=r,s*=r,d*=r);var p=s/d,c=et({aspectRatio:p,width:i.maxWidth||1/0,height:i.maxHeight||1/0}),l=et({aspectRatio:p,width:i.minWidth||0,height:i.minHeight||0},"cover"),b=et({aspectRatio:p,width:i.width||(r!=1?n.width:s),height:i.height||(r!=1?n.height:d)}),y=b.width,w=b.height;y=Math.min(c.width,Math.max(l.width,y)),w=Math.min(c.height,Math.max(l.height,w));var x=document.createElement("canvas"),M=x.getContext("2d");x.width=ut(y),x.height=ut(w),M.fillStyle=i.fillColor||"transparent",M.fillRect(0,0,y,w);var k=i.imageSmoothingEnabled,T=k===void 0||k,B=i.imageSmoothingQuality;M.imageSmoothingEnabled=T,B&&(M.imageSmoothingQuality=B);var I,u,R,ot,V,P,it=n.width,_=n.height,Y=o,X=h;Y<=-s||it<Y?V=R=I=Y=0:Y<=0?(R=-Y,Y=0,V=I=Math.min(it,s+Y)):Y<=it&&(R=0,V=I=Math.min(s,it-Y)),I<=0||X<=-d||_<X?P=ot=u=X=0:X<=0?(ot=-X,X=0,P=u=Math.min(_,d+X)):X<=_&&(ot=0,P=u=Math.min(d,_-X));var Ct=[Y,X,I,u];if(0<V&&0<P){var rt=y/s;Ct.push(R*rt,ot*rt,V*rt,P*rt)}return M.drawImage.apply(M,[n].concat(Ot(Ct.map(function(ft){return Math.floor(ut(ft))})))),x},setAspectRatio:function(t){var i=this.options;return this.disabled||At(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=t===Yt,o=i.movable&&t===Gt;t=a||o?t:Vt,i.dragMode=t,xt(e,yt,t),mt(e,Rt,a),mt(e,Ht,o),i.cropBoxMovable||(xt(n,yt,t),mt(n,Rt,a),mt(n,Ht,o))}return this}},ei=U.Cropper,Nt=function(){function t(i){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),!i||!Se.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=D({},ne,lt(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function(i,e,n){e&&Dt(i.prototype,e),n&&Dt(i,n)}(t,[{key:"init",value:function(){var i,e=this.element,n=e.tagName.toLowerCase();if(!e[C]){if(e[C]=this,n==="img"){if(this.isImg=!0,i=e.getAttribute("src")||"",!(this.originalUrl=i))return;i=e.src}else n==="canvas"&&window.HTMLCanvasElement&&(i=e.toDataURL());this.load(i)}}},{key:"load",value:function(i){var e=this;if(i){this.url=i,this.imageData={};var n=this.element,a=this.options;if(a.rotatable||a.scalable||(a.checkOrientation=!1),a.checkOrientation&&window.ArrayBuffer)if(ze.test(i))$e.test(i)?this.read(function(s){var d=s.replace(Je,""),r=atob(d),p=new ArrayBuffer(r.length),c=new Uint8Array(p);return O(c,function(l,b){c[b]=r.charCodeAt(b)}),p}(i)):this.clone();else{var o=new XMLHttpRequest,h=this.clone.bind(this);this.reloading=!0,(this.xhr=o).onabort=h,o.onerror=h,o.ontimeout=h,o.onprogress=function(){o.getResponseHeader("content-type")!==ae&&o.abort()},o.onload=function(){e.read(o.response)},o.onloadend=function(){e.reloading=!1,e.xhr=null},a.checkCrossOrigin&&de(i)&&n.crossOrigin&&(i=pe(i)),o.open("GET",i),o.responseType="arraybuffer",o.withCredentials=n.crossOrigin==="use-credentials",o.send()}else this.clone()}}},{key:"read",value:function(i){var e=this.options,n=this.imageData,a=Ke(i),o=0,h=1,s=1;if(1<a){this.url=function(r,p){for(var c=[],l=new Uint8Array(r);0<l.length;)c.push(le.apply(null,re(l.subarray(0,8192)))),l=l.subarray(8192);return"data:".concat(p,";base64,").concat(btoa(c.join("")))}(i,ae);var d=function(r){var p=0,c=1,l=1;switch(r){case 2:c=-1;break;case 3:p=-180;break;case 4:l=-1;break;case 5:p=90,l=-1;break;case 6:p=90;break;case 7:p=90,c=-1;break;case 8:p=-90}return{rotate:p,scaleX:c,scaleY:l}}(a);o=d.rotate,h=d.scaleX,s=d.scaleY}e.rotatable&&(n.rotate=o),e.scalable&&(n.scaleX=h,n.scaleY=s),this.clone()}},{key:"clone",value:function(){var i=this.element,e=this.url,n=i.crossOrigin,a=e;this.options.checkCrossOrigin&&de(e)&&(n=n||"anonymous",a=pe(e)),this.crossOrigin=n,this.crossOriginUrl=a;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=a||e,o.alt=i.alt||"The image to crop",(this.image=o).onload=this.start.bind(this),o.onerror=this.stop.bind(this),E(o,Ft),i.parentNode.insertBefore(o,i.nextSibling)}},{key:"start",value:function(){var i=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;function n(s,d){D(i.imageData,{naturalWidth:s,naturalHeight:d,aspectRatio:s/d}),i.sizing=!1,i.sized=!0,i.build()}var a=U.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(U.navigator.userAgent);if(!e.naturalWidth||a){var o=document.createElement("img"),h=document.body||document.documentElement;(this.sizingImage=o).onload=function(){n(o.width,o.height),a||h.removeChild(o)},o.src=e.src,a||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",h.appendChild(o))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var i=this.element,e=this.options,n=this.image,a=i.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var h=o.querySelector(".".concat(C,"-container")),s=h.querySelector(".".concat(C,"-canvas")),d=h.querySelector(".".concat(C,"-drag-box")),r=h.querySelector(".".concat(C,"-crop-box")),p=r.querySelector(".".concat(C,"-face"));this.container=a,this.cropper=h,this.canvas=s,this.dragBox=d,this.cropBox=r,this.viewBox=h.querySelector(".".concat(C,"-view-box")),this.face=p,s.appendChild(n),E(i,N),a.insertBefore(h,i.nextSibling),this.isImg||K(n,Ft),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,E(r,N),e.guides||E(r.getElementsByClassName("".concat(C,"-dashed")),N),e.center||E(r.getElementsByClassName("".concat(C,"-center")),N),e.background&&E(h,"".concat(C,"-bg")),e.highlight||E(p,Ye),e.cropBoxMovable&&(E(p,Ht),xt(p,yt,ct)),e.cropBoxResizable||(E(r.getElementsByClassName("".concat(C,"-line")),N),E(r.getElementsByClassName("".concat(C,"-point")),N)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),L(e.ready)&&A(i,"ready",e.ready,{once:!0}),gt(i,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),K(this.element,N))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ei,t}},{key:"setDefaults",value:function(i){D(ne,lt(i)&&i)}}]),t}();if(D(Nt.prototype,Ze,Fe,Ge,Ve,_e,ti),g.fn){var ii=g.fn.cropper,qt="cropper";g.fn.cropper=function(t){for(var i=arguments.length,e=new Array(1<i?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];var a;return this.each(function(o,h){var s=g(h),d=t==="destroy",r=s.data(qt);if(!r){if(d)return;var p=g.extend({},s.data(),g.isPlainObject(t)&&t);r=new Nt(h,p),s.data(qt,r)}if(typeof t=="string"){var c=r[t];g.isFunction(c)&&((a=c.apply(r,e))===r&&(a=void 0),d&&s.removeData(qt))}}),a!==void 0?a:this},g.fn.cropper.Constructor=Nt,g.fn.cropper.setDefaults=Nt.setDefaults,g.fn.cropper.noConflict=function(){return g.fn.cropper=ii,this}}})})();$(function(){var Z=window.console||{log:function(){}},vt=window.URL||window.webkitURL,g=$("#image"),F=$("#download"),Dt=$("#dataX"),kt=$("#dataY"),Bt=$("#dataHeight"),Ot=$("#dataWidth"),st=$("#dataRotate"),U=$("#dataScaleX"),wt=$("#dataScaleY"),z={aspectRatio:16/9,preview:".img-preview",crop:function(m){Dt.val(Math.round(m.detail.x)),kt.val(Math.round(m.detail.y)),Bt.val(Math.round(m.detail.height)),Ot.val(Math.round(m.detail.width)),st.val(m.detail.rotate),U.val(m.detail.scaleX),wt.val(m.detail.scaleY)}},C=g.attr("src"),ct="cropped.jpg",dt="image/jpeg",J;g.on({ready:function(m){Z.log(m.type)},cropstart:function(m){Z.log(m.type,m.detail.action)},cropmove:function(m){Z.log(m.type,m.detail.action)},cropend:function(m){Z.log(m.type,m.detail.action)},crop:function(m){Z.log(m.type)},zoom:function(m){Z.log(m.type,m.detail.ratio)}}).cropper(z),$.isFunction(document.createElement("canvas").getContext)||$('button[data-method="getCroppedCanvas"]').prop("disabled",!0),typeof document.createElement("cropper").style.transition>"u"&&($('button[data-method="rotate"]').prop("disabled",!0),$('button[data-method="scale"]').prop("disabled",!0)),typeof F[0].download>"u"&&F.addClass("disabled"),$(".docs-toggles").on("change","input",function(){var m=$(this),v=m.attr("name"),S=m.prop("type"),W,H;g.data("cropper")&&(S=="checkbox"?(z[v]=m.prop("checked"),W=g.cropper("getCropBoxData"),H=g.cropper("getCanvasData"),z.ready=function(){g.cropper("setCropBoxData",W),g.cropper("setCanvasData",H)}):S=="radio"&&(z[v]=m.val()),g.cropper("destroy").cropper(z))}),$(".docs-buttons").on("click","[data-method]",function(){var m=$(this),v=m.data(),S=g.data("cropper"),W,H,j;if(!(m.prop("disabled")||m.hasClass("disabled"))&&S&&v.method){if(v=$.extend({},v),typeof v.target<"u"&&(H=$(v.target),typeof v.option>"u"))try{v.option=JSON.parse(H.val())}catch(G){Z.log(G.message)}switch(W=S.cropped,v.method){case"rotate":W&&z.viewMode>0&&g.cropper("clear");break;case"getCroppedCanvas":dt==="image/jpeg"&&(v.option||(v.option={}),v.option.fillColor="#fff");break}switch(j=g.cropper(v.method,v.option,v.secondOption),v.method){case"rotate":W&&z.viewMode>0&&g.cropper("crop");break;case"scaleX":case"scaleY":$(this).data("option",-v.option);break;case"getCroppedCanvas":j&&($("#getCroppedCanvasModal").modal().find(".modal-body").html(j),F.hasClass("disabled")||(download.download=ct,F.attr("href",j.toDataURL(dt))));break;case"destroy":J&&(vt.revokeObjectURL(J),J="",g.attr("src",C));break}if($.isPlainObject(j)&&H)try{H.val(JSON.stringify(j))}catch(G){Z.log(G.message)}}}),$(document.body).on("keydown",function(m){if(!(m.target!==this||!g.data("cropper")||this.scrollTop>300))switch(m.which){case 37:m.preventDefault(),g.cropper("move",-1,0);break;case 38:m.preventDefault(),g.cropper("move",0,-1);break;case 39:m.preventDefault(),g.cropper("move",1,0);break;case 40:m.preventDefault(),g.cropper("move",0,1);break}});var pt=$("#inputImage");vt?pt.change(function(){var m=this.files,v;g.data("cropper")&&m&&m.length&&(v=m[0],/^image\/\w+$/.test(v.type)?(ct=v.name,dt=v.type,J&&vt.revokeObjectURL(J),J=vt.createObjectURL(v),g.cropper("destroy").attr("src",J).cropper(z),pt.val("")):window.alert("Please choose an image file."))}):pt.prop("disabled",!0).parent().addClass("disabled"),document.querySelectorAll(".docs-options input").forEach(function(m){m.click()})});

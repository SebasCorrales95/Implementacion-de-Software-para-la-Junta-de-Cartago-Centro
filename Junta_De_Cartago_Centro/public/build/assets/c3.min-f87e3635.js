import{c as Vt}from"./_commonjsHelpers-042e6b4d.js";import{c as Gt}from"./_commonjs-dynamic-modules-302442b1.js";import{r as Et}from"./index-5fa08d9d.js";var vt={},Ot={get exports(){return vt},set exports(lt){vt=lt}};/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */(function(lt,It){(function(c,T){lt.exports=T()})(Vt,function(){function c(t){var e=this;e.d3=window.d3?window.d3:typeof Gt<"u"?Et:void 0,e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function T(t){this.internal=new c(this),this.internal.loadConfig(t),this.internal.beforeInit(t),this.internal.init(),this.internal.afterInit(t),function e(i,n,r){Object.keys(i).forEach(function(a){n[a]=i[a].bind(r),0<Object.keys(i[a]).length&&e(i[a],n[a],r)})}(T.prototype,this,this)}function rt(t){return Math.ceil(t)+.5}function ht(t){return 10*Math.ceil(t/10)}function at(t){return t[1]-t[0]}function k(t,e,i){return M(t[e])?t[e]:i}function yt(t){var e=K(t),i=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:i[0].x,y:Math.min(i[0].y,i[1].y),width:e.width,height:e.height}}function ot(t){return Array.isArray(t)}function gt(t){return t==null||z(t)&&t.length===0||typeof t=="object"&&Object.keys(t).length===0}function B(t){return typeof t=="function"}function mt(t){return typeof t=="number"}function j(t){return t===void 0}function O(t){return t||t===0}function U(t){return!gt(t)}function et(t){return typeof t=="string"?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function St(t){var e=function(i){i===void 0&&(i=window.navigator.userAgent);var n=i.indexOf("MSIE ");return 0<n?parseInt(i.substring(n+5,i.indexOf(".",n)),10):0<(n=i.indexOf("Trident/"))&&(n=i.indexOf("rv:"),parseInt(i.substring(n+3,i.indexOf(".",n)),10))}();return t===void 0?!!e:t===e}var K=function(t){try{return t.getBBox()}catch{return{x:0,y:0,width:0,height:0}}},M=function(t){return t!==void 0},z=function(t){return typeof t=="string"};function F(t,e){var i=this;i.component=t,i.params=e||{},i.d3=t.d3,i.scale=i.d3.scaleLinear(),i.range,i.orient="bottom",i.innerTickSize=6,i.outerTickSize=this.params.withOuterTick?6:0,i.tickPadding=3,i.tickValues=null,i.tickFormat,i.tickArguments,i.tickOffset=0,i.tickCulling=!0,i.tickCentered,i.tickTextCharSize,i.tickTextRotate=i.params.tickTextRotate,i.tickLength,i.axis=i.generateAxis()}F.prototype.axisX=function(t,e,i){t.attr("transform",function(n){return"translate("+Math.ceil(e(n)+i)+", 0)"})},F.prototype.axisY=function(t,e){t.attr("transform",function(i){return"translate(0,"+Math.ceil(e(i))+")"})},F.prototype.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},F.prototype.generateTicks=function(t){var e,i,n=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(i=t.domain(),e=Math.ceil(i[0]);e<i[1];e++)n.push(e);return 0<n.length&&0<n[0]&&n.unshift(n[0]-(n[1]-n[0])),n},F.prototype.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},F.prototype.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return e!==void 0?e:""},F.prototype.updateRange=function(){var t=this;return t.range=t.scale.rangeExtent?t.scale.rangeExtent():t.scaleExtent(t.scale.range()),t.range},F.prototype.updateTickTextCharSize=function(t){var e=this;if(e.tickTextCharSize)return e.tickTextCharSize;var i={h:11.5,w:5.5};return t.select("text").text(function(n){return e.textFormatted(n)}).each(function(n){var r=K(this),a=e.textFormatted(n),s=r.height,o=a?r.width/a.length:void 0;s&&o&&(i.h=s,i.w=o)}).text(""),e.tickTextCharSize=i},F.prototype.isVertical=function(){return this.orient==="left"||this.orient==="right"},F.prototype.tspanData=function(t,e,i){var n=this,r=n.params.tickMultiline?n.splitTickText(t,i):[].concat(n.textFormatted(t));return n.params.tickMultiline&&0<n.params.tickMultilineMax&&(r=n.ellipsify(r,n.params.tickMultilineMax)),r.map(function(a){return{index:e,splitted:a,length:r.length}})},F.prototype.splitTickText=function(t,e){var i,n,r,a=this,s=a.textFormatted(t),o=a.params.tickWidth;return Object.prototype.toString.call(s)==="[object Array]"?s:((!o||o<=0)&&(o=a.isVertical()?95:a.params.isCategory?Math.ceil(e(1)-e(0))-12:110),function u(d,h){n=void 0;for(var g=1;g<h.length;g++)if(h.charAt(g)===" "&&(n=g),i=h.substr(0,g+1),r=a.tickTextCharSize.w*i.length,o<r)return u(d.concat(h.substr(0,n||g)),h.slice(n?n+1:g));return d.concat(h)}([],s+""))},F.prototype.ellipsify=function(t,e){if(t.length<=e)return t;for(var i=t.slice(0,e),n=3,r=e-1;0<=r;r--){var a=i[r].length;if(i[r]=i[r].substr(0,a-n).padEnd(a,"."),(n-=a)<=0)break}return i},F.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},F.prototype.lineY2=function(t){var e=this,i=e.scale(t)+(e.tickCentered?0:e.tickOffset);return e.range[0]<i&&i<e.range[1]?e.innerTickSize:0},F.prototype.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(0<t?1:-1):this.tickLength},F.prototype.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},F.prototype.textTextAnchor=function(){var t=this.tickTextRotate;return t?0<t?"start":"end":"middle"},F.prototype.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},F.prototype.tspanDy=function(t,e){var i=this.tickTextCharSize.h;return e===0&&(i=this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),i},F.prototype.generateAxis=function(){var t=this,e=t.d3,i=t.params;function n(r,a){var s;return r.each(function(){var o,u,d,h=n.g=e.select(this),g=this.__chart__||t.scale,_=this.__chart__=t.copyScale(),p=t.tickValues?t.tickValues:t.generateTicks(_),x=h.selectAll(".tick").data(p,_),y=x.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),S=x.exit().remove(),f=x.merge(y);i.isCategory?(t.tickOffset=Math.ceil((_(1)-_(0))/2),u=t.tickCentered?0:t.tickOffset,d=t.tickCentered?t.tickOffset:0):t.tickOffset=u=0,t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(h.select(".tick"));var G=f.select("line").merge(y.append("line")),m=f.select("text").merge(y.append("text")),v=f.selectAll("text").selectAll("tspan").data(function(b,L){return t.tspanData(b,L,_)}),A=v.enter().append("tspan").merge(v).text(function(b){return b.splitted});v.exit().remove();var R,P,I=h.selectAll(".domain").data([0]),C=I.enter().append("path").merge(I).attr("class","domain");switch(t.orient){case"bottom":o=t.axisX,G.attr("x1",u).attr("x2",u).attr("y2",function(b,L){return t.lineY2(b,L)}),m.attr("x",0).attr("y",function(b,L){return t.textY(b,L)}).attr("transform",function(b,L){return t.textTransform(b,L)}).style("text-anchor",function(b,L){return t.textTextAnchor(b,L)}),A.attr("x",0).attr("dy",function(b,L){return t.tspanDy(b,L)}).attr("dx",function(b,L){return t.tspanDx(b,L)}),C.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":o=t.axisX,G.attr("x1",u).attr("x2",u).attr("y2",function(b,L){return-1*t.lineY2(b,L)}),m.attr("x",0).attr("y",function(b,L){return-1*t.textY(b,L)-(i.isCategory?2:t.tickLength-2)}).attr("transform",function(b,L){return t.textTransform(b,L)}).style("text-anchor",function(b,L){return t.textTextAnchor(b,L)}),A.attr("x",0).attr("dy",function(b,L){return t.tspanDy(b,L)}).attr("dx",function(b,L){return t.tspanDx(b,L)}),C.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":o=t.axisY,G.attr("x2",-t.innerTickSize).attr("y1",d).attr("y2",d),m.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end"),A.attr("x",-t.tickLength).attr("dy",function(b,L){return t.tspanDy(b,L)}),C.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":o=t.axisY,G.attr("x2",t.innerTickSize).attr("y1",d).attr("y2",d),m.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start"),A.attr("x",t.tickLength).attr("dy",function(b,L){return t.tspanDy(b,L)}),C.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize)}_.rangeBand?(P=(R=_).rangeBand()/2,g=_=function(b){return R(b)+P}):g.rangeBand?g=_:S.call(o,_,t.tickOffset),y.call(o,g,t.tickOffset),s=(a?f.transition(a):f).style("opacity",1).call(o,_,t.tickOffset)}),s}return n.scale=function(r){return arguments.length?(t.scale=r,n):t.scale},n.orient=function(r){return arguments.length?(t.orient=r in{top:1,right:1,bottom:1,left:1}?r+"":"bottom",n):t.orient},n.tickFormat=function(r){return arguments.length?(t.tickFormat=r,n):t.tickFormat},n.tickCentered=function(r){return arguments.length?(t.tickCentered=r,n):t.tickCentered},n.tickOffset=function(){return t.tickOffset},n.tickInterval=function(){var r=i.isCategory?2*t.tickOffset:(n.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize)/n.g.selectAll("line").size();return r===1/0?0:r},n.ticks=function(){return arguments.length?(t.tickArguments=arguments,n):t.tickArguments},n.tickCulling=function(r){return arguments.length?(t.tickCulling=r,n):t.tickCulling},n.tickValues=function(r){if(typeof r=="function")t.tickValues=function(){return r(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=r}return n},n};var l={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},pt=function(t){this.owner=t,this.d3=t.d3,this.internal=F},V=pt;V.prototype.init=function(){var t=this.owner,e=t.config,i=t.main;t.axes.x=i.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=i.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=i.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},V.prototype.getXAxis=function(t,e,i,n,r,a,s){var o=this.owner,u=o.config,d={isCategory:o.isCategorized(),withOuterTick:r,tickMultiline:u.axis_x_tick_multiline,tickMultilineMax:u.axis_x_tick_multiline?Number(u.axis_x_tick_multilineMax):0,tickWidth:u.axis_x_tick_width,tickTextRotate:s?0:u.axis_x_tick_rotate,withoutTransition:a},h=new this.internal(this,d).axis.scale(t).orient(e);return o.isTimeSeries()&&n&&typeof n!="function"&&(n=n.map(function(g){return o.parseDate(g)})),h.tickFormat(i).tickValues(n),o.isCategorized()&&(h.tickCentered(u.axis_x_tick_centered),gt(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),h},V.prototype.updateXAxisTickValues=function(t,e){var i,n=this.owner,r=n.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(i=this.generateTickValues(n.mapTargetsToUniqueXs(t),r.axis_x_tick_count,n.isTimeSeries())),e?e.tickValues(i):(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i},V.prototype.getYAxis=function(t,e,i,n,r,a,s){var o=this.owner,u=o.config,d=u["axis_"+t+"_tick_format"];!d&&o.isAxisNormalized(t)&&(d=function(g){return g+"%"});var h=new this.internal(this,{withOuterTick:r,withoutTransition:a,tickTextRotate:s?0:u.axis_y_tick_rotate}).axis.scale(e).orient(i);return d&&h.tickFormat(d),o.isTimeSeriesY()?h.ticks(u.axis_y_tick_time_type,u.axis_y_tick_time_interval):h.tickValues(n),h},V.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},V.prototype.getXAxisTickFormat=function(){var t=this.owner,e=t.config,i=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(n){return n};return e.axis_x_tick_format&&(B(e.axis_x_tick_format)?i=e.axis_x_tick_format:t.isTimeSeries()&&(i=function(n){return n?t.axisTimeFormat(e.axis_x_tick_format)(n):""})),B(i)?function(n){return i.call(t,n)}:i},V.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},V.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},V.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},V.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},V.prototype.getLabelOptionByAxisId=function(t){var e,i=this.owner.config;return t==="y"?e=i.axis_y_label:t==="y2"?e=i.axis_y2_label:t==="x"&&(e=i.axis_x_label),e},V.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return z(e)?e:e?e.text:null},V.prototype.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);z(n)?t==="y"?i.axis_y_label=e:t==="y2"?i.axis_y2_label=e:t==="x"&&(i.axis_x_label=e):n&&(n.text=e)},V.prototype.getLabelPosition=function(t,e){var i=this.getLabelOptionByAxisId(t),n=i&&typeof i=="object"&&i.position?i.position:e;return{isInner:0<=n.indexOf("inner"),isOuter:0<=n.indexOf("outer"),isLeft:0<=n.indexOf("left"),isCenter:0<=n.indexOf("center"),isRight:0<=n.indexOf("right"),isTop:0<=n.indexOf("top"),isMiddle:0<=n.indexOf("middle"),isBottom:0<=n.indexOf("bottom")}},V.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},V.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},V.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},V.prototype.getLabelPositionById=function(t){return t==="y2"?this.getY2AxisLabelPosition():t==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},V.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},V.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},V.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},V.prototype.xForAxisLabel=function(t,e){var i=this.owner;return t?e.isLeft?0:e.isCenter?i.width/2:i.width:e.isBottom?-i.height:e.isMiddle?-i.height/2:0},V.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},V.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},V.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},V.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},V.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},V.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},V.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},V.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},V.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,i=this.getXAxisLabelPosition();return e.axis_rotated?i.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):i.isInner?"-0.5em":t.getHorizontalAxisHeight("x")-10},V.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},V.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},V.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},V.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},V.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},V.prototype.getMaxTickWidth=function(t,e){var i,n,r,a,s=this.owner,o=0;return e&&s.currentMaxTickWidths[t]||(s.svg&&(i=s.filterTargetsToShow(s.data.targets),t==="y"?(n=s.y.copy().domain(s.getYDomain(i,"y")),r=this.getYAxis(t,n,s.yOrient,s.yAxisTickValues,!1,!0,!0)):t==="y2"?(n=s.y2.copy().domain(s.getYDomain(i,"y2")),r=this.getYAxis(t,n,s.y2Orient,s.y2AxisTickValues,!1,!0,!0)):(n=s.x.copy().domain(s.getXDomain(i)),r=this.getXAxis(n,s.xOrient,s.xAxisTickFormat,s.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(i,r)),(a=s.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(r).each(function(){s.d3.select(this).selectAll("text").each(function(){var u=K(this);o<u.width&&(o=u.width)}),a.remove()})),s.currentMaxTickWidths[t]=o<=0?s.currentMaxTickWidths[t]:o),s.currentMaxTickWidths[t]},V.prototype.updateLabels=function(t){var e=this.owner,i=e.main.select("."+l.axisX+" ."+l.axisXLabel),n=e.main.select("."+l.axisY+" ."+l.axisYLabel),r=e.main.select("."+l.axisY2+" ."+l.axisY2Label);(t?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},V.prototype.getPadding=function(t,e,i,n){var r=typeof t=="number"?t:t[e];return O(r)?t.unit==="ratio"?t[e]*n:this.convertPixelsToAxisPadding(r,n):i},V.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))},V.prototype.generateTickValues=function(t,e,i){var n,r,a,s,o,u,d,h=t;if(e){if((n=B(e)?e():e)===1)h=[t[0]];else if(n===2)h=[t[0],t[t.length-1]];else if(2<n){for(s=n-2,r=t[0],o=((a=t[t.length-1])-r)/(1+s),h=[r],u=0;u<s;u++)d=+r+o*(u+1),h.push(i?new Date(d):d);h.push(a)}}return i||(h=h.sort(function(g,_){return g-_})),h},V.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},V.prototype.redraw=function(t,e){var i=this.owner,n=t?i.d3.transition().duration(t):null;i.axes.x.style("opacity",e?0:1).call(i.xAxis,n),i.axes.y.style("opacity",e?0:1).call(i.yAxis,n),i.axes.y2.style("opacity",e?0:1).call(i.y2Axis,n),i.axes.subx.style("opacity",e?0:1).call(i.subXAxis,n)};var bt={version:"0.7.20",chart:{fn:T.prototype,internal:{fn:c.prototype,axis:{fn:pt.prototype,internal:{fn:F.prototype}}}},generate:function(t){return new T(t)}};function wt(t,e,i){var n=[.01,10];function r(a){return i(e(a))}return e||(e=t.scaleLinear()).range(n),i||((i=t.scaleLog()).domain(n),i.nice()),r.domain=function(a){return arguments.length?(e.domain(a),r):e.domain()},r.range=function(a){return arguments.length?(i.range(a),r):i.range()},r.ticks=function(a){return function(s,o,u){var d,h,g,_;if(arguments.length<3)u=10;else if(u===0)return[];_=(o-s)/(h=u-1),g=s,(d=new Array(u))[0]=Math.pow(10,g);for(var p=1;p<h;p++)g+=_,d[p]=Math.pow(10,g);return d[h]=Math.pow(10,o),d}(-2,1,a||10).map(function(s){return e.invert(s)})},r.copy=function(){return wt(t,e.copy(),i.copy())},r}function Tt(t){return t/Math.pow(10,Math.ceil(Math.log(t)/Math.LN10-1e-12))==1}c.prototype.beforeInit=function(){},c.prototype.afterInit=function(){},c.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},c.prototype.initParams=function(){var t=this,e=t.d3,i=t.config;t.clipId="c3-"+new Date().valueOf()+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=void 0,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeParse=(i.data_xLocaltime?e.timeParse:e.utcParse)(t.config.data_xFormat),t.axisTimeFormat=i.axis_x_localtime?e.timeFormat:e.utcFormat,t.defaultAxisTimeFormat=function(n){return(n.getMilliseconds()?e.timeFormat(".%L"):n.getSeconds()?e.timeFormat(":%S"):n.getMinutes()?e.timeFormat("%I:%M"):n.getHours()?e.timeFormat("%I %p"):n.getDay()&&n.getDate()!==1||n.getDate()!==1||n.getMonth()?e.timeFormat("%-m/%-d"):e.timeFormat("%Y/%-m/%-d"))(n)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=i.axis_rotated?i.axis_x_inner?"right":"left":i.axis_x_inner?"top":"bottom",t.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left",t.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right",t.subXOrient=i.axis_rotated?"left":"bottom",t.isLegendRight=i.legend_position==="right",t.isLegendInset=i.legend_position==="inset",t.isLegendTop=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="top-right",t.isLegendLeft=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="bottom-left",t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=i.axis_rotated&&!i.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},c.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},c.prototype.initWithData=function(t){var e,i,n=this,r=n.d3,a=n.config,s=!0;n.axis=new pt(n),a.bindto?typeof a.bindto.node=="function"?n.selectChart=a.bindto:n.selectChart=r.select(a.bindto):n.selectChart=r.selectAll([]),n.selectChart.empty()&&(n.selectChart=r.select(document.createElement("div")).style("opacity",0),n.observeInserted(n.selectChart),s=!1),n.selectChart.html("").classed("c3",!0),n.data.xs={},n.data.targets=n.convertDataToTargets(t),a.data_filter&&(n.data.targets=n.data.targets.filter(a.data_filter)),a.data_hide&&n.addHiddenTargetIds(a.data_hide===!0?n.mapToIds(n.data.targets):a.data_hide),a.legend_hide&&n.addHiddenLegendIds(a.legend_hide===!0?n.mapToIds(n.data.targets):a.legend_hide),n.isStanfordGraphType()&&n.initStanfordData(),n.updateSizes(),n.updateScales(),n.x.domain(r.extent(n.getXDomain(n.data.targets))),n.y.domain(n.getYDomain(n.data.targets,"y")),n.y2.domain(n.getYDomain(n.data.targets,"y2")),n.subX.domain(n.x.domain()),n.subY.domain(n.y.domain()),n.subY2.domain(n.y2.domain()),n.orgXDomain=n.x.domain(),n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return a.onmouseover.call(n)}).on("mouseleave",function(){return a.onmouseout.call(n)}),n.config.svg_classname&&n.svg.attr("class",n.config.svg_classname),e=n.svg.append("defs"),n.clipChart=n.appendClip(e,n.clipId),n.clipXAxis=n.appendClip(e,n.clipIdForXAxis),n.clipYAxis=n.appendClip(e,n.clipIdForYAxis),n.clipGrid=n.appendClip(e,n.clipIdForGrid),n.clipSubchart=n.appendClip(e,n.clipIdForSubchart),n.updateSvgSize(),i=n.main=n.svg.append("g").attr("transform",n.getTranslate("main")),n.initPie&&n.initPie(),n.initDragZoom&&n.initDragZoom(),a.subchart_show&&n.initSubchart&&n.initSubchart(),n.initTooltip&&n.initTooltip(),n.initLegend&&n.initLegend(),n.initTitle&&n.initTitle(),n.initZoom&&n.initZoom(),n.isStanfordGraphType()&&n.drawColorScale(),a.subchart_show&&n.initSubchartBrush&&n.initSubchartBrush(),i.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),n.initRegion(),n.initGrid(),i.append("g").attr("clip-path",n.clipPath).attr("class",l.chart),a.grid_lines_front&&n.initGridLines(),n.initStanfordElements(),n.initEventRect(),n.initChartElements(),n.axis.init(),n.updateTargets(n.data.targets),a.axis_x_selection&&n.brush.selectionAsValue(n.getDefaultSelection()),s&&(n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),n.bindResize(),n.bindWindowFocus(),n.api.element=n.selectChart.node()},c.prototype.smoothLines=function(t,e){var i=this;e==="grid"&&t.each(function(){var n=i.d3.select(this),r=n.attr("x1"),a=n.attr("x2"),s=n.attr("y1"),o=n.attr("y2");n.attr({x1:Math.ceil(r),x2:Math.ceil(a),y1:Math.ceil(s),y2:Math.ceil(o)})})},c.prototype.updateSizes=function(){var t=this,e=t.config,i=t.legend?t.getLegendHeight():0,n=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:i,a=t.hasArcType(),s=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x",!0),u=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:u+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:s+u+r+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-u-r,right:NaN,bottom:o+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(i,n),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?n+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},c.prototype.updateTargets=function(t){var e=this,i=e.config;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),i.subchart_show&&e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},c.prototype.showTargets=function(){var t=this;t.svg.selectAll("."+l.target).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity",1)},c.prototype.redraw=function(t,e){var i,n,r,a,s,o,u,d,h,g,_,p,x,y,S,f=this,G=f.main,m=f.d3,v=f.config,A=f.getShapeIndices(f.isAreaType),R=f.getShapeIndices(f.isBarType),P=f.getShapeIndices(f.isLineType),I=f.hasArcType(),C=f.filterTargetsToShow(f.data.targets),b=f.xv.bind(f),L=k(t=t||{},"withY",!0),H=k(t,"withSubchart",!0),N=k(t,"withTransition",!0),q=k(t,"withTransform",!1),Z=k(t,"withUpdateXDomain",!1),D=k(t,"withUpdateOrgXDomain",!1),X=k(t,"withTrimXDomain",!0),W=k(t,"withUpdateXAxis",Z),w=k(t,"withLegend",!1),E=k(t,"withEventRect",!0),it=k(t,"withDimension",!0),nt=k(t,"withTransitionForExit",N),st=k(t,"withTransitionForAxis",N),Y=N?v.transition_duration:0,Q=nt?Y:0,ct=st?Y:0;if(e=e||f.axis.generateTransitions(ct),w&&v.legend_show?f.updateLegend(f.mapToIds(f.data.targets),t,e):it&&f.updateDimension(!0),f.isCategorized()&&C.length===0&&f.x.domain([0,f.axes.x.selectAll(".tick").size()]),C.length?(f.updateXDomain(C,Z,D,X),v.axis_x_tick_values||(g=f.axis.updateXAxisTickValues(C))):(f.xAxis.tickValues([]),f.subXAxis.tickValues([])),v.zoom_rescale&&!t.flow&&(x=f.x.orgDomain()),f.y.domain(f.getYDomain(C,"y",x)),f.y2.domain(f.getYDomain(C,"y2",x)),!v.axis_y_tick_values&&v.axis_y_tick_count&&f.yAxis.tickValues(f.axis.generateTickValues(f.y.domain(),v.axis_y_tick_count)),!v.axis_y2_tick_values&&v.axis_y2_tick_count&&f.y2Axis.tickValues(f.axis.generateTickValues(f.y2.domain(),v.axis_y2_tick_count)),f.axis.redraw(ct,I),f.axis.updateLabels(N),(Z||W)&&C.length)if(v.axis_x_tick_culling&&g){for(_=1;_<g.length;_++)if(g.length/_<v.axis_x_tick_culling_max){p=_;break}f.svg.selectAll("."+l.axisX+" .tick text").each(function($){var tt=g.indexOf($);0<=tt&&m.select(this).style("display",tt%p?"none":"block")})}else f.svg.selectAll("."+l.axisX+" .tick text").style("display","block");i=f.generateDrawArea?f.generateDrawArea(A,!1):void 0,n=f.generateDrawBar?f.generateDrawBar(R):void 0,r=f.generateDrawLine?f.generateDrawLine(P,!1):void 0,a=f.generateXYForText(A,R,P,!0),s=f.generateXYForText(A,R,P,!1),f.updateCircleY(),y=(f.config.axis_rotated?f.circleY:f.circleX).bind(f),S=(f.config.axis_rotated?f.circleX:f.circleY).bind(f),L&&(f.subY.domain(f.getYDomain(C,"y")),f.subY2.domain(f.getYDomain(C,"y2"))),f.updateXgridFocus(),G.select("text."+l.text+"."+l.empty).attr("x",f.width/2).attr("y",f.height/2).text(v.data_empty_label_text).transition().style("opacity",C.length?0:1),E&&f.redrawEventRect(),f.updateGrid(Y),f.updateStanfordElements(Y),f.updateRegion(Y),f.updateBar(Q),f.updateLine(Q),f.updateArea(Q),f.updateCircle(y,S),f.hasDataLabel()&&f.updateText(a,s,Q),f.redrawTitle&&f.redrawTitle(),f.redrawArc&&f.redrawArc(Y,Q,q),v.subchart_show&&f.redrawSubchart&&f.redrawSubchart(H,e,Y,Q,A,R,P),f.isStanfordGraphType()&&f.drawColorScale(),G.selectAll("."+l.selectedCircles).filter(f.isBarType.bind(f)).selectAll("circle").remove(),t.flow&&(d=f.generateFlow({targets:C,flow:t.flow,duration:t.flow.duration,drawBar:n,drawLine:r,drawArea:i,cx:y,cy:S,xv:b,xForText:a,yForText:s})),Y&&f.isTabVisible()?(h=m.transition().duration(Y),o=[],[f.redrawBar(n,!0,h),f.redrawLine(r,!0,h),f.redrawArea(i,!0,h),f.redrawCircle(y,S,!0,h),f.redrawText(a,s,t.flow,!0,h),f.redrawRegion(!0,h),f.redrawGrid(!0,h)].forEach(function($){$.forEach(function(tt){o.push(tt)})}),u=f.generateWait(),o.forEach(function($){u.add($)}),u(function(){d&&d(),v.onrendered&&v.onrendered.call(f)})):(f.redrawBar(n),f.redrawLine(r),f.redrawArea(i),f.redrawCircle(y,S),f.redrawText(a,s,t.flow),f.redrawRegion(),f.redrawGrid(),d&&d(),v.onrendered&&v.onrendered.call(f)),f.mapToIds(f.data.targets).forEach(function($){f.withoutFadeIn[$]=!0})},c.prototype.updateAndRedraw=function(t){var e,i=this,n=i.config;(t=t||{}).withTransition=k(t,"withTransition",!0),t.withTransform=k(t,"withTransform",!1),t.withLegend=k(t,"withLegend",!1),t.withUpdateXDomain=k(t,"withUpdateXDomain",!0),t.withUpdateOrgXDomain=k(t,"withUpdateOrgXDomain",!0),t.withTransitionForExit=!1,t.withTransitionForTransform=k(t,"withTransitionForTransform",t.withTransition),i.updateSizes(),t.withLegend&&n.legend_show||(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},c.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},c.prototype.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"},c.prototype.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},c.prototype.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||U(t.data_xs))},c.prototype.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"},c.prototype.getTranslate=function(t){var e,i,n=this,r=n.config;return t==="main"?(e=rt(n.margin.left),i=rt(n.margin.top)):t==="context"?(e=rt(n.margin2.left),i=rt(n.margin2.top)):t==="legend"?(e=n.margin3.left,i=n.margin3.top):t==="x"?(e=0,i=r.axis_rotated?0:n.height):t==="y"?(e=0,i=r.axis_rotated?n.height:0):t==="y2"?(e=r.axis_rotated?0:n.width,i=r.axis_rotated?1:0):t==="subx"?(e=0,i=r.axis_rotated?0:n.height2):t==="arc"&&(e=n.arcWidth/2,i=n.arcHeight/2-(n.hasType("gauge")?6:0)),"translate("+e+","+i+")"},c.prototype.initialOpacity=function(t){return t.value!==null&&this.withoutFadeIn[t.id]?1:0},c.prototype.initialOpacityForCircle=function(t){return t.value!==null&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},c.prototype.opacityForCircle=function(t){var e=(B(this.config.point_show)?this.config.point_show(t):this.config.point_show)||this.isStanfordType(t)?1:0;return O(t.value)?this.isScatterType(t)?.5:e:0},c.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},c.prototype.xx=function(t){return t?this.x(t.x):null},c.prototype.xvCustom=function(t,e){var i=this,n=e?t[e]:t.value;return i.isTimeSeries()?n=i.parseDate(t.value):i.isCategorized()&&typeof t.value=="string"&&(n=i.config.axis_x_categories.indexOf(t.value)),Math.ceil(i.x(n))},c.prototype.yvCustom=function(t,e){var i=t.axis&&t.axis==="y2"?this.y2:this.y,n=e?t[e]:t.value;return Math.ceil(i(n))},c.prototype.xv=function(t){var e=this,i=t.value;return e.isTimeSeries()?i=e.parseDate(t.value):e.isCategorized()&&typeof t.value=="string"&&(i=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(i))},c.prototype.yv=function(t){var e=t.axis&&t.axis==="y2"?this.y2:this.y;return Math.ceil(e(t.value))},c.prototype.subxx=function(t){return t?this.subX(t.x):null},c.prototype.transformMain=function(t,e){var i,n,r,a=this;e&&e.axisX?i=e.axisX:(i=a.main.select("."+l.axisX),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=a.main.select("."+l.axisY),t&&(n=n.transition())),e&&e.axisY2?r=e.axisY2:(r=a.main.select("."+l.axisY2),t&&(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),i.attr("transform",a.getTranslate("x")),n.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+l.chartArcs).attr("transform",a.getTranslate("arc"))},c.prototype.transformAll=function(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&&i.transformContext(t,e),i.legend&&i.transformLegend(t)},c.prototype.updateSvgSize=function(){var t=this,e=t.svg.select("."+l.brush+" .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()&&e.attr("height")||0),t.selectChart.style("max-height",t.currentHeight+"px")},c.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},c.prototype.observeInserted=function(t){var e,i=this;typeof MutationObserver<"u"?(e=new MutationObserver(function(n){n.forEach(function(r){r.type==="childList"&&r.previousSibling&&(e.disconnect(),i.intervalForObserveInserted=window.setInterval(function(){t.node().parentNode&&(window.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.brush&&i.brush.update(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})})).observe(t.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},c.prototype.bindResize=function(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){t.resizeTimeout!==void 0&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout,t.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.brush&&t.brush.update()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),t.resizeIfElementDisplayed=function(){t.api!=null&&t.api.element.offsetParent&&t.resizeFunction()},window.addEventListener("resize",t.resizeIfElementDisplayed,!1)},c.prototype.bindWindowFocus=function(){var t=this;this.windowFocusHandler||(this.windowFocusHandler=function(){t.redraw()},window.addEventListener("focus",this.windowFocusHandler))},c.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},c.prototype.generateResize=function(){var t=[];function e(){t.forEach(function(i){i()})}return e.add=function(i){t.push(i)},e.remove=function(i){for(var n=0;n<t.length;n++)if(t[n]===i){t.splice(n,1);break}},e},c.prototype.endall=function(t,e){var i=0;t.each(function(){++i}).on("end",function(){--i||e.apply(this,arguments)})},c.prototype.generateWait=function(){function t(n){var r=setInterval(function(){var a;e.isTabVisible()&&(a=0,i.forEach(function(s){if(s.empty())a+=1;else try{s.transition()}catch{a+=1}}),a===i.length&&(clearInterval(r),n&&n()))},50)}var e=this,i=[];return t.add=function(n){i.push(n)},t},c.prototype.parseDate=function(t){var e;return t instanceof Date?e=t:typeof t=="string"?e=this.dataTimeParse(t):typeof t!="object"&&(typeof t!="number"||isNaN(t))||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},c.prototype.isTabVisible=function(){return!document.hidden},c.prototype.getPathBox=yt,c.prototype.CLASS=l,"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,i){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=i},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=i},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=i},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=i},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=i},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=s},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,i,n,r,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=s},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,i,n,r,a,s,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=s,this._sweepFlag=o},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,i,n,r,a,s,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=s,this._sweepFlag=o},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,i,n,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,i,n,r,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,i,n,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,i,n,r,a,s){return new window.SVGPathSegArcAbs(void 0,t,e,i,n,r,a,s)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,i,n,r,a,s){return new window.SVGPathSegArcRel(void 0,t,e,i,n,r,a,s)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(t===void 0||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var i=e.pathSegList.numberOfItems-1;if(i<=0)return 0;do{if(e.pathSegList.removeItem(i),t>e.getTotalLength())break;i--}while(0<i);return i})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){var e;this._pathElement&&(e=!1,t.forEach(function(i){i.attributeName=="d"&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d"))))},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",i=!0;return t.forEach(function(n){i?(i=!1,e+=n._asPathString()):e+=" "+n._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||t.length==0)return[];function e(){this.pathSegList=[]}var i=this;e.prototype.appendSegment=function(o){this.pathSegList.push(o)};function n(o){this._string=o,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}n.prototype._isCurrentSpace=function(){var o=this._string[this._currentIndex];return o<=" "&&(o==" "||o==`
`||o=="	"||o=="\r"||o=="\f")},n.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},n.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string.charAt(this._currentIndex)!=",")&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)==","&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},n.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},n.prototype.peekSegmentType=function(){var o=this._string[this._currentIndex];return this._pathSegTypeFromChar(o)},n.prototype._pathSegTypeFromChar=function(o){switch(o){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},n.prototype._nextCommandHelper=function(o,u){return(o=="+"||o=="-"||o=="."||"0"<=o&&o<="9")&&u!=window.SVGPathSeg.PATHSEG_CLOSEPATH?u==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:u==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:u:window.SVGPathSeg.PATHSEG_UNKNOWN},n.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var o=this.peekSegmentType();return o==window.SVGPathSeg.PATHSEG_MOVETO_ABS||o==window.SVGPathSeg.PATHSEG_MOVETO_REL},n.prototype._parseNumber=function(){var o=0,u=0,d=1,h=0,g=1,_=1,p=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,g=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&this._string.charAt(this._currentIndex)!=".")){for(var x=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=x)for(var y=this._currentIndex-1,S=1;x<=y;)u+=S*(this._string.charAt(y--)-"0"),S*=10;if(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="."){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)d*=10,h+=(this._string.charAt(this._currentIndex)-"0")/d,this._currentIndex+=1}if(this._currentIndex!=p&&this._currentIndex+1<this._endIndex&&(this._string.charAt(this._currentIndex)=="e"||this._string.charAt(this._currentIndex)=="E")&&this._string.charAt(this._currentIndex+1)!="x"&&this._string.charAt(this._currentIndex+1)!="m"){if(this._currentIndex++,this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,_=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)o*=10,o+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var f=u+h;if(f*=g,o&&(f*=Math.pow(10,_*o)),p!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),f}},n.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var o=!1,u=this._string.charAt(this._currentIndex++);if(u=="0")o=!1;else{if(u!="1")return;o=!0}return this._skipOptionalSpacesOrDelimiter(),o}},n.prototype.parseSegment=function(){var o=this._string[this._currentIndex],u=this._pathSegTypeFromChar(o);if(u==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN||(u=this._nextCommandHelper(o,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=u){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(i);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(i,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(i,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(i,d.x,d.y,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(i,d.x,d.y,d.x2,d.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(i,d.x,d.y,d.x1,d.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(i,d.x,d.y,d.x1,d.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(i,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(i,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var r=new e,a=new n(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var s=a.parseSegment();if(!s)return[];r.appendSegment(s)}return r.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(e!==void 0?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(t,e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},writable:!0,configurable:!0}),(T.prototype.axis=function(){}).labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(i){e.axis.setLabelText(i,t[i])}),e.axis.updateLabels())},T.prototype.axis.max=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max};typeof t=="object"?(O(t.x)&&(i.axis_x_max=t.x),O(t.y)&&(i.axis_y_max=t.y),O(t.y2)&&(i.axis_y2_max=t.y2)):i.axis_y_max=i.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},T.prototype.axis.min=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min};typeof t=="object"?(O(t.x)&&(i.axis_x_min=t.x),O(t.y)&&(i.axis_y_min=t.y),O(t.y2)&&(i.axis_y2_min=t.y2)):i.axis_y_min=i.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},T.prototype.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};M(t.max)&&this.axis.max(t.max),M(t.min)&&this.axis.min(t.min)},T.prototype.axis.types=function(t){var e=this.internal;if(t===void 0)return{y:e.config.axis_y_type,y2:e.config.axis_y2_type};M(t.y)&&(e.config.axis_y_type=t.y),M(t.y2)&&(e.config.axis_y2_type=t.y2),e.updateScales(),e.redraw()},T.prototype.category=function(t,e){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},T.prototype.categories=function(t){var e=this.internal,i=e.config;return arguments.length&&(i.axis_x_categories=t,e.redraw()),i.axis_x_categories},T.prototype.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},T.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},T.prototype.destroy=function(){var t=this.internal;return window.clearInterval(t.intervalForObserveInserted),t.resizeTimeout!==void 0&&window.clearTimeout(t.resizeTimeout),window.removeEventListener("resize",t.resizeIfElementDisplayed),t.resizeFunction.remove(),t.unbindWindowFocus(),t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(e){t[e]=null}),null},T.prototype.color=function(t){return this.internal.color(t)},(T.prototype.data=function(t){var e=this.internal.data.targets;return t===void 0?e:e.filter(function(i){return 0<=[].concat(t).indexOf(i.id)})}).shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},T.prototype.data.values=function(t,e){e===void 0&&(e=!0);var i,n=null;return!t||(i=this.data(t))&&ot(i)&&(n=i.reduce(function(r,a){var s=a.values.map(function(o){return o.value});return e?r=r.concat(s):r.push(s),r},[])),n},T.prototype.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},T.prototype.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},T.prototype.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},T.prototype.data.stackNormalized=function(t){if(t===void 0)return this.internal.isStackNormalized();this.internal.config.data_stack_normalize=!!t,this.internal.redraw()},(T.prototype.donut=function(){}).padAngle=function(t){if(t===void 0)return this.internal.config.donut_padAngle;this.internal.config.donut_padAngle=t,this.flush()},T.prototype.flow=function(t){var e,i,n,r,a,s,o,u=this.internal,d=[],h=u.getMaxDataCount(),g=0,_=0;if(t.json)i=u.convertJsonToData(t.json,t.keys);else if(t.rows)i=u.convertRowsToData(t.rows);else{if(!t.columns)return;i=u.convertColumnsToData(t.columns)}e=u.convertDataToTargets(i,!0),u.data.targets.forEach(function(p){for(var x,y=!1,S=0;S<e.length;S++)if(p.id===e[S].id){for(y=!0,p.values[p.values.length-1]&&(_=p.values[p.values.length-1].index+1),g=e[S].values.length,x=0;x<g;x++)e[S].values[x].index=_+x,u.isTimeSeries()||(e[S].values[x].x=_+x);p.values=p.values.concat(e[S].values),e.splice(S,1);break}y||d.push(p.id)}),u.data.targets.forEach(function(p){for(var x,y=0;y<d.length;y++)if(p.id===d[y])for(_=p.values[p.values.length-1].index+1,x=0;x<g;x++)p.values.push({id:p.id,index:_+x,x:u.isTimeSeries()?u.getOtherTargetX(_+x):_+x,value:null})}),u.data.targets.length&&e.forEach(function(p){for(var x=[],y=u.data.targets[0].values[0].index;y<_;y++)x.push({id:p.id,index:y,x:u.isTimeSeries()?u.getOtherTargetX(y):y,value:null});p.values.forEach(function(S){S.index+=_,u.isTimeSeries()||(S.x+=_)}),p.values=x.concat(p.values)}),u.data.targets=u.data.targets.concat(e),u.getMaxDataCount(),a=(r=u.data.targets[0]).values[0],M(t.to)?(g=0,o=u.isTimeSeries()?u.parseDate(t.to):t.to,r.values.forEach(function(p){p.x<o&&g++})):M(t.length)&&(g=t.length),h?h===1&&u.isTimeSeries()&&(s=(r.values[r.values.length-1].x-a.x)/2,n=[new Date(a.x-s),new Date(+a.x+s)],u.updateXDomain(null,!0,!0,!1,n)):(s=u.isTimeSeries()?1<r.values.length?r.values[r.values.length-1].x-a.x:a.x-u.getXDomain(u.data.targets)[0]:1,n=[a.x-s,a.x],u.updateXDomain(null,!0,!0,!1,n)),u.updateTargets(u.data.targets),u.redraw({flow:{index:a.index,length:g,duration:O(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:h},withLegend:!0,withTransition:1<h,withTrimXDomain:!1,withUpdateXAxis:!0})},c.prototype.generateFlow=function(t){var e=this,i=e.config,n=e.d3;return function(){var r,a,s,o,u,d,h,g,_,p,x=t.targets,y=t.flow,S=t.drawBar,f=t.drawLine,G=t.drawArea,m=t.cx,v=t.cy,A=t.xv,R=t.xForText,P=t.yForText,I=t.duration,C=y.index,b=y.length,L=e.getValueOnIndex(e.data.targets[0].values,C),H=e.getValueOnIndex(e.data.targets[0].values,C+b),N=e.x.domain(),q=y.duration||I,Z=y.done||function(){},D=e.generateWait();e.flowing=!0,e.data.targets.forEach(function(W){W.values.splice(0,b)}),a=e.updateXDomain(x,!0,!0),e.updateXGrid&&e.updateXGrid(!0),s=e.xgrid||n.selectAll([]),o=e.xgridLines||n.selectAll([]),u=e.mainRegion||n.selectAll([]),d=e.mainText||n.selectAll([]),h=e.mainBar||n.selectAll([]),g=e.mainLine||n.selectAll([]),_=e.mainArea||n.selectAll([]),p=e.mainCircle||n.selectAll([]),r="translate("+(y.orgDataCount?y.orgDataCount===1||(L&&L.x)===(H&&H.x)||e.isTimeSeries()?e.x(N[0])-e.x(a[0]):e.x(L.x)-e.x(H.x):e.data.targets[0].values.length!==1?e.x(N[0])-e.x(a[0]):e.isTimeSeries()?(L=e.getValueOnIndex(e.data.targets[0].values,0),H=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),e.x(L.x)-e.x(H.x)):at(a)/2)+",0) scale("+at(N)/at(a)+",1)",e.hideXGridFocus();var X=n.transition().ease(n.easeLinear).duration(q);D.add(e.xAxis(e.axes.x,X)),D.add(h.transition(X).attr("transform",r)),D.add(g.transition(X).attr("transform",r)),D.add(_.transition(X).attr("transform",r)),D.add(p.transition(X).attr("transform",r)),D.add(d.transition(X).attr("transform",r)),D.add(u.filter(e.isRegionOnX).transition(X).attr("transform",r)),D.add(s.transition(X).attr("transform",r)),D.add(o.transition(X).attr("transform",r)),D(function(){var W,w=[],E=[];if(b){for(W=0;W<b;W++)w.push("."+l.shape+"-"+(C+W)),E.push("."+l.text+"-"+(C+W));e.svg.selectAll("."+l.shapes).selectAll(w).remove(),e.svg.selectAll("."+l.texts).selectAll(E).remove(),e.svg.select("."+l.xgrid).remove()}s.attr("transform",null).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),o.attr("transform",null),o.select("line").attr("x1",i.axis_rotated?0:A).attr("x2",i.axis_rotated?e.width:A),o.select("text").attr("x",i.axis_rotated?e.width:0).attr("y",A),h.attr("transform",null).attr("d",S),g.attr("transform",null).attr("d",f),_.attr("transform",null).attr("d",G),p.attr("transform",null).attr("cx",m).attr("cy",v),d.attr("transform",null).attr("x",R).attr("y",P).style("fill-opacity",e.opacityForText.bind(e)),u.attr("transform",null),u.filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),Z(),e.flowing=!1})}},T.prototype.focus=function(t){var e,i=this.internal;t=i.mapToTargetIds(t),e=i.svg.selectAll(i.selectorTargets(t.filter(i.isTargetToShow,i))),this.revert(),this.defocus(),e.classed(l.focused,!0).classed(l.defocused,!1),i.hasArcType()&&i.expandArc(t),i.toggleFocusLegend(t,!0),i.focusedTargetIds=t,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(n){return t.indexOf(n)<0})},T.prototype.defocus=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t.filter(e.isTargetToShow,e))).classed(l.focused,!1).classed(l.defocused,!0),e.hasArcType()&&e.unexpandArc(t),e.toggleFocusLegend(t,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(i){return t.indexOf(i)<0}),e.defocusedTargetIds=t},T.prototype.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(l.focused,!1).classed(l.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},(T.prototype.xgrids=function(t){var e=this.internal,i=e.config;return t&&(i.grid_x_lines=t,e.redrawWithoutRescale()),i.grid_x_lines}).add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},T.prototype.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},(T.prototype.ygrids=function(t){var e=this.internal,i=e.config;return t&&(i.grid_y_lines=t,e.redrawWithoutRescale()),i.grid_y_lines}).add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},T.prototype.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},T.prototype.groups=function(t){var e=this.internal,i=e.config;return j(t)||(i.data_groups=t,e.redraw()),i.data_groups},(T.prototype.legend=function(){}).show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},T.prototype.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!1})},T.prototype.load=function(t){var e=this.internal,i=e.config;t.xs&&e.addXs(t.xs),"names"in t&&T.prototype.data.names.bind(this)(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(n){i.data_classes[n]=t.classes[n]}),"categories"in t&&e.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(n){i.data_axes[n]=t.axes[n]}),"colors"in t&&Object.keys(t.colors).forEach(function(n){i.data_colors[n]=t.colors[n]}),"cacheIds"in t&&e.hasCaches(t.cacheIds)?e.load(e.getCaches(t.cacheIds),t.done):t.unload?e.unload(e.mapToTargetIds(t.unload===!0?null:t.unload),function(){e.loadFromArgs(t)}):e.loadFromArgs(t)},T.prototype.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:typeof t=="string"&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},(T.prototype.pie=function(){}).padAngle=function(t){if(t===void 0)return this.internal.config.pie_padAngle;this.internal.config.pie_padAngle=t,this.flush()},(T.prototype.regions=function(t){var e=this.internal,i=e.config;return t&&(i.regions=t,e.redrawWithoutRescale()),i.regions}).add=function(t){var e=this.internal,i=e.config;return t&&(i.regions=i.regions.concat(t),e.redrawWithoutRescale()),i.regions},T.prototype.regions.remove=function(t){var e=this.internal,i=e.config,n=k(t=t||{},"duration",i.transition_duration),r=k(t,"classes",[l.region]),a=e.main.select("."+l.regions).selectAll(r.map(function(s){return"."+s}));return(n?a.transition().duration(n):a).style("opacity",0).remove(),i.regions=i.regions.filter(function(s){var o=!1;return!s.class||(s.class.split(" ").forEach(function(u){0<=r.indexOf(u)&&(o=!0)}),!o)}),i.regions},T.prototype.selected=function(t){var e=this.internal,i=e.d3;return e.main.selectAll("."+l.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+l.shape).filter(function(){return i.select(this).classed(l.SELECTED)}).nodes().map(function(n){var r=n.__data__;return r.data?r.data:r})},T.prototype.select=function(t,e,i){var n=this.internal,r=n.d3,a=n.config;a.data_selection_enabled&&n.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(s,o){var u=r.select(this),d=s.data?s.data.id:s.id,h=n.getToggle(this,s).bind(n),g=a.data_selection_grouped||!t||0<=t.indexOf(d),_=!e||0<=e.indexOf(o),p=u.classed(l.SELECTED);u.classed(l.line)||u.classed(l.area)||(g&&_?a.data_selection_isselectable(s)&&!p&&h(!0,u.classed(l.SELECTED,!0),s,o):M(i)&&i&&p&&h(!1,u.classed(l.SELECTED,!1),s,o))})},T.prototype.unselect=function(t,e){var i=this.internal,n=i.d3,r=i.config;r.data_selection_enabled&&i.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(a,s){var o=n.select(this),u=a.data?a.data.id:a.id,d=i.getToggle(this,a).bind(i),h=r.data_selection_grouped||!t||0<=t.indexOf(u),g=!e||0<=e.indexOf(s),_=o.classed(l.SELECTED);o.classed(l.line)||o.classed(l.area)||h&&g&&r.data_selection_isselectable(a)&&_&&d(!1,o.classed(l.SELECTED,!1),a,s)})},T.prototype.show=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.removeHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("display",St()?"block":"initial","important").style("opacity",1,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",1)}),e.withLegend&&n.showLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},T.prototype.hide=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.addHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("opacity",0,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",0),i.style("display","none")}),e.withLegend&&n.hideLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},T.prototype.toggle=function(t,e){var i=this,n=this.internal;n.mapToTargetIds(t).forEach(function(r){n.isTargetToShow(r)?i.hide(r,e):i.show(r,e)})},(T.prototype.subchart=function(){}).isShown=function(){return this.internal.config.subchart_show},T.prototype.subchart.show=function(){var t=this.internal;t.config.subchart_show||(t.config.subchart_show=!0,t.initSubchart(),t.updateDimension(),t.initSubchartBrush(),t.updateTargetsForSubchart(t.getTargets()),t.mapToIds(t.data.targets).forEach(function(e){t.withoutFadeIn[e]=!1}),t.updateAndRedraw(),t.showTargets())},T.prototype.subchart.hide=function(){var t=this.internal;t.config.subchart_show&&(t.config.subchart_show=!1,t.removeSubchart(),t.redraw())},(T.prototype.tooltip=function(){}).show=function(t){var e,i,n=this.internal,r={},r=t.mouse?t.mouse:(t.data?i=t.data:t.x!==void 0&&(e=t.id?n.data.targets.filter(function(a){return a.id===t.id}):n.data.targets,i=n.filterByX(e,t.x).slice(0,1)[0]),i?n.getMousePosition(i):null);n.dispatchEvent("mousemove",r),n.config.tooltip_onshow.call(n,i)},T.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},T.prototype.transform=function(t,e){var i=this.internal,n=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;i.transformTo(e,t,n)},c.prototype.transformTo=function(t,e,i){var n=this,r=!n.hasArcType(),a=i||{withTransitionForAxis:r};a.withTransitionForTransform=!1,n.transiting=!1,n.setTargetType(t,e),n.updateTargets(n.data.targets),n.updateAndRedraw(a)},T.prototype.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},T.prototype.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},(T.prototype.zoom=function(t){var e=this.internal;return t?(e.isTimeSeries()&&(t=t.map(function(i){return e.parseDate(i)})),e.config.subchart_show?e.brush.selectionAsValue(t,!0):(e.updateXDomain(null,!0,!1,!1,t),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1})),e.config.zoom_onzoom.call(this,e.x.orgDomain()),t):e.x.domain()}).enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},T.prototype.unzoom=function(){var t=this.internal;t.config.subchart_show?t.brush.clear():(t.updateXDomain(null,!0,!1,!1,t.subX.domain()),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1}))},T.prototype.zoom.max=function(t){var e=this.internal,i=e.config,n=e.d3;if(t!==0&&!t)return i.zoom_x_max;i.zoom_x_max=n.max([e.orgXDomain[1],t])},T.prototype.zoom.min=function(t){var e=this.internal,i=e.config,n=e.d3;if(t!==0&&!t)return i.zoom_x_min;i.zoom_x_min=n.min([e.orgXDomain[0],t])},T.prototype.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};M(t.max)&&this.domain.max(t.max),M(t.min)&&this.domain.min(t.min)},c.prototype.initPie=function(){var t=this,e=t.d3;t.pie=e.pie().padAngle(this.getPadAngle.bind(this)).value(function(r){return r.values.reduce(function(a,s){return a+s.value},0)});var i,n=t.getOrderFunction();n&&(t.isOrderAsc()||t.isOrderDesc())&&(i=n,n=function(r,a){return-1*i(r,a)}),t.pie.sort(n||null)},c.prototype.updateRadius=function(){var t=this,e=t.config,i=e.gauge_width||e.donut_width,n=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=i?(t.radius-i)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=i||(n<=t.radius-t.innerRadius?t.radius-t.innerRadius:n<=t.radius?n:t.radius)},c.prototype.getPadAngle=function(){return this.hasType("pie")?this.config.pie_padAngle||0:this.hasType("donut")&&this.config.donut_padAngle||0},c.prototype.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},c.prototype.updateAngle=function(t){var e,i,n,r,a=this,s=a.config,o=!1,u=0;return s?(a.pie(a.filterTargetsToShow(a.data.targets)).forEach(function(d){o||d.data.id!==t.data.id||(o=!0,(t=d).index=u),u++}),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),a.isGaugeType(t.data)&&(e=s.gauge_min,i=s.gauge_max,n=Math.PI*(s.gauge_fullCircle?2:1)/(i-e),r=t.value<e?0:t.value<i?t.value-e:i-e,t.startAngle=s.gauge_startingAngle,t.endAngle=t.startAngle+n*r),o?t:null):null},c.prototype.getSvgArc=function(){function t(a,s){var o;return s?r(a):(o=e.updateAngle(a))?r(o):"M 0 0"}var e=this,i=e.hasType("gauge"),n=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,r=e.d3.arc().outerRadius(function(a){return i?e.radius-n*a.index:e.radius}).innerRadius(function(a){return i?e.radius-n*(a.index+1):e.innerRadius});return t.centroid=r.centroid,t},c.prototype.getSvgArcExpanded=function(t){t=t||1;var e=this,i=e.hasType("gauge"),n=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,r=Math.min(e.radiusExpanded*t-e.radius,.8*n-100*(1-t)),a=e.d3.arc().outerRadius(function(s){return i?e.radius-n*s.index+r:e.radiusExpanded*t}).innerRadius(function(s){return i?e.radius-n*(s.index+1):e.innerRadius});return function(s){var o=e.updateAngle(s);return o?a(o):"M 0 0"}},c.prototype.getArc=function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},c.prototype.transformForArcLabel=function(t){var e,i,n,r,a,s,o=this,u=o.config,d=o.updateAngle(t),h="",g=o.hasType("gauge");return d&&!g?(e=this.svgArc.centroid(d),a=isNaN(e[0])?0:e[0],s=isNaN(e[1])?0:e[1],i=Math.sqrt(a*a+s*s),h="translate("+a*(n=o.hasType("donut")&&u.donut_label_ratio?B(u.donut_label_ratio)?u.donut_label_ratio(t,o.radius,i):u.donut_label_ratio:o.hasType("pie")&&u.pie_label_ratio?B(u.pie_label_ratio)?u.pie_label_ratio(t,o.radius,i):u.pie_label_ratio:o.radius&&i?(.375<36/o.radius?1.175-36/o.radius:.8)*o.radius/i:0)+","+s*n+")"):d&&g&&1<o.filterTargetsToShow(o.data.targets).length&&(r=Math.sin(d.endAngle-Math.PI/2),h="translate("+(a=Math.cos(d.endAngle-Math.PI/2)*(o.radiusExpanded+25))+","+(s=r*(o.radiusExpanded+15-Math.abs(10*r))+3)+")"),h},c.prototype.getArcRatio=function(t){return this.getRatio("arc",t)},c.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},c.prototype.textForArcLabel=function(t){var e,i,n,r,a,s=this;return s.shouldShowArcLabel()?(i=(e=s.updateAngle(t))?e.value:null,n=s.getRatio("arc",e),r=t.data.id,s.hasType("gauge")||s.meetsArcLabelThreshold(n)?(a=s.getArcLabelFormat())?a(i,n,r):s.defaultArcValueFormat(i,n):""):""},c.prototype.textForGaugeMinMax=function(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},c.prototype.expandArc=function(t){var e,i=this;i.transiting?e=window.setInterval(function(){i.transiting||(window.clearInterval(e),0<i.legend.selectAll(".c3-legend-item-focused").size()&&i.expandArc(t))},10):(t=i.mapToTargetIds(t),i.svg.selectAll(i.selectorTargets(t,"."+l.chartArc)).each(function(n){i.shouldExpand(n.data.id)&&i.d3.select(this).selectAll("path").transition().duration(i.expandDuration(n.data.id)).attr("d",i.svgArcExpanded).transition().duration(2*i.expandDuration(n.data.id)).attr("d",i.svgArcExpandedSub).each(function(r){i.isDonutType(r.data)})}))},c.prototype.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+l.chartArc)).selectAll("path").transition().duration(function(i){return e.expandDuration(i.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+l.arc))},c.prototype.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},c.prototype.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},c.prototype.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},c.prototype.meetsArcLabelThreshold=function(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},c.prototype.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},c.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},c.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},c.prototype.updateTargetsForArc=function(t){var e=this,i=e.main,n=e.classChartArc.bind(e),r=e.classArcs.bind(e),a=e.classFocus.bind(e),s=i.select("."+l.chartArcs).selectAll("."+l.chartArc).data(e.pie(t)).attr("class",function(o){return n(o)+a(o.data)}).enter().append("g").attr("class",n);s.append("g").attr("class",r),s.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},c.prototype.initArc=function(){var t=this;t.arcs=t.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},c.prototype.redrawArc=function(t,e,i){var n,r,a,s,o=this,u=o.d3,d=o.config,h=o.main,g=o.hasType("gauge"),_=h.selectAll("."+l.arcs).selectAll("."+l.arc).data(o.arcData.bind(o)),p=_.enter().append("path").attr("class",o.classArc.bind(o)).style("fill",function(x){return o.color(x.data)}).style("cursor",function(x){return d.interaction_enabled&&d.data_selection_isselectable(x)?"pointer":null}).each(function(x){o.isGaugeType(x.data)&&(x.startAngle=x.endAngle=d.gauge_startingAngle),this._current=x}).merge(_);g&&(r=(n=h.selectAll("."+l.arcs).selectAll("."+l.arcLabelLine).data(o.arcData.bind(o))).enter().append("rect").attr("class",function(x){return l.arcLabelLine+" "+l.target+" "+l.target+"-"+x.data.id}).merge(n),o.filterTargetsToShow(o.data.targets).length===1?r.style("display","none"):r.style("fill",function(x){return o.levelColor?o.levelColor(x.data.values.reduce(function(y,S){return y+S.value},0)):o.color(x.data)}).style("display",d.gauge_labelLine_show?"":"none").each(function(x){var y,S,f,G,m,v=0,A=0,R=0,P="";o.hiddenTargetIds.indexOf(x.data.id)<0&&(y=o.updateAngle(x),S=o.gaugeArcWidth/o.filterTargetsToShow(o.data.targets).length*(y.index+1),m=(f=y.endAngle-Math.PI/2)-((G=o.radius-S)==0?0:1/G),v=o.radiusExpanded-o.radius+S,A=Math.cos(m)*G,R=Math.sin(m)*G,P="rotate("+180*f/Math.PI+", "+A+", "+R+")"),u.select(this).attr("x",A).attr("y",R).attr("width",v).attr("height",2).attr("transform",P).style("stroke-dasharray","0, "+(v+2)+", 0")})),p.attr("transform",function(x){return!o.isGaugeType(x.data)&&i?"scale(0)":""}).on("mouseover",d.interaction_enabled?function(x){var y,S;o.transiting||(y=o.updateAngle(x))&&(S=o.convertToArcData(y),o.expandArc(y.data.id),o.api.focus(y.data.id),o.toggleFocusLegend(y.data.id,!0),o.config.data_onmouseover(S,this))}:null).on("mousemove",d.interaction_enabled?function(x){var y,S=o.updateAngle(x);S&&(y=[o.convertToArcData(S)],o.showTooltip(y,this))}:null).on("mouseout",d.interaction_enabled?function(x){var y,S;o.transiting||(y=o.updateAngle(x))&&(S=o.convertToArcData(y),o.unexpandArc(y.data.id),o.api.revert(),o.revertLegend(),o.hideTooltip(),o.config.data_onmouseout(S,this))}:null).on("click",d.interaction_enabled?function(x,y){var S,f=o.updateAngle(x);f&&(S=o.convertToArcData(f),o.toggleShape&&o.toggleShape(this,S,y),o.config.data_onclick.call(o.api,S,this))}:null).each(function(){o.transiting=!0}).transition().duration(t).attrTween("d",function(x){var y,S=o.updateAngle(x);return S?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),y=u.interpolate(this._current,S),this._current=y(0),function(f){if(o.config===null)return"M 0 0";var G=y(f);return G.data=x.data,o.getArc(G,!0)}):function(){return"M 0 0"}}).attr("transform",i?"scale(1)":"").style("fill",function(x){return o.levelColor?o.levelColor(x.data.values.reduce(function(y,S){return y+S.value},0)):o.color(x.data.id)}).call(o.endall,function(){o.transiting=!1}),_.exit().transition().duration(e).style("opacity",0).remove(),h.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(x){return o.isGaugeType(x.data)?l.gaugeValue:""}).text(o.textForArcLabel.bind(o)).attr("transform",o.transformForArcLabel.bind(o)).style("font-size",function(x){return o.isGaugeType(x.data)&&o.filterTargetsToShow(o.data.targets).length===1?Math.round(o.radius/5)+"px":""}).transition().duration(t).style("opacity",function(x){return o.isTargetToShow(x.data.id)&&o.isArcType(x.data)?1:0}),h.select("."+l.chartArcsTitle).style("opacity",o.hasType("donut")||g?1:0),g&&(a=0,(s=o.arcs.select("g."+l.chartArcsBackground).selectAll("path."+l.chartArcsBackground).data(o.data.targets)).enter().append("path").attr("class",function(x,y){return l.chartArcsBackground+" "+l.chartArcsBackground+"-"+y}).merge(s).attr("d",function(x){if(0<=o.hiddenTargetIds.indexOf(x.id))return"M 0 0";var y={data:[{value:d.gauge_max}],startAngle:d.gauge_startingAngle,endAngle:-1*d.gauge_startingAngle*(d.gauge_fullCircle?Math.PI:1),index:a++};return o.getArc(y,!0,!0)}),s.exit().remove(),o.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(d.gauge_label_show?d.gauge_units:""),o.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(o.innerRadius+(o.radius-o.innerRadius)/(d.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(d.gauge_label_show?o.textForGaugeMinMax(d.gauge_min,!1):""),o.arcs.select("."+l.chartArcsGaugeMax).attr("dx",o.innerRadius+(o.radius-o.innerRadius)/(d.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(d.gauge_label_show?o.textForGaugeMinMax(d.gauge_max,!0):""))},c.prototype.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",l.chartArcsBackground),t.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},c.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},c.prototype.addToCache=function(t,e){this.cache["$"+t]=e},c.prototype.getFromCache=function(t){return this.cache["$"+t]},c.prototype.resetCache=function(){var t=this;Object.keys(this.cache).filter(function(e){return/^\$/.test(e)}).forEach(function(e){delete t.cache[e]})},c.prototype.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},c.prototype.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},c.prototype.getCaches=function(t){for(var e=[],i=0;i<t.length;i++)t[i]in this.cache&&e.push(this.cloneTarget(this.cache[t[i]]));return e},c.prototype.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},c.prototype.generateTargetClass=function(t){return t||t===0?("-"+t).replace(/\s/g,"-"):""},c.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)},c.prototype.classText=function(t){return this.generateClass(l.text,t.index)},c.prototype.classTexts=function(t){return this.generateClass(l.texts,t.id)},c.prototype.classShape=function(t){return this.generateClass(l.shape,t.index)},c.prototype.classShapes=function(t){return this.generateClass(l.shapes,t.id)},c.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(l.line,t.id)},c.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(l.lines,t.id)},c.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(l.circle,t.index)},c.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(l.circles,t.id)},c.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(l.bar,t.index)},c.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(l.bars,t.id)},c.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(l.arc,t.data.id)},c.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(l.arcs,t.data.id)},c.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(l.area,t.id)},c.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(l.areas,t.id)},c.prototype.classRegion=function(t,e){return this.generateClass(l.region,e)+" "+("class"in t?t.class:"")},c.prototype.classEvent=function(t){return this.generateClass(l.eventRect,t.index)},c.prototype.classTarget=function(t){var e=this.config.data_classes[t],i=e?" "+l.target+"-"+e:"";return this.generateClass(l.target,t)+i},c.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},c.prototype.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?l.focused:"")},c.prototype.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?l.defocused:"")},c.prototype.classChartText=function(t){return l.chartText+this.classTarget(t.id)},c.prototype.classChartLine=function(t){return l.chartLine+this.classTarget(t.id)},c.prototype.classChartBar=function(t){return l.chartBar+this.classTarget(t.id)},c.prototype.classChartArc=function(t){return l.chartArc+this.classTarget(t.data.id)},c.prototype.getTargetSelectorSuffix=function(t){var e=this.generateTargetClass(t);return window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},c.prototype.selectorTarget=function(t,e){return(e||"")+"."+l.target+this.getTargetSelectorSuffix(t)},c.prototype.selectorTargets=function(t,e){var i=this;return(t=t||[]).length?t.map(function(n){return i.selectorTarget(n,e)}):null},c.prototype.selectorLegend=function(t){return"."+l.legendItem+this.getTargetSelectorSuffix(t)},c.prototype.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(i){return e.selectorLegend(i)}):null},c.prototype.getClipPath=function(t){return"url("+(St(9)?"":document.URL.split("#")[0])+"#"+t+")"},c.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},c.prototype.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},c.prototype.getAxisClipY=function(t){return t?-20:-this.margin.top},c.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},c.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},c.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},c.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},c.prototype.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return t?this.width+2+e+i:this.margin.left+20},c.prototype.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},c.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},c.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},c.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},c.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},c.prototype.generateColor=function(){var t=this.config,e=this.d3,i=t.data_colors,n=U(t.color_pattern)?t.color_pattern:e.schemeCategory10,r=t.data_color,a=[];return function(s){var o,u=s.id||s.data&&s.data.id||s;return i[u]instanceof Function?o=i[u](s):i[u]?o=i[u]:(a.indexOf(u)<0&&a.push(u),o=n[a.indexOf(u)%n.length],i[u]=o),r instanceof Function?r(o,s):o}},c.prototype.generateLevelColor=function(){var t=this.config,e=t.color_pattern,i=t.color_threshold,n=i.unit==="value",r=i.values&&i.values.length?i.values:[],a=i.max||100;return U(i)&&U(e)?function(s){for(var o=e[e.length-1],u=0;u<r.length;u++)if((n?s:100*s/a)<r[u]){o=e[u];break}return o}:null},c.prototype.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_stack_normalize:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:"linear",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_type:"linear",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(e,i,n,r){return this.getTooltipContent?this.getTooltipContent(e,i,n,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(e){t[e]=this.additionalConfig[e]},this),t},c.prototype.additionalConfig={},c.prototype.loadConfig=function(t){var e,i,n,r=this.config;Object.keys(r).forEach(function(a){e=t,i=a.split("_"),n=function s(){var o=i.shift();return o&&e&&typeof e=="object"&&o in e?(e=e[o],s()):o?void 0:e}(),M(n)&&(r[a]=n)})},c.prototype.convertUrlToData=function(t,e,i,n,r){var a,s=this,o=e||"csv",u=o==="json"?(a=s.d3.json,s.convertJsonToData):(a=o==="tsv"?s.d3.tsv:s.d3.csv,s.convertXsvToData);a(t,i).then(function(d){r.call(s,u.call(s,d,n))}).catch(function(d){throw d})},c.prototype.convertXsvToData=function(t){var e=t.columns;return t.length===0?{keys:e,rows:[e.reduce(function(i,n){var r;return Object.assign(i,((r={})[n]=null,r))},{})]}:{keys:e,rows:[].concat(t)}},c.prototype.convertJsonToData=function(t,e){var i,n=this,r=[],a=e?(e.x?(i=e.value.concat(e.x),n.config.data_x=e.x):i=e.value,r.push(i),t.forEach(function(s){var o=[];i.forEach(function(u){var d=n.findValueInJson(s,u);j(d)&&(d=null),o.push(d)}),r.push(o)}),n.convertRowsToData(r)):(Object.keys(t).forEach(function(s){r.push([s].concat(t[s]))}),n.convertColumnsToData(r));return a},c.prototype.findValueInJson=function(t,e){if(e in t)return t[e];for(var i=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),n=0;n<i.length;++n){var r=i[n];if(!(r in t))return;t=t[r]}return t},c.prototype.convertRowsToData=function(t){for(var e=[],i=t[0],n=1;n<t.length;n++){for(var r={},a=0;a<t[n].length;a++){if(j(t[n][a]))throw new Error("Source data is missing a component at ("+n+","+a+")!");r[i[a]]=t[n][a]}e.push(r)}return{keys:i,rows:e}},c.prototype.convertColumnsToData=function(t){for(var e=[],i=[],n=0;n<t.length;n++){for(var r=t[n][0],a=1;a<t[n].length;a++){if(j(e[a-1])&&(e[a-1]={}),j(t[n][a]))throw new Error("Source data is missing a component at ("+n+","+a+")!");e[a-1][r]=t[n][a]}i.push(r)}return{keys:i,rows:e}},c.prototype.convertDataToTargets=function(t,e){var i,n,r,a,s,o=this,u=o.config;if(ot(t)?a=Object.keys(t[0]):(a=t.keys,t=t.rows),r=a.filter(o.isX,o),o.isStanfordGraphType()){if(s=a.filter(o.isEpochs,o),n=a.filter(o.isNotXAndNotEpochs,o),r.length!==1||s.length!==1||n.length!==1)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams")}else n=a.filter(o.isNotX,o);return n.forEach(function(d){var h=o.getXKey(d);o.isCustomX()||o.isTimeSeries()?0<=r.indexOf(h)?o.data.xs[d]=(e&&o.data.xs[d]?o.data.xs[d]:[]).concat(t.map(function(g){return g[h]}).filter(O).map(function(g,_){return o.generateTargetX(g,d,_)})):u.data_x?o.data.xs[d]=o.getOtherTargetXs():U(u.data_xs)&&(o.data.xs[d]=o.getXValuesOfXKey(h,o.data.targets)):o.data.xs[d]=t.map(function(g,_){return _})}),n.forEach(function(d){if(!o.data.xs[d])throw new Error('x is not defined for id = "'+d+'".')}),(i=n.map(function(d,h){var g=u.data_idConverter(d);return{id:g,id_org:d,values:t.map(function(_,p){var x,y,S=_[o.getXKey(d)],f=_[d]===null||isNaN(_[d])?null:+_[d];return o.isCustomX()&&o.isCategorized()&&!j(S)?(h===0&&p===0&&(u.axis_x_categories=[]),(x=u.axis_x_categories.indexOf(S))===-1&&(x=u.axis_x_categories.length,u.axis_x_categories.push(S))):x=o.generateTargetX(S,d,p),(j(_[d])||o.data.xs[d].length<=p)&&(x=void 0),y={x,value:f,id:g},o.isStanfordGraphType()&&(y.epochs=_[s]),y}).filter(function(_){return M(_.x)})}})).forEach(function(d){var h;u.data_xSort&&(d.values=d.values.sort(function(g,_){return(g.x||g.x===0?g.x:1/0)-(_.x||_.x===0?_.x:1/0)})),h=0,d.values.forEach(function(g){g.index=h++}),o.data.xs[d.id].sort(function(g,_){return g-_})}),o.hasNegativeValue=o.hasNegativeValueInTargets(i),o.hasPositiveValue=o.hasPositiveValueInTargets(i),u.data_type&&o.setTargetType(o.mapToIds(i).filter(function(d){return!(d in u.data_types)}),u.data_type),i.forEach(function(d){o.addCache(d.id_org,d)}),i},c.prototype.isEpochs=function(t){var e=this.config;return e.data_epochs&&t===e.data_epochs},c.prototype.isX=function(t){var e,i,n,r=this.config;return r.data_x&&t===r.data_x||U(r.data_xs)&&(e=r.data_xs,i=t,n=!1,Object.keys(e).forEach(function(a){e[a]===i&&(n=!0)}),n)},c.prototype.isNotX=function(t){return!this.isX(t)},c.prototype.isNotXAndNotEpochs=function(t){return!this.isX(t)&&!this.isEpochs(t)},c.prototype.isStackNormalized=function(){return this.config.data_stack_normalize&&0<this.config.data_groups.length},c.prototype.isAxisNormalized=function(t){var e=this;return!!e.isStackNormalized()&&e.data.targets.filter(function(i){return e.axis.getId(i.id)===t}).some(function(i){return e.isTargetNormalized(i.id)})},c.prototype.isTargetNormalized=function(t){return this.isStackNormalized()&&this.config.data_groups.some(function(e){return e.includes(t)})},c.prototype.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:U(e.data_xs)?e.data_xs[t]:null},c.prototype.getTotalPerIndex=function(t){var e=this;if(!e.isStackNormalized())return null;var i=e.getFromCache("getTotalPerIndex");if(i!==void 0)return i[t];var n={y:[],y2:[]};return e.data.targets.filter(function(r){return e.isTargetNormalized(r.id)}).filter(function(r){return e.isTargetToShow(r.id)}).forEach(function(r){var a=n[e.axis.getId(r.id)];r.values.forEach(function(s,o){a[o]||(a[o]=0),a[o]+=mt(s.value)?s.value:0})}),e.addToCache("getTotalPerIndex",n),n[t]},c.prototype.getTotalDataSum=function(){var t=this,e=t.getFromCache("getTotalDataSum");if(e!==void 0)return e;var i,n=(i=t.data.targets.filter(function(r){return t.isTargetToShow(r.id)}).map(function(r){return r.values}),(Array.isArray(i)?[].concat.apply([],i):[]).map(function(r){return r.value}).reduce(function(r,a){return r+a},0));return t.addToCache("getTotalDataSum",n),n},c.prototype.getXValuesOfXKey=function(t,e){var i,n=this;return(e&&U(e)?n.mapToIds(e):[]).forEach(function(r){n.getXKey(r)===t&&(i=n.data.xs[r])}),i},c.prototype.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&O(this.data.xs[t][e])?this.data.xs[t][e]:e},c.prototype.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},c.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},c.prototype.addXs=function(t){var e=this;Object.keys(t).forEach(function(i){e.config.data_xs[i]=t[i]})},c.prototype.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=e!==void 0?e:t.id),t},c.prototype.getValueOnIndex=function(t,e){var i=t.filter(function(n){return n.index===e});return i.length?i[0]:null},c.prototype.updateTargetX=function(t,e){var i=this;t.forEach(function(n){n.values.forEach(function(r,a){r.x=i.generateTargetX(e[a],n.id,a)}),i.data.xs[n.id]=e})},c.prototype.updateTargetXs=function(t,e){var i=this;t.forEach(function(n){e[n.id]&&i.updateTargetX([n],e[n.id])})},c.prototype.generateTargetX=function(t,e,i){var n=this,r=n.isTimeSeries()?t?n.parseDate(t):n.parseDate(n.getXValue(e,i)):n.isCustomX()&&!n.isCategorized()?O(t)?+t:n.getXValue(e,i):i;return r},c.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},c.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},c.prototype.mapToIds=function(t){return t.map(function(e){return e.id})},c.prototype.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},c.prototype.hasTarget=function(t,e){for(var i=this.mapToIds(t),n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},c.prototype.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},c.prototype.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},c.prototype.getTargetsToShow=function(){return this.filterTargetsToShow(this.data.targets)},c.prototype.filterTargetsToShow=function(t){var e=this;return t.filter(function(i){return e.isTargetToShow(i.id)})},c.prototype.getTargets=function(){return this.data.targets},c.prototype.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map(function(i){return i.values.map(function(n){return+n.x})}))).values();return(e=this.isTimeSeries()?e.map(function(i){return new Date(+i)}):e.map(function(i){return+i})).sort(function(i,n){return i<n?-1:n<i?1:n<=i?0:NaN})},c.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]));this.resetCache()},c.prototype.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0}),this.resetCache()},c.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},c.prototype.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},c.prototype.getValuesAsIdKeyed=function(t){var e={};return t.forEach(function(i){e[i.id]=[],i.values.forEach(function(n){e[i.id].push(n.value)})}),e},c.prototype.checkValueInTargets=function(t,e){for(var i,n,r=Object.keys(t),a=0;a<r.length;a++)for(n=t[r[a]].values,i=0;i<n.length;i++)if(e(n[i].value))return!0;return!1},c.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(e){return e<0})},c.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(e){return 0<e})},c.prototype.isOrderDesc=function(){var t=this.config;return typeof t.data_order=="string"&&t.data_order.toLowerCase()==="desc"},c.prototype.isOrderAsc=function(){var t=this.config;return typeof t.data_order=="string"&&t.data_order.toLowerCase()==="asc"},c.prototype.getOrderFunction=function(){var t=this.config,e=this.isOrderAsc(),i=this.isOrderDesc();if(e||i){var n=function(a,s){return a+Math.abs(s.value)};return function(a,s){var o=a.values.reduce(n,0),u=s.values.reduce(n,0);return e?u-o:o-u}}if(B(t.data_order))return t.data_order;if(ot(t.data_order)){var r=t.data_order;return function(a,s){return r.indexOf(a.id)-r.indexOf(s.id)}}},c.prototype.orderTargets=function(t){var e=this.getOrderFunction();return e&&t.sort(e),t},c.prototype.filterByIndex=function(t,e){return this.d3.merge(t.map(function(i){return i.values.filter(function(n){return n.index===e})}))},c.prototype.filterByX=function(t,e){return this.d3.merge(t.map(function(i){return i.values})).filter(function(i){return i.x-e==0})},c.prototype.filterRemoveNull=function(t){return t.filter(function(e){return O(e.value)})},c.prototype.filterByXDomain=function(t,e){return t.map(function(i){return{id:i.id,id_org:i.id_org,values:i.values.filter(function(n){return e[0]<=n.x&&n.x<=e[1]})}})},c.prototype.hasDataLabel=function(){var t=this.config;return!(typeof t.data_labels!="boolean"||!t.data_labels)||!(typeof t.data_labels!="object"||!U(t.data_labels))},c.prototype.getDataLabelLength=function(t,e,i){var n=this,r=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(a){return n.dataLabelFormat(a.id)(a)}).each(function(a,s){r[s]=1.3*K(this)[i]}).remove(),r},c.prototype.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},c.prototype.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},c.prototype.findClosestFromTargets=function(t,e){var i=this,n=t.map(function(r){return i.findClosest(r.values,e,i.config.tooltip_horizontal?i.horizontalDistance.bind(i):i.dist.bind(i),i.config.point_sensitivity)}).filter(function(r){return r});return n.length===0?void 0:n.length===1?n[0]:i.findClosest(n,e,i.dist.bind(i))},c.prototype.findClosestFromTargetsByX=function(t,e){var i,n;return t.forEach(function(r){r.values.forEach(function(a){var s=Math.abs(e-a.x);(n===void 0||s<n)&&(i=a,n=s)})}),i},c.prototype.findClosest=function(t,e,i,n){n===void 0&&(n=1/0);var r,a=this;return t.filter(function(s){return s&&a.isBarType(s.id)}).forEach(function(s){var o;r||(o=a.main.select("."+l.bars+a.getTargetSelectorSuffix(s.id)+" ."+l.bar+"-"+s.index).node(),a.isWithinBar(e,o)&&(r=s))}),t.filter(function(s){return s&&!a.isBarType(s.id)}).forEach(function(s){var o=i(s,e);o<n&&(n=o,r=s)}),r},c.prototype.dist=function(t,e){var i=this.config,n=i.axis_rotated?1:0,r=i.axis_rotated?0:1,a=this.circleY(t,t.index),s=this.x(t.x);return Math.sqrt(Math.pow(s-e[n],2)+Math.pow(a-e[r],2))},c.prototype.horizontalDistance=function(t,e){var i=this.config.axis_rotated?1:0,n=this.x(t.x);return Math.abs(n-e[i])},c.prototype.convertValuesToStep=function(t){var e,i=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)i[e]=i[e-1];return i[0]={x:i[0].x-1,value:i[0].value,id:i[0].id},i[t.length+1]={x:i[t.length].x+1,value:i[t.length].value,id:i[t.length].id},i},c.prototype.getRatio=function(t,e,i){i===void 0&&(i=!1);var n,r=this,a=r.api,s=0;return e&&a.data.shown.call(a).length&&(s=e.ratio||e.value,t==="arc"?s=r.hasType("gauge")?(e.endAngle-e.startAngle)/(Math.PI*(r.config.gauge_fullCircle?2:1)):(n=r.getTotalDataSum(),e.value/n):t==="index"&&(n=r.getTotalPerIndex(r.axis.getId(e.id)),e.ratio=mt(e.value)&&n&&0<n[e.index]?e.value/n[e.index]:0,s=e.ratio)),i&&s?100*s:s},c.prototype.updateDataAttributes=function(t,e){var i=this.config["data_"+t];return e===void 0||(Object.keys(e).forEach(function(n){i[n]=e[n]}),this.redraw({withLegend:!0})),i},c.prototype.load=function(t,e){var i=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach(function(n){var r=e.types&&e.types[n.id]?e.types[n.id]:e.type;i.setTargetType(n.id,r)}),i.data.targets.forEach(function(n){for(var r=0;r<t.length;r++)if(n.id===t[r].id){n.values=t[r].values,t.splice(r,1);break}}),i.data.targets=i.data.targets.concat(t)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},c.prototype.loadFromArgs=function(t){var e=this;e.resetCache(),t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,function(i){e.load(e.convertDataToTargets(i),t)}):t.json?e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t):t.rows?e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t):t.columns?e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t):e.load(null,t)},c.prototype.unload=function(t,e){var i=this;i.resetCache(),e=e||function(){},(t=t.filter(function(n){return i.hasTarget(i.data.targets,n)}))&&t.length!==0?(i.svg.selectAll(t.map(function(n){return i.selectorTarget(n)})).transition().style("opacity",0).remove().call(i.endall,e),t.forEach(function(n){i.withoutFadeIn[n]=!1,i.legend&&i.legend.selectAll("."+l.legendItem+i.getTargetSelectorSuffix(n)).remove(),i.data.targets=i.data.targets.filter(function(r){return r.id!==n})})):e()},c.prototype.getYDomainMin=function(t){var e,i,n,r,a,s,o=this,u=o.config,d=o.mapToIds(t),h=o.getValuesAsIdKeyed(t);if(0<u.data_groups.length){for(s=o.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if((r=u.data_groups[e].filter(function(g){return 0<=d.indexOf(g)})).length!==0)for(n=r[0],s&&h[n]&&h[n].forEach(function(g,_){h[n][_]=g<0?g:0}),i=1;i<r.length;i++)a=r[i],h[a]&&h[a].forEach(function(g,_){o.axis.getId(a)!==o.axis.getId(n)||!h[n]||s&&0<+g||(h[n][_]+=+g)})}return o.d3.min(Object.keys(h).map(function(g){return o.d3.min(h[g])}))},c.prototype.getYDomainMax=function(t){var e,i,n,r,a,s,o=this,u=o.config,d=o.mapToIds(t),h=o.getValuesAsIdKeyed(t);if(0<u.data_groups.length){for(s=o.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if((r=u.data_groups[e].filter(function(g){return 0<=d.indexOf(g)})).length!==0)for(n=r[0],s&&h[n]&&h[n].forEach(function(g,_){h[n][_]=0<g?g:0}),i=1;i<r.length;i++)a=r[i],h[a]&&h[a].forEach(function(g,_){o.axis.getId(a)!==o.axis.getId(n)||!h[n]||s&&+g<0||(h[n][_]+=+g)})}return o.d3.max(Object.keys(h).map(function(g){return o.d3.max(h[g])}))},c.prototype.getYDomain=function(t,e,i){var n=this,r=n.config;if(n.isAxisNormalized(e))return[0,100];var a,s,o,u,d,h,g,_,p,x,y,S=t.filter(function(L){return n.axis.getId(L.id)===e}),f=i?n.filterByXDomain(S,i):S,G=e==="y2"?r.axis_y2_min:r.axis_y_min,m=e==="y2"?r.axis_y2_max:r.axis_y_max,C=n.getYDomainMin(f),b=n.getYDomainMax(f),v=e==="y2"?r.axis_y2_center:r.axis_y_center,A=n.hasType("bar",f)&&r.bar_zerobased||n.hasType("area",f)&&r.area_zerobased,R=e==="y2"?r.axis_y2_inverted:r.axis_y_inverted,P=n.hasDataLabel()&&r.axis_rotated,I=n.hasDataLabel()&&!r.axis_rotated,C=O(G)?G:!O(m)||C<m?C:m-10,b=O(m)?m:!O(G)||G<b?b:G+10;return f.length===0?e==="y2"?n.y2.domain():n.y.domain():(isNaN(C)&&(C=0),isNaN(b)&&(b=C),C===b&&(C<0?b=0:C=0),p=0<=C&&0<=b,x=C<=0&&b<=0,(O(G)&&p||O(m)&&x)&&(A=!1),A&&(p&&(C=0),x&&(b=0)),o=u=.1*(s=Math.abs(b-C)),v!==void 0&&(b=v+(d=Math.max(Math.abs(C),Math.abs(b))),C=v-d),P?(h=n.getDataLabelLength(C,b,"width"),g=at(n.y.range()),o+=s*((_=[h[0]/g,h[1]/g])[1]/(1-_[0]-_[1])),u+=s*(_[0]/(1-_[0]-_[1]))):I&&(h=n.getDataLabelLength(C,b,"height"),o+=(y=n.getY(r["axis_"+e+"_type"],[0,r.axis_rotated?n.width:n.height],[0,s]))(h[1]),u+=y(h[0])),e==="y"&&U(r.axis_y_padding)&&(o=n.axis.getPadding(r.axis_y_padding,"top",o,s),u=n.axis.getPadding(r.axis_y_padding,"bottom",u,s)),e==="y2"&&U(r.axis_y2_padding)&&(o=n.axis.getPadding(r.axis_y2_padding,"top",o,s),u=n.axis.getPadding(r.axis_y2_padding,"bottom",u,s)),A&&(p&&(u=C),x&&(o=-b)),a=[C-u,b+o],R?a.reverse():a)},c.prototype.getXDomainMin=function(t){var e=this,i=e.config;return M(i.axis_x_min)?e.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:e.d3.min(t,function(n){return e.d3.min(n.values,function(r){return r.x})})},c.prototype.getXDomainMax=function(t){var e=this,i=e.config;return M(i.axis_x_max)?e.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:e.d3.max(t,function(n){return e.d3.max(n.values,function(r){return r.x})})},c.prototype.getXDomainPadding=function(t){var e,i,n,r=this.config,a=t[1]-t[0],s=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?a/(e-1)/2:.5:.01*a;return typeof r.axis_x_padding=="object"&&U(r.axis_x_padding)?(i=O(r.axis_x_padding.left)?r.axis_x_padding.left:s,n=O(r.axis_x_padding.right)?r.axis_x_padding.right:s):i=n=typeof r.axis_x_padding=="number"?r.axis_x_padding:s,{left:i,right:n}},c.prototype.getXDomain=function(t){var e=this,i=[e.getXDomainMin(t),e.getXDomainMax(t)],n=i[0],r=i[1],a=e.getXDomainPadding(i),s=0,o=0;return n-r!=0||e.isCategorized()||(r=e.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*r.getTime())):(n=n===0?1:.5*n,r===0?-1:1.5*r)),!n&&n!==0||(s=e.isTimeSeries()?new Date(n.getTime()-a.left):n-a.left),!r&&r!==0||(o=e.isTimeSeries()?new Date(r.getTime()+a.right):r+a.right),[s,o]},c.prototype.updateXDomain=function(t,e,i,n,r){var a=this,s=a.config;return i&&(a.x.domain(r||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),s.zoom_enabled&&a.zoom.update(),a.subX.domain(a.x.domain()),a.brush&&a.brush.updateScale(a.subX)),e&&a.x.domain(r||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.selectionAsValue())),n&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},c.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=t[0]-(t[1]-n),t[1]=n),t},c.prototype.drag=function(t){var e,i,n,r,a,s,o,u,d=this,h=d.config,g=d.main,_=d.d3;d.hasArcType()||h.data_selection_enabled&&h.data_selection_multiple&&(e=d.dragStart[0],i=d.dragStart[1],n=t[0],r=t[1],a=Math.min(e,n),s=Math.max(e,n),o=h.data_selection_grouped?d.margin.top:Math.min(i,r),u=h.data_selection_grouped?d.height:Math.max(i,r),g.select("."+l.dragarea).attr("x",a).attr("y",o).attr("width",s-a).attr("height",u-o),g.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(p,x){if(h.data_selection_isselectable(p)){var y,S,f,G,m,v,A=_.select(this),R=A.classed(l.SELECTED),P=A.classed(l.INCLUDED),I=!1;if(A.classed(l.circle))y=+A.attr("cx"),S=+A.attr("cy"),m=d.togglePoint,I=a<y&&y<s&&o<S&&S<u;else{if(!A.classed(l.bar))return;y=(v=yt(this)).x,S=v.y,f=v.width,G=v.height,m=d.togglePath,I=!(s<y||y+f<a||u<S||S+G<o)}I^P&&(A.classed(l.INCLUDED,!P),A.classed(l.SELECTED,!R),m.call(d,!R,A,p,x))}}))},c.prototype.dragstart=function(t){var e=this,i=e.config;e.hasArcType()||i.data_selection_enabled&&(e.dragStart=t,e.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),e.dragging=!0)},c.prototype.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),t.dragging=!1)},c.prototype.getYFormat=function(t){var e=this,i=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(r,a,s){return(e.axis.getId(s)==="y2"?n:i).call(e,r,a)}},c.prototype.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},c.prototype.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},c.prototype.defaultValueFormat=function(t){return O(t)?+t:""},c.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},c.prototype.dataLabelFormat=function(t){function e(r){return O(r)?+r:""}var i=this.config.data_labels,n=typeof i.format=="function"?i.format:typeof i.format=="object"?i.format[t]?i.format[t]===!0?e:i.format[t]:function(){return""}:e;return n},c.prototype.initGrid=function(){var t=this,e=t.config,i=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",l.grid),e.grid_x_show&&t.grid.append("g").attr("class",l.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",l.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),t.xgrid=i.selectAll([]),e.grid_lines_front||t.initGridLines()},c.prototype.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",l.grid+" "+l.gridLines),t.gridLines.append("g").attr("class",l.xgridLines),t.gridLines.append("g").attr("class",l.ygridLines),t.xgridLines=e.selectAll([])},c.prototype.updateXGrid=function(t){var e=this,i=e.config,n=e.d3,r=e.generateGridData(i.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=i.axis_rotated?{x1:0,x2:e.width,y1:function(u){return e.x(u)-a},y2:function(u){return e.x(u)-a}}:{x1:function(u){return e.x(u)+a},x2:function(u){return e.x(u)+a},y1:0,y2:e.height},e.xgridAttr.opacity=function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?e.height:0)?0:1};var s=e.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(r),o=s.enter().append("line").attr("class",l.xgrid).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",0);e.xgrid=o.merge(s),t||e.xgrid.attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),s.exit().remove()},c.prototype.updateYGrid=function(){var t=this,e=t.config,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),n=t.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(i),r=n.enter().append("line").attr("class",l.ygrid);t.ygrid=r.merge(n),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),n.exit().remove(),t.smoothLines(t.ygrid,"grid")},c.prototype.gridTextAnchor=function(t){return t.position?t.position:"end"},c.prototype.gridTextDx=function(t){return t.position==="start"?4:t.position==="middle"?0:-4},c.prototype.xGridTextX=function(t){return t.position==="start"?-this.height:t.position==="middle"?-this.height/2:0},c.prototype.yGridTextX=function(t){return t.position==="start"?0:t.position==="middle"?this.width/2:this.width},c.prototype.updateGrid=function(t){var e,i,n,r,a=this,s=a.main,o=a.config,u=a.xv.bind(a),d=a.yv.bind(a),h=a.xGridTextX.bind(a),g=a.yGridTextX.bind(a);a.grid.style("visibility",a.hasArcType()?"hidden":"visible"),s.select("line."+l.xgridFocus).style("visibility","hidden"),o.grid_x_show&&a.updateXGrid(),(i=(e=s.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(o.grid_x_lines)).enter().append("g").attr("class",function(_){return l.xgridLine+(_.class?" "+_.class:"")})).append("line").attr("x1",o.axis_rotated?0:u).attr("x2",o.axis_rotated?a.width:u).attr("y1",o.axis_rotated?u:0).attr("y2",o.axis_rotated?u:a.height).style("opacity",0),i.append("text").attr("text-anchor",a.gridTextAnchor).attr("transform",o.axis_rotated?"":"rotate(-90)").attr("x",o.axis_rotated?g:h).attr("y",u).attr("dx",a.gridTextDx).attr("dy",-5).style("opacity",0),a.xgridLines=i.merge(e),e.exit().transition().duration(t).style("opacity",0).remove(),o.grid_y_show&&a.updateYGrid(),(r=(n=s.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(o.grid_y_lines)).enter().append("g").attr("class",function(_){return l.ygridLine+(_.class?" "+_.class:"")})).append("line").attr("x1",o.axis_rotated?d:0).attr("x2",o.axis_rotated?d:a.width).attr("y1",o.axis_rotated?0:d).attr("y2",o.axis_rotated?a.height:d).style("opacity",0),r.append("text").attr("text-anchor",a.gridTextAnchor).attr("transform",o.axis_rotated?"rotate(-90)":"").attr("x",o.axis_rotated?h:g).attr("y",d).attr("dx",a.gridTextDx).attr("dy",-5).style("opacity",0),a.ygridLines=r.merge(n),a.ygridLines.select("line").transition().duration(t).attr("x1",o.axis_rotated?d:0).attr("x2",o.axis_rotated?d:a.width).attr("y1",o.axis_rotated?0:d).attr("y2",o.axis_rotated?a.height:d).style("opacity",1),a.ygridLines.select("text").transition().duration(t).attr("x",o.axis_rotated?a.xGridTextX.bind(a):a.yGridTextX.bind(a)).attr("y",d).text(function(_){return _.text}).style("opacity",1),n.exit().transition().duration(t).style("opacity",0).remove()},c.prototype.redrawGrid=function(t,e){var i=this,n=i.config,r=i.xv.bind(i),a=i.xgridLines.select("line"),s=i.xgridLines.select("text");return[(t?a.transition(e):a).attr("x1",n.axis_rotated?0:r).attr("x2",n.axis_rotated?i.width:r).attr("y1",n.axis_rotated?r:0).attr("y2",n.axis_rotated?r:i.height).style("opacity",1),(t?s.transition(e):s).attr("x",n.axis_rotated?i.yGridTextX.bind(i):i.xGridTextX.bind(i)).attr("y",r).text(function(o){return o.text}).style("opacity",1)]},c.prototype.showXGridFocus=function(t){var e=this,i=e.config,n=t.filter(function(s){return s&&O(s.value)}),r=e.main.selectAll("line."+l.xgridFocus),a=e.xx.bind(e);i.tooltip_show&&(e.hasType("stanford")||e.hasArcType()||(r.style("visibility","visible").data([n[0]]).attr(i.axis_rotated?"y1":"x1",a).attr(i.axis_rotated?"y2":"x2",a),e.smoothLines(r,"grid")))},c.prototype.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},c.prototype.updateXgridFocus=function(){var t=this.config;this.main.select("line."+l.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},c.prototype.generateGridData=function(t,e){var i,n,r,a,s=[],o=this.main.select("."+l.axisX).selectAll(".tick").size();if(t==="year")for(n=(i=this.getXDomain())[0].getFullYear(),r=i[1].getFullYear(),a=n;a<=r;a++)s.push(new Date(a+"-01-01 00:00:00"));else(s=e.ticks(10)).length>o&&(s=s.filter(function(u){return(""+u).indexOf(".")<0}));return s},c.prototype.getGridFilterToRemove=function(t){return t?function(e){var i=!1;return[].concat(t).forEach(function(n){("value"in n&&e.value===n.value||"class"in n&&e.class===n.class)&&(i=!0)}),i}:function(){return!0}},c.prototype.removeGridLines=function(t,e){function i(o){return!r(o)}var n=this.config,r=this.getGridFilterToRemove(t),a=e?l.xgridLines:l.ygridLines,s=e?l.xgridLine:l.ygridLine;this.main.select("."+a).selectAll("."+s).filter(r).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(i):n.grid_y_lines=n.grid_y_lines.filter(i)},c.prototype.initEventRect=function(){var t=this,e=t.config;t.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0),t.eventRect=t.main.select("."+l.eventRects).append("rect").attr("class",l.eventRect),e.zoom_enabled&&t.zoom&&(t.eventRect.call(t.zoom).on("dblclick.zoom",null),e.zoom_initialRange&&t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(e.zoom_initialRange)))},c.prototype.redrawEventRect=function(){var t=this,e=t.d3,i=t.config;function n(){t.svg.select("."+l.eventRect).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars()}function r(s,o){return o&&(t.isBarType(o.id)||t.dist(o,s)<i.point_sensitivity)}function a(s){return s?t.addName(Object.assign({},s)):null}t.main.select("."+l.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null),t.eventRect.attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).on("mouseout",i.interaction_enabled?function(){i&&(t.hasArcType()||(t.mouseover&&(i.data_onmouseout.call(t.api,t.mouseover),t.mouseover=void 0),n()))}:null).on("mousemove",i.interaction_enabled?function(){if(!t.dragging){var s=t.getTargetsToShow();if(!t.hasArcType(s)){var o,u,d,h=e.mouse(this),g=a(t.findClosestFromTargets(s,h)),_=r(h,g);if(!t.mouseover||g&&g.id===t.mouseover.id&&g.index===t.mouseover.index||(i.data_onmouseout.call(t.api,t.mouseover),t.mouseover=void 0),g&&!t.mouseover&&(i.data_onmouseover.call(t.api,g),t.mouseover=g),t.svg.select("."+l.eventRect).style("cursor",_?"pointer":null),!i.tooltip_grouped||t.hasType("stanford",s)?g&&(o=[g]):(d=void 0,(d=g||(u=i.axis_rotated?h[1]:h[0],t.findClosestFromTargetsByX(s,t.x.invert(u))))&&(o=t.filterByX(s,d.x))),!o||o.length===0)return n();o=o.map(a),t.showTooltip(o,this),i.point_focus_expand_enabled&&(t.unexpandCircles(),o.forEach(function(p){t.expandCircles(p.index,p.id,!1)})),t.unexpandBars(),o.forEach(function(p){t.expandBars(p.index,p.id,!1)}),t.showXGridFocus(o)}}}:null).on("click",i.interaction_enabled?function(){var s,o,u,d=t.getTargetsToShow();t.hasArcType(d)||(s=e.mouse(this),o=a(t.findClosestFromTargets(d,s)),r(s,o)&&((!i.data_selection_grouped||t.isStanfordType(o)?[o]:t.filterByX(d,o.x)).forEach(function(h){t.main.selectAll("."+l.shapes+t.getTargetSelectorSuffix(h.id)).selectAll("."+l.shape+"-"+h.index).each(function(){(i.data_selection_grouped||t.isWithinShape(this,h))&&t.toggleShape(this,h,h.index)})}),o&&(u=t.main.selectAll("."+l.shapes+t.getTargetSelectorSuffix(o.id)).select("."+l.shape+"-"+o.index),i.data_onclick.call(t.api,o,u.node()))))}:null).call(i.interaction_enabled&&i.data_selection_draggable&&t.drag?e.drag().on("drag",function(){t.drag(e.mouse(this))}).on("start",function(){t.dragstart(e.mouse(this))}).on("end",function(){t.dragend()}):function(){})},c.prototype.getMousePosition=function(t){return[this.x(t.x),this.getYScale(t.id)(t.value)]},c.prototype.dispatchEvent=function(t,e){var i="."+l.eventRect,n=this.main.select(i).node(),r=n.getBoundingClientRect(),a=r.left+(e?e[0]:0),s=r.top+(e?e[1]:0),o=document.createEvent("MouseEvents");o.initMouseEvent(t,!0,!0,window,0,a,s,a,s,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},c.prototype.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},c.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},c.prototype.updateSizeForLegend=function(t,e){var i=this,n=i.config,r={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-t-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-e-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?r.top:i.currentHeight-t,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-e:i.isLegendInset?r.left:0}},c.prototype.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},c.prototype.updateLegendStep=function(t){this.legendStep=t},c.prototype.updateLegendItemWidth=function(t){this.legendItemWidth=t},c.prototype.updateLegendItemHeight=function(t){this.legendItemHeight=t},c.prototype.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},c.prototype.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},c.prototype.opacityForLegend=function(t){return t.classed(l.legendItemHidden)?null:1},c.prototype.opacityForUnfocusedLegend=function(t){return t.classed(l.legendItemHidden)?null:.3},c.prototype.toggleFocusLegend=function(t,e){var i=this;t=i.mapToTargetIds(t),i.legend.selectAll("."+l.legendItem).filter(function(n){return 0<=t.indexOf(n)}).classed(l.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,i.d3.select(this))})},c.prototype.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},c.prototype.showLegend=function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},c.prototype.hideLegend=function(t){var e=this,i=e.config;i.legend_show&&gt(t)&&(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},c.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},c.prototype.updateLegend=function(t,e,i){var n,r,a,s,o,u,d,h,g,_,p,x,y,S,f,G,m=this,v=m.config,A=4,R=10,P=0,I=0,C=10,b=v.legend_item_tile_width+5,L=0,H={},N={},q={},Z=[0],D={},X=0;function W(w,E,it){var nt,st,Y,Q,ct=it===0,$=it===t.length-1,tt=(Y=w,Q=E,m.legendItemTextBox[Q]||(m.legendItemTextBox[Q]=m.getTextRect(Y.textContent,l.legendItem,Y)),m.legendItemTextBox[Q]),dt=tt.width+b+(!$||m.isLegendRight||m.isLegendInset?R:0)+v.legend_padding,ut=tt.height+A,ft=m.isLegendRight||m.isLegendInset?ut:dt,_t=m.isLegendRight||m.isLegendInset?m.getLegendHeight():m.getLegendWidth();function xt(J,Lt){Lt||(nt=(_t-L-ft)/2)<C&&(nt=(_t-ft)/2,L=0,X++),D[J]=X,Z[X]=m.isLegendInset?10:nt,H[J]=L,L+=ft}ct&&(I=P=X=L=0),!v.legend_show||m.isLegendToShow(E)?(N[E]=dt,q[E]=ut,(!P||P<=dt)&&(P=dt),(!I||I<=ut)&&(I=ut),st=m.isLegendRight||m.isLegendInset?I:P,v.legend_equally?(Object.keys(N).forEach(function(J){N[J]=P}),Object.keys(q).forEach(function(J){q[J]=I}),(nt=(_t-st*t.length)/2)<C?(X=L=0,t.forEach(function(J){xt(J)})):xt(E,!0)):xt(E)):N[E]=q[E]=D[E]=H[E]=0}t=t.filter(function(w){return!M(v.data_names[w])||v.data_names[w]!==null}),p=k(e=e||{},"withTransition",!0),x=k(e,"withTransitionForTransform",!0),m.isLegendInset&&(X=v.legend_inset_step?v.legend_inset_step:t.length,m.updateLegendStep(X)),s=m.isLegendRight?(n=function(w){return P*D[w]},function(w){return Z[D[w]]+H[w]}):m.isLegendInset?(n=function(w){return P*D[w]+10},function(w){return Z[D[w]]+H[w]}):(n=function(w){return Z[D[w]]+H[w]},function(w){return I*D[w]}),r=function(w,E){return n(w,E)+4+v.legend_item_tile_width},o=function(w,E){return s(w,E)+9},a=function(w,E){return n(w,E)},u=function(w,E){return s(w,E)-5},d=function(w,E){return n(w,E)-2},h=function(w,E){return n(w,E)-2+v.legend_item_tile_width},g=function(w,E){return s(w,E)+4},(_=m.legend.selectAll("."+l.legendItem).data(t).enter().append("g").attr("class",function(w){return m.generateClass(l.legendItem,w)}).style("visibility",function(w){return m.isLegendToShow(w)?"visible":"hidden"}).style("cursor",function(){return v.interaction_enabled?"pointer":"auto"}).on("click",v.interaction_enabled?function(w){v.legend_item_onclick?v.legend_item_onclick.call(m,w):m.d3.event.altKey?(m.api.hide(),m.api.show(w)):(m.api.toggle(w),m.isTargetToShow(w)?m.api.focus(w):m.api.revert())}:null).on("mouseover",v.interaction_enabled?function(w){v.legend_item_onmouseover?v.legend_item_onmouseover.call(m,w):(m.d3.select(this).classed(l.legendItemFocused,!0),!m.transiting&&m.isTargetToShow(w)&&m.api.focus(w))}:null).on("mouseout",v.interaction_enabled?function(w){v.legend_item_onmouseout?v.legend_item_onmouseout.call(m,w):(m.d3.select(this).classed(l.legendItemFocused,!1),m.api.revert())}:null)).append("text").text(function(w){return M(v.data_names[w])?v.data_names[w]:w}).each(function(w,E){W(this,w,E)}).style("pointer-events","none").attr("x",m.isLegendRight||m.isLegendInset?r:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:o),_.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",m.isLegendRight||m.isLegendInset?a:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:u),_.append("line").attr("class",l.legendItemTile).style("stroke",m.color).style("pointer-events","none").attr("x1",m.isLegendRight||m.isLegendInset?d:-200).attr("y1",m.isLegendRight||m.isLegendInset?-200:g).attr("x2",m.isLegendRight||m.isLegendInset?h:-200).attr("y2",m.isLegendRight||m.isLegendInset?-200:g).attr("stroke-width",v.legend_item_tile_height),G=m.legend.select("."+l.legendBackground+" rect"),m.isLegendInset&&0<P&&G.size()===0&&(G=m.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),y=m.legend.selectAll("text").data(t).text(function(w){return M(v.data_names[w])?v.data_names[w]:w}).each(function(w,E){W(this,w,E)}),(p?y.transition():y).attr("x",r).attr("y",o),S=m.legend.selectAll("rect."+l.legendItemEvent).data(t),(p?S.transition():S).attr("width",function(w){return N[w]}).attr("height",function(w){return q[w]}).attr("x",a).attr("y",u),f=m.legend.selectAll("line."+l.legendItemTile).data(t),(p?f.transition():f).style("stroke",m.levelColor?function(w){return m.levelColor(m.cache[w].values.reduce(function(E,it){return E+it.value},0))}:m.color).attr("x1",d).attr("y1",g).attr("x2",h).attr("y2",g),G&&(p?G.transition():G).attr("height",m.getLegendHeight()-12).attr("width",P*(X+1)+10),m.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(w){return!m.isTargetToShow(w)}),m.updateLegendItemWidth(P),m.updateLegendItemHeight(I),m.updateLegendStep(X),m.updateSizes(),m.updateScales(),m.updateSvgSize(),m.transformAll(x,i),m.legendHasRendered=!0},c.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",l.regions)},c.prototype.updateRegion=function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible");var n=e.main.select("."+l.regions).selectAll("."+l.region).data(i.regions),r=n.enter().append("g");r.append("rect").attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",function(a){return O(a.opacity)?a.opacity:.1}),r.append("text").text(e.labelRegion.bind(e)),e.mainRegion=r.merge(n).attr("class",e.classRegion.bind(e)),n.exit().transition().duration(t).style("opacity",0).remove()},c.prototype.redrawRegion=function(t,e){var i=this,n=i.mainRegion,r=i.mainRegion.selectAll("text");return[(t?n.transition(e):n).attr("x",i.regionX.bind(i)).attr("y",i.regionY.bind(i)).attr("width",i.regionWidth.bind(i)).attr("height",i.regionHeight.bind(i)).style("fill-opacity",function(a){return O(a.opacity)?a.opacity:.1}),(t?r.transition(e):r).attr("x",i.labelOffsetX.bind(i)).attr("y",i.labelOffsetY.bind(i)).attr("transform",i.labelTransform.bind(i)).attr("style","text-anchor: left;")]},c.prototype.regionX=function(t){var e=this,i=e.config,n=t.axis==="y"?e.y:e.y2,r=t.axis==="y"||t.axis==="y2"?i.axis_rotated&&"start"in t?n(t.start):0:!i.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0;return r},c.prototype.regionY=function(t){var e=this,i=e.config,n=t.axis==="y"?e.y:e.y2,r=t.axis==="y"||t.axis==="y2"?!i.axis_rotated&&"end"in t?n(t.end):0:i.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0;return r},c.prototype.regionWidth=function(t){var e=this,i=e.config,n=e.regionX(t),r=t.axis==="y"?e.y:e.y2,a=t.axis==="y"||t.axis==="y2"?i.axis_rotated&&"end"in t?r(t.end):e.width:!i.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.width;return a<n?0:a-n},c.prototype.regionHeight=function(t){var e=this,i=e.config,n=this.regionY(t),r=t.axis==="y"?e.y:e.y2,a=t.axis==="y"||t.axis==="y2"?!i.axis_rotated&&"start"in t?r(t.start):e.height:i.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.height;return a<n?0:a-n},c.prototype.isRegionOnX=function(t){return!t.axis||t.axis==="x"},c.prototype.labelRegion=function(t){return"label"in t?t.label:""},c.prototype.labelTransform=function(t){return"vertical"in t&&t.vertical?"rotate(90)":""},c.prototype.labelOffsetX=function(t){var e="paddingX"in t?t.paddingX:3,i="paddingY"in t?t.paddingY:3;return"vertical"in t&&t.vertical?this.regionY(t)+i:this.regionX(t)+e},c.prototype.labelOffsetY=function(t){var e="paddingX"in t?t.paddingX:3,i="paddingY"in t?t.paddingY:3;return"vertical"in t&&t.vertical?-(this.regionX(t)+e):this.regionY(t)+10+i},c.prototype.getScale=function(t,e,i){return(i?this.d3.scaleTime():this.d3.scaleLinear()).range([t,e])},c.prototype.getX=function(t,e,i,n){var r,s=this.getScale(t,e,this.isTimeSeries()),a=i?s.domain(i):s,s=this.isCategorized()?(n=n||function(){return 0},function(o,u){var d=a(o)+n(o);return u?d:Math.ceil(d)}):function(o,u){var d=a(o);return u?d:Math.ceil(d)};for(r in a)s[r]=a[r];return s.orgDomain=function(){return a.domain()},this.isCategorized()&&(s.domain=function(o){return arguments.length?(a.domain(o),s):[(o=this.orgDomain())[0],o[1]+1]}),s},c.prototype.getY=function(t,e,i){var n;if(t==="timeseries"||t==="time")n=this.d3.scaleTime();else if(t==="log")n=wt(this.d3);else{if(t!=="linear"&&t!==void 0)throw new Error('Invalid Y axis type: "'+t+'"');n=this.d3.scaleLinear()}return e&&n.domain(e),i&&n.range(i),n},c.prototype.getYScale=function(t){return this.axis.getId(t)==="y2"?this.y2:this.y},c.prototype.getSubYScale=function(t){return this.axis.getId(t)==="y2"?this.subY2:this.subY},c.prototype.updateScales=function(){var t=this,e=t.config,i=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,i?void 0:t.x.orgDomain(),function(){return t.xAxis.tickOffset()}),t.y=t.getY(e.axis_y_type,i?e.axis_y_default:t.y.domain(),[t.yMin,t.yMax]),t.y2=t.getY(e.axis_y2_type,i?e.axis_y2_default:t.y2.domain(),[t.yMin,t.yMax]),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,function(n){return n%1?0:t.subXAxis.tickOffset()}),t.subY=t.getY(e.axis_y_type,i?e.axis_y_default:t.subY.domain(),[t.subYMin,t.subYMax]),t.subY2=t.getY(e.axis_y2_type,i?e.axis_y2_default:t.subY2.domain(),[t.subYMin,t.subYMax]),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis("y",t.y,t.yOrient,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis("y2",t.y2,t.y2Orient,t.y2AxisTickValues,e.axis_y2_tick_outer),i||t.brush&&t.brush.updateScale(t.subX),t.updateArc&&t.updateArc()},c.prototype.selectPoint=function(t,e,i){var n=this,r=n.config,a=(r.axis_rotated?n.circleY:n.circleX).bind(n),s=(r.axis_rotated?n.circleX:n.circleY).bind(n),o=n.pointSelectR.bind(n);r.data_onselected.call(n.api,e,t.node()),n.main.select("."+l.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+l.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(l.selectedCircle,i)}).attr("cx",a).attr("cy",s).attr("stroke",function(){return n.color(e)}).attr("r",function(u){return 1.4*n.pointSelectR(u)}).transition().duration(100).attr("r",o)},c.prototype.unselectPoint=function(t,e,i){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+l.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+l.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},c.prototype.togglePoint=function(t,e,i,n){t?this.selectPoint(e,i,n):this.unselectPoint(e,i,n)},c.prototype.selectPath=function(t,e){var i=this;i.config.data_onselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(e)).brighter(.75)})},c.prototype.unselectPath=function(t,e){var i=this;i.config.data_onunselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.color(e)})},c.prototype.togglePath=function(t,e,i,n){t?this.selectPath(e,i,n):this.unselectPath(e,i,n)},c.prototype.getToggle=function(t,e){var i;return t.nodeName==="circle"?i=this.isStepType(e)?function(){}:this.togglePoint:t.nodeName==="path"&&(i=this.togglePath),i},c.prototype.toggleShape=function(t,e,i){var n=this,r=n.d3,a=n.config,s=r.select(t),o=s.classed(l.SELECTED),u=n.getToggle(t,e).bind(n);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||n.main.selectAll("."+l.shapes+(a.data_selection_grouped?n.getTargetSelectorSuffix(e.id):"")).selectAll("."+l.shape).each(function(d,h){var g=r.select(this);g.classed(l.SELECTED)&&u(!1,g.classed(l.SELECTED,!1),d,h)}),s.classed(l.SELECTED,!o),u(!o,s,e,i))},c.prototype.initBar=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartBars)},c.prototype.updateTargetsForBar=function(t){var e=this,i=e.config,n=e.classChartBar.bind(e),r=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(t).attr("class",function(s){return n(s)+a(s)}).enter().append("g").attr("class",n).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(s){return i.data_selection_isselectable(s)?"pointer":null})},c.prototype.updateBar=function(t){function e(u){return i.color(u.id)}var i=this,n=i.barData.bind(i),r=i.classBar.bind(i),a=i.initialOpacity.bind(i),s=i.main.selectAll("."+l.bars).selectAll("."+l.bar).data(n),o=s.enter().append("path").attr("class",r).style("stroke",e).style("fill",e);i.mainBar=o.merge(s).style("opacity",a),s.exit().transition().duration(t).style("opacity",0)},c.prototype.redrawBar=function(t,e,i){var n=this;return[(e?this.mainBar.transition(i):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",function(r){return n.isTargetToShow(r.id)?1:0})]},c.prototype.getBarW=function(t,e){var i=this.config,n=typeof i.bar_width=="number"?i.bar_width:e?t.tickInterval()*i.bar_width_ratio/e:0;return i.bar_width_max&&n>i.bar_width_max?i.bar_width_max:n},c.prototype.getBars=function(t,e){return(e?this.main.selectAll("."+l.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+l.bar+(O(t)?"-"+t:""))},c.prototype.expandBars=function(t,e,i){i&&this.unexpandBars(),this.getBars(t,e).classed(l.EXPANDED,!0)},c.prototype.unexpandBars=function(t){this.getBars(t).classed(l.EXPANDED,!1)},c.prototype.generateDrawBar=function(t,e){var i=this.config,n=this.generateGetBarPoints(t,e);return function(r,a){var s=n(r,a),o=i.axis_rotated?1:0,u=i.axis_rotated?0:1;return"M "+s[0][o]+","+s[0][u]+" L"+s[1][o]+","+s[1][u]+" L"+s[2][o]+","+s[2][u]+" L"+s[3][o]+","+s[3][u]+" z"}},c.prototype.generateGetBarPoints=function(t,e){var i=this,n=e?i.subXAxis:i.xAxis,r=t.__max__+1,a=i.getBarW(n,r),s=i.getShapeX(a,r,t,!!e),o=i.getShapeY(!!e),u=i.getShapeOffset(i.isBarType,t,!!e),d=a*(i.config.bar_space/2),h=e?i.getSubYScale:i.getYScale;return function(g,_){var p=h.call(i,g.id)(0),x=u(g,_)||p,y=s(g),S=o(g);return i.config.axis_rotated&&(0<g.value&&S<p||g.value<0&&p<S)&&(S=p),[[y+d,x],[y+d,S-=p-x],[y+a-d,S],[y+a-d,x]]}},c.prototype.isWithinBar=function(t,e){return function(i,n,r){r===void 0&&(r=0);var a=n.x-r,s=n.x+n.width+r,o=n.y+n.height+r,u=n.y-r;return a<i[0]&&i[0]<s&&u<i[1]&&i[1]<o}(t,K(e),2)},c.prototype.getShapeIndices=function(t){var e,i,n=this.config,r={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(s){for(e=0;e<n.data_groups.length;e++)if(!(n.data_groups[e].indexOf(s.id)<0)){for(i=0;i<n.data_groups[e].length;i++)if(n.data_groups[e][i]in r){r[s.id]=r[n.data_groups[e][i]];break}}j(r[s.id])&&(r[s.id]=a++)}),r.__max__=a-1,r},c.prototype.getShapeX=function(t,e,i,n){var r=n?this.subX:this.x;return function(a){var s=a.id in i?i[a.id]:0;return a.x||a.x===0?r(a.x)-t*(e/2-s):0}},c.prototype.getShapeY=function(t){var e=this;return function(i){return(t?e.getSubYScale(i.id):e.getYScale(i.id))(e.isTargetNormalized(i.id)?e.getRatio("index",i,!0):i.value)}},c.prototype.getShapeOffset=function(t,e,i){var n=this,r=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(t,n))),a=r.map(function(s){return s.id});return function(s,o){var u=i?n.getSubYScale(s.id):n.getYScale(s.id),d=u(0),h=d;return r.forEach(function(g){var _=n.isStepType(s)?n.convertValuesToStep(g.values):g.values,p=n.isTargetNormalized(s.id),x=_.map(function(y){return p?n.getRatio("index",y,!0):y.value});g.id!==s.id&&e[g.id]===e[s.id]&&a.indexOf(g.id)<a.indexOf(s.id)&&(!j(_[o])&&+_[o].x==+s.x||(o=-1,_.forEach(function(y,S){(y.x.constructor===Date?+y.x:y.x)===(s.x.constructor===Date?+s.x:s.x)&&(o=S)})),o in _&&0<=_[o].value*s.value&&(h+=u(x[o])-d))}),h}},c.prototype.isWithinShape=function(t,e){var i,n=this,r=n.d3.select(t);return n.isTargetToShow(e.id)?t.nodeName==="circle"?i=n.isStepType(e)?n.isWithinStep(t,n.getYScale(e.id)(e.value)):n.isWithinCircle(t,1.5*n.pointSelectR(e)):t.nodeName==="path"&&(i=!r.classed(l.bar)||n.isWithinBar(n.d3.mouse(t),t)):i=!1,i},c.prototype.getInterpolate=function(t){var e=this,i=e.d3,n={linear:i.curveLinear,"linear-closed":i.curveLinearClosed,basis:i.curveBasis,"basis-open":i.curveBasisOpen,"basis-closed":i.curveBasisClosed,bundle:i.curveBundle,cardinal:i.curveCardinal,"cardinal-open":i.curveCardinalOpen,"cardinal-closed":i.curveCardinalClosed,monotone:i.curveMonotoneX,step:i.curveStep,"step-before":i.curveStepBefore,"step-after":i.curveStepAfter},r=e.isSplineType(t)?n[e.config.spline_interpolation_type]||n.cardinal:e.isStepType(t)?n[e.config.line_step_type]:n.linear;return r},c.prototype.initLine=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartLines)},c.prototype.updateTargetsForLine=function(t){var e=this,i=e.config,n=e.classChartLine.bind(e),r=e.classLines.bind(e),a=e.classAreas.bind(e),s=e.classCircles.bind(e),o=e.classFocus.bind(e),u=e.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(t).attr("class",function(d){return n(d)+o(d)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",r),u.append("g").attr("class",a),u.append("g").attr("class",function(d){return e.generateClass(l.selectedCircles,d.id)}),u.append("g").attr("class",s).style("cursor",function(d){return i.data_selection_isselectable(d)?"pointer":null}),t.forEach(function(d){e.main.selectAll("."+l.selectedCircles+e.getTargetSelectorSuffix(d.id)).selectAll("."+l.selectedCircle).each(function(h){h.value=d.values[h.index].value})})},c.prototype.updateLine=function(t){var e=this,i=e.main.selectAll("."+l.lines).selectAll("."+l.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);e.mainLine=n.merge(i).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(r){return e.isStepType(r)?"crispEdges":""}).attr("transform",null),i.exit().transition().duration(t).style("opacity",0)},c.prototype.redrawLine=function(t,e,i){return[(e?this.mainLine.transition(i):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},c.prototype.generateDrawLine=function(t,e){function i(d){return(e?r.subxx:r.xx).call(r,d)}function n(d,h){return 0<a.data_groups.length?s(d,h)[0][1]:o.call(r,d.id)(d.value)}var r=this,a=r.config,u=r.d3.line(),s=r.generateGetLinePoints(t,e),o=e?r.getSubYScale:r.getYScale,u=a.axis_rotated?u.x(n).y(i):u.x(i).y(n);return a.line_connectNull||(u=u.defined(function(d){return d.value!=null})),function(d){var h=a.line_connectNull?r.filterRemoveNull(d.values):d.values,g=e?r.subX:r.x,_=o.call(r,d.id),p=0,x=0,y=r.isLineType(d)?a.data_regions[d.id]?r.lineWithRegions(h,g,_,a.data_regions[d.id]):(r.isStepType(d)&&(h=r.convertValuesToStep(h)),u.curve(r.getInterpolate(d))(h)):(h[0]&&(p=g(h[0].x),x=_(h[0].value)),a.axis_rotated?"M "+x+" "+p:"M "+p+" "+x);return y||"M 0 0"}},c.prototype.generateGetLinePoints=function(t,e){var i=this,n=i.config,r=t.__max__+1,a=i.getShapeX(0,r,t,!!e),s=i.getShapeY(!!e),o=i.getShapeOffset(i.isLineType,t,!!e),u=e?i.getSubYScale:i.getYScale;return function(d,h){var g=u.call(i,d.id)(0),_=o(d,h)||g,p=a(d),x=s(d);return n.axis_rotated&&(0<d.value&&x<g||d.value<0&&g<x)&&(x=g),[[p,x-(g-_)],[p,x-(g-_)],[p,x-(g-_)],[p,x-(g-_)]]}},c.prototype.lineWithRegions=function(t,e,i,n){var r,a,s,o,u,d,h,g,_,p,x,y=this,S=y.config,f="M",G=y.isCategorized()?.5:0,m=[];if(M(n))for(r=0;r<n.length;r++)m[r]={},j(n[r].start)?m[r].start=t[0].x:m[r].start=y.isTimeSeries()?y.parseDate(n[r].start):n[r].start,j(n[r].end)?m[r].end=t[t.length-1].x:m[r].end=y.isTimeSeries()?y.parseDate(n[r].end):n[r].end;function v(A){return"M"+A[0][0]+" "+A[0][1]+" "+A[1][0]+" "+A[1][1]}for(p=S.axis_rotated?function(A){return i(A.value)}:function(A){return e(A.x)},x=S.axis_rotated?function(A){return e(A.x)}:function(A){return i(A.value)},s=y.isTimeSeries()?function(A,R,P,I){var C=A.x.getTime(),b=R.x-A.x,L=new Date(C+b*P),H=new Date(C+b*(P+I)),N=S.axis_rotated?[[i(u(P)),e(L)],[i(u(P+I)),e(H)]]:[[e(L),i(u(P))],[e(H),i(u(P+I))]];return v(N)}:function(A,R,P,I){var C=S.axis_rotated?[[i(u(P),!0),e(o(P))],[i(u(P+I),!0),e(o(P+I))]]:[[e(o(P),!0),i(u(P))],[e(o(P+I),!0),i(u(P+I))]];return v(C)},r=0;r<t.length;r++){if(j(m)||!function(A,R){for(var P=0;P<R.length;P++)if(R[P].start<A&&A<=R[P].end)return 1}(t[r].x,m))f+=" "+p(t[r])+" "+x(t[r]);else for(o=y.getScale(t[r-1].x+G,t[r].x+G,y.isTimeSeries()),u=y.getScale(t[r-1].value,t[r].value),d=e(t[r].x)-e(t[r-1].x),h=i(t[r].value)-i(t[r-1].value),_=2*(g=2/Math.sqrt(Math.pow(d,2)+Math.pow(h,2))),a=g;a<=1;a+=_)f+=s(t[r-1],t[r],a,g);t[r].x}return f},c.prototype.updateArea=function(t){var e=this,i=e.d3,n=e.main.selectAll("."+l.areas).selectAll("."+l.area).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});e.mainArea=r.merge(n).style("opacity",e.orgAreaOpacity),n.exit().transition().duration(t).style("opacity",0)},c.prototype.redrawArea=function(t,e,i){return[(e?this.mainArea.transition(i):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},c.prototype.generateDrawArea=function(t,e){function i(h){return(e?a.subxx:a.xx).call(a,h)}function n(h,g){return 0<s.data_groups.length?o(h,g)[0][1]:u.call(a,h.id)(a.getAreaBaseValue(h.id))}function r(h,g){return 0<s.data_groups.length?o(h,g)[1][1]:u.call(a,h.id)(h.value)}var a=this,s=a.config,d=a.d3.area(),o=a.generateGetAreaPoints(t,e),u=e?a.getSubYScale:a.getYScale,d=s.axis_rotated?d.x0(n).x1(r).y(i):d.x(i).y0(s.area_above?0:n).y1(r);return s.line_connectNull||(d=d.defined(function(h){return h.value!==null})),function(h){var g=s.line_connectNull?a.filterRemoveNull(h.values):h.values,_=0,p=0,x=a.isAreaType(h)?(a.isStepType(h)&&(g=a.convertValuesToStep(g)),d.curve(a.getInterpolate(h))(g)):(g[0]&&(_=a.x(g[0].x),p=a.getYScale(h.id)(g[0].value)),s.axis_rotated?"M "+p+" "+_:"M "+_+" "+p);return x||"M 0 0"}},c.prototype.getAreaBaseValue=function(){return 0},c.prototype.generateGetAreaPoints=function(t,e){var i=this,n=i.config,r=t.__max__+1,a=i.getShapeX(0,r,t,!!e),s=i.getShapeY(!!e),o=i.getShapeOffset(i.isAreaType,t,!!e),u=e?i.getSubYScale:i.getYScale;return function(d,h){var g=u.call(i,d.id)(0),_=o(d,h)||g,p=a(d),x=s(d);return n.axis_rotated&&(0<d.value&&x<g||d.value<0&&g<x)&&(x=g),[[p,_],[p,x-(g-_)],[p,x-(g-_)],[p,_]]}},c.prototype.updateCircle=function(t,e){var i=this,n=i.main.selectAll("."+l.circles).selectAll("."+l.circle).data(i.lineOrScatterOrStanfordData.bind(i)),r=n.enter().append("circle").attr("shape-rendering",i.isStanfordGraphType()?"crispEdges":"").attr("class",i.classCircle.bind(i)).attr("cx",t).attr("cy",e).attr("r",i.pointR.bind(i)).style("color",i.isStanfordGraphType()?i.getStanfordPointColor.bind(i):i.color);i.mainCircle=r.merge(n).style("opacity",i.isStanfordGraphType()?1:i.initialOpacityForCircle.bind(i)),n.exit().style("opacity",0)},c.prototype.redrawCircle=function(t,e,i,n){var r=this,a=r.main.selectAll("."+l.selectedCircle);return[(i?r.mainCircle.transition(n):r.mainCircle).style("opacity",this.opacityForCircle.bind(r)).style("color",r.isStanfordGraphType()?r.getStanfordPointColor.bind(r):r.color).attr("cx",t).attr("cy",e),(i?a.transition(n):a).attr("cx",t).attr("cy",e)]},c.prototype.circleX=function(t){return t.x||t.x===0?this.x(t.x):null},c.prototype.updateCircleY=function(){var t,e,i=this;0<i.config.data_groups.length?(t=i.getShapeIndices(i.isLineType),e=i.generateGetLinePoints(t),i.circleY=function(n,r){return e(n,r)[0][1]}):i.circleY=function(n){return i.getYScale(n.id)(n.value)}},c.prototype.getCircles=function(t,e){return(e?this.main.selectAll("."+l.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+l.circle+(O(t)?"-"+t:""))},c.prototype.expandCircles=function(t,e,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles(),this.getCircles(t,e).classed(l.EXPANDED,!0).attr("r",n)},c.prototype.unexpandCircles=function(t){var e=this,i=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",i)},c.prototype.pointR=function(t){var e=this.config;return this.isStepType(t)?0:B(e.point_r)?e.point_r(t):e.point_r},c.prototype.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?B(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},c.prototype.pointSelectR=function(t){var e=this.config;return B(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},c.prototype.isWithinCircle=function(t,e){var i=this.d3,n=i.mouse(t),r=i.select(t),a=+r.attr("cx"),s=+r.attr("cy");return Math.sqrt(Math.pow(a-n[0],2)+Math.pow(s-n[1],2))<e},c.prototype.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},c.prototype.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},c.prototype.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},c.prototype.getCurrentPaddingTop=function(){var t=this.config,e=O(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},c.prototype.getCurrentPaddingBottom=function(){var t=this.config;return O(t.padding_bottom)?t.padding_bottom:0},c.prototype.getCurrentPaddingLeft=function(t){var e=this.config;return O(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(ht(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:ht(this.getAxisWidthByAxisId("y",t))},c.prototype.getCurrentPaddingRight=function(){var t=this,e=t.config,n=0,i=t.isLegendRight?t.getLegendWidth()+20:0,n=O(e.padding_right)?e.padding_right+1:e.axis_rotated?10+i:!e.axis_y2_show||e.axis_y2_inner?2+i+(t.axis.getY2AxisLabelPosition().isOuter?20:0):ht(t.getAxisWidthByAxisId("y2"))+i;return t.colorScale&&t.colorScale.node()&&(n+=t.getColorScalePadding()),n},c.prototype.getParentRectValue=function(t){for(var e,i=this.selectChart.node();i&&i.tagName!=="BODY";){try{e=i.getBoundingClientRect()[t]}catch{t==="width"&&(e=i.offsetWidth)}if(e)break;i=i.parentNode}return e},c.prototype.getParentWidth=function(){return this.getParentRectValue("width")},c.prototype.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},c.prototype.getSvgLeft=function(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,r=i.axis_rotated?l.axisX:l.axisY,a=e.main.select("."+r).node(),s=a&&n?a.getBoundingClientRect():{right:0},o=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),d=s.right-o.left-(u?0:e.getCurrentPaddingLeft(t));return 0<d?d:0},c.prototype.getAxisWidthByAxisId=function(t,e){var i=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},c.prototype.getHorizontalAxisHeight=function(t,e){var i=this,n=i.config,r=30;return t!=="x"||(M(e)&&e?n.subchart_axis_x_show:n.axis_x_show)?t==="x"&&n.axis_x_height?n.axis_x_height:t!=="y"||n.axis_y_show?t!=="y2"||n.axis_y2_show?(t==="x"&&!n.axis_rotated&&n.axis_x_tick_rotate&&(r=30+i.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(n.axis_x_tick_rotate))/180)),t==="y"&&n.axis_rotated&&n.axis_y_tick_rotate&&(r=30+i.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(n.axis_y_tick_rotate))/180)),r+(i.axis.getLabelPositionById(t).isInner?0:10)+(t==="y2"?-10:0)):i.rotated_padding_top:!n.legend_show||i.isLegendRight||i.isLegendInset?1:10:8},c.prototype.initBrush=function(t){var e=this,i=e.d3;return e.brush=(e.config.axis_rotated?i.brushY():i.brushX()).on("brush",function(){var n=i.event.sourceEvent;n&&n.type==="zoom"||e.redrawForBrush()}).on("end",function(){var n=i.event.sourceEvent;n&&n.type==="zoom"||e.brush.empty()&&n&&n.type!=="end"&&e.brush.clear()}),e.brush.updateExtent=function(){var n=this.scale.range(),r=e.config.axis_rotated?[[0,n[0]],[e.width2,n[1]]]:[[n[0],0],[n[1],e.height2]];return this.extent(r),this},e.brush.updateScale=function(n){return this.scale=n,this},e.brush.update=function(n){this.updateScale(n||e.subX).updateExtent(),e.context.select("."+l.brush).call(this)},e.brush.clear=function(){e.context.select("."+l.brush).call(e.brush.move,null)},e.brush.selection=function(){return i.brushSelection(e.context.select("."+l.brush).node())},e.brush.selectionAsValue=function(n,r){var a,s;return n?(e.context&&(a=[this.scale(n[0]),this.scale(n[1])],s=e.context.select("."+l.brush),r&&(s=s.transition()),e.brush.move(s,a)),[]):(a=e.brush.selection()||[0,0],[this.scale.invert(a[0]),this.scale.invert(a[1])])},e.brush.empty=function(){var n=e.brush.selection();return!n||n[0]===n[1]},e.brush.updateScale(t)},c.prototype.initSubchart=function(){var t=this,e=t.config,i=t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));i.style("visibility","visible"),i.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",l.chart),i.select("."+l.chart).append("g").attr("class",l.chartBars),i.select("."+l.chart).append("g").attr("class",l.chartLines),i.append("g").attr("clip-path",t.clipPath).attr("class",l.brush),t.axes.subx=i.append("g").attr("class",l.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?"visible":"hidden")},c.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+l.brush).call(this.brush)},c.prototype.updateTargetsForSubchart=function(t){var e,i,n=this,r=n.context,a=n.config,s=n.classChartBar.bind(n),o=n.classBars.bind(n),u=n.classChartLine.bind(n),d=n.classLines.bind(n),h=n.classAreas.bind(n),g=r.select("."+l.chartBars).selectAll("."+l.chartBar).data(t),_=g.enter().append("g").style("opacity",0);_.merge(g).attr("class",s),_.append("g").attr("class",o),(e=(i=r.select("."+l.chartLines).selectAll("."+l.chartLine).data(t)).enter().append("g").style("opacity",0)).merge(i).attr("class",u),e.append("g").attr("class",d),e.append("g").attr("class",h),r.selectAll("."+l.brush+" rect").attr(a.axis_rotated?"width":"height",a.axis_rotated?n.width2:n.height2)},c.prototype.updateBarForSubchart=function(t){var e=this,i=e.context.selectAll("."+l.bars).selectAll("."+l.bar).data(e.barData.bind(e)),n=i.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color);i.exit().transition().duration(t).style("opacity",0).remove(),e.contextBar=n.merge(i).style("opacity",e.initialOpacity.bind(e))},c.prototype.redrawBarForSubchart=function(t,e,i){(e?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar).attr("d",t).style("opacity",1)},c.prototype.updateLineForSubchart=function(t){var e=this,i=e.context.selectAll("."+l.lines).selectAll("."+l.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);i.exit().transition().duration(t).style("opacity",0).remove(),e.contextLine=n.merge(i).style("opacity",e.initialOpacity.bind(e))},c.prototype.redrawLineForSubchart=function(t,e,i){(e?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine).attr("d",t).style("opacity",1)},c.prototype.updateAreaForSubchart=function(t){var e=this,i=e.d3,n=e.context.selectAll("."+l.areas).selectAll("."+l.area).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});n.exit().transition().duration(t).style("opacity",0).remove(),e.contextArea=r.merge(n).style("opacity",0)},c.prototype.redrawAreaForSubchart=function(t,e,i){(e?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},c.prototype.redrawSubchart=function(t,e,i,n,r,a,s){var o,u,d,h=this,g=h.d3;g.event&&g.event.type==="zoom"&&h.brush.selectionAsValue(h.x.orgDomain()),t&&(h.brush.empty()||h.brush.selectionAsValue(h.x.orgDomain()),o=h.generateDrawArea(r,!0),u=h.generateDrawBar(a,!0),d=h.generateDrawLine(s,!0),h.updateBarForSubchart(i),h.updateLineForSubchart(i),h.updateAreaForSubchart(i),h.redrawBarForSubchart(u,i,i),h.redrawLineForSubchart(d,i,i),h.redrawAreaForSubchart(o,i,i))},c.prototype.redrawForBrush=function(){var t,e=this,i=e.x,n=e.d3;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),t=n.event.selection||e.brush.scale.range(),e.main.select("."+l.eventRect).call(e.zoom.transform,n.zoomIdentity.scale(e.width/(t[1]-t[0])).translate(-t[0],0)),e.config.subchart_onbrush.call(e.api,i.orgDomain())},c.prototype.transformContext=function(t,e){var i;e&&e.axisSubX?i=e.axisSubX:(i=this.context.select("."+l.axisX),t&&(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},c.prototype.getDefaultSelection=function(){var t=this,e=t.config,i=B(e.axis_x_selection)?e.axis_x_selection(t.getXDomain(t.data.targets)):e.axis_x_selection;return t.isTimeSeries()&&(i=[t.parseDate(i[0]),t.parseDate(i[1])]),i},c.prototype.removeSubchart=function(){this.brush=null,this.context.remove(),this.context=null},c.prototype.initText=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartTexts),this.mainText=this.d3.selectAll([])},c.prototype.updateTargetsForText=function(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),r=e.classFocus.bind(e),a=e.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(t),s=a.enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none");s.append("g").attr("class",n),s.merge(a).attr("class",function(o){return i(o)+r(o)})},c.prototype.updateText=function(t,e,i){var n=this,r=n.config,a=n.barOrLineData.bind(n),s=n.classText.bind(n),o=n.main.selectAll("."+l.texts).selectAll("."+l.text).data(a),u=o.enter().append("text").attr("class",s).attr("text-anchor",function(d){return r.axis_rotated?d.value<0?"end":"start":"middle"}).style("stroke","none").attr("x",t).attr("y",e).style("fill",function(d){return n.color(d)}).style("fill-opacity",0);n.mainText=u.merge(o).text(function(d,h,g){return n.dataLabelFormat(d.id)(d.value,d.id,h,g)}),o.exit().transition().duration(i).style("fill-opacity",0).remove()},c.prototype.redrawText=function(t,e,i,n,r){return[(n?this.mainText.transition(r):this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]},c.prototype.getTextRect=function(t,e,i){var n,r=this.d3.select("body").append("div").classed("c3",!0),a=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),s=this.d3.select(i).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",s).text(t).each(function(){n=K(this)}),r.remove(),n},c.prototype.generateXYForText=function(t,e,i,n){var r=this,a=r.generateGetAreaPoints(t,!1),s=r.generateGetBarPoints(e,!1),o=r.generateGetLinePoints(i,!1),u=n?r.getXForText:r.getYForText;return function(d,h){var g=r.isAreaType(d)?a:r.isBarType(d)?s:o;return u.call(r,g(d,h),d,this)}},c.prototype.getXForText=function(t,e,i){var n,r=this,a=K(i),s=r.config.axis_rotated?(n=r.isBarType(e)?4:6,t[2][1]+n*(e.value<0?-1:1)):r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0];return e.value===null&&(s>r.width?s=r.width-a.width:s<0&&(s=4)),s},c.prototype.getYForText=function(t,e,i){var n,r=this,a=K(i);return r.config.axis_rotated?n=(t[0][0]+t[2][0]+.6*a.height)/2:(n=t[2][1],e.value<0||e.value===0&&!r.hasPositiveValue?(n+=a.height,r.isBarType(e)&&r.isSafari()?n-=3:!r.isBarType(e)&&r.isChrome()&&(n+=3)):n+=r.isBarType(e)?-3:-6),e.value!==null||r.config.axis_rotated||(n<a.height?n=a.height:n>this.height&&(n=this.height-4)),n},c.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},c.prototype.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},c.prototype.xForTitle=function(){var t=this,e=t.config,i=e.title_position||"left",n=0<=i.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0<=i.indexOf("center")?Math.max((t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2,0):e.title_padding.left;return n},c.prototype.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},c.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},c.prototype.drawColorScale=function(){var t,e,i,n,r,a,s=this,o=s.d3,u=s.config,d=s.data.targets[0],h=isNaN(u.stanford_scaleWidth)?20:u.stanford_scaleWidth;if(h<0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");a=s.height-u.stanford_padding.bottom-u.stanford_padding.top,e=o.range(u.stanford_padding.bottom,a,5),r=o.scaleSequential(d.colors).domain([e[e.length-1],e[0]]),s.colorScale&&s.colorScale.remove(),s.colorScale=s.svg.append("g").attr("width",50).attr("height",a).attr("class",l.colorScale),s.colorScale.append("g").attr("transform","translate(0, "+u.stanford_padding.top+")").selectAll("bars").data(e).enter().append("rect").attr("y",function(g,_){return 5*_}).attr("x",0).attr("width",h).attr("height",5).attr("fill",function(g){return r(g)}),n=o.scaleLog().domain([d.minEpochs,d.maxEpochs]).range([e[0]+u.stanford_padding.top+e[e.length-1]+5-1,e[0]+u.stanford_padding.top]),i=o.axisRight(n),u.stanford_scaleFormat==="pow10"?i.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):B(u.stanford_scaleFormat)?i.tickFormat(u.stanford_scaleFormat):i.tickFormat(o.format("d")),B(u.stanford_scaleValues)&&i.tickValues(u.stanford_scaleValues(d.minEpochs,d.maxEpochs)),t=s.colorScale.append("g").attr("class","legend axis").attr("transform","translate("+h+",0)").call(i),u.stanford_scaleFormat==="pow10"&&t.selectAll(".tick text").text(null).filter(Tt).text(10).append("tspan").attr("dy","-.7em").text(function(g){return Math.round(Math.log(g)/Math.LN10)}),s.colorScale.attr("transform","translate("+(s.currentWidth-s.xForColorScale())+", 0)")},c.prototype.xForColorScale=function(){return this.config.stanford_padding.right+K(this.colorScale.node()).width},c.prototype.getColorScalePadding=function(){return this.xForColorScale()+this.config.stanford_padding.left+20},c.prototype.isStanfordGraphType=function(){return this.config.data_type==="stanford"},c.prototype.initStanfordData=function(){var t,e,i,n=this.d3,r=this.config,a=this.data.targets[0];if(a.values.sort(Ct),t=a.values.map(function(s){return s.epochs}),i=isNaN(r.stanford_scaleMin)?n.min(t):r.stanford_scaleMin,(e=isNaN(r.stanford_scaleMax)?n.max(t):r.stanford_scaleMax)<i)throw Error("Number of minEpochs has to be smaller than maxEpochs");a.colors=B(r.stanford_colors)?r.stanford_colors:n.interpolateHslLong(n.hsl(250,1,.5),n.hsl(0,1,.5)),a.colorscale=n.scaleSequentialLog(a.colors).domain([i,e]),a.minEpochs=i,a.maxEpochs=e},c.prototype.getStanfordPointColor=function(t){return this.data.targets[0].colorscale(t.epochs)},c.prototype.getCentroid=function(t){for(var e,i,n,r=At(t),a=0,s=0,o=0,u=t.length-1;o<t.length;u=o,o+=1)i=t[o],n=t[u],e=i.x*n.y-n.x*i.y,a+=(i.x+n.x)*e,s+=(i.y+n.y)*e;return{x:a/(e=6*r),y:s/e}},c.prototype.getStanfordTooltipTitle=function(t){var e=this.axis.getLabelText("x"),i=this.axis.getLabelText("y");return`
      <tr><th>`+(e?et(e):"x")+"</th><th class='value'>"+t.x+`</th></tr>
      <tr><th>`+(i?et(i):"y")+"</th><th class='value'>"+t.value+`</th></tr>
    `},c.prototype.countEpochsInRegion=function(t){var e=this.data.targets[0],i=e.values.reduce(function(r,a){return r+Number(a.epochs)},0),n=e.values.reduce(function(r,a){return Pt(a,t)?r+Number(a.epochs):r},0);return{value:n,percentage:n!==0?(n/i*100).toFixed(1):0}};var At=function(t){for(var e,i,n=0,r=0,a=t.length-1;r<t.length;a=r,r+=1)e=t[r],i=t[a],n+=e.x*i.y,n-=e.y*i.x;return n/=2},Pt=function(t,e){for(var i,n,r,a,s=t.x,o=t.value,u=!1,d=0,h=e.length-1;d<e.length;h=d++)i=e[d].x,n=e[d].y,a=e[h].x,o<n!=o<(r=e[h].y)&&s<(a-i)*(o-n)/(r-n)+i&&(u=!u);return u},Ct=function(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0};return c.prototype.initStanfordElements=function(){var t=this;t.stanfordElements=t.main.select("."+l.chart).append("g").attr("class",l.stanfordElements),t.stanfordElements.append("g").attr("class",l.stanfordLines),t.stanfordElements.append("g").attr("class",l.stanfordTexts),t.stanfordElements.append("g").attr("class",l.stanfordRegions)},c.prototype.updateStanfordElements=function(t){var e,i,n,r,a=this,s=a.main,o=a.config,u=a.xvCustom.bind(a),d=a.yvCustom.bind(a),h=a.countEpochsInRegion.bind(a),g=s.select("."+l.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+l.stanfordLine).data(o.stanford_lines),_=g.enter().append("g").attr("class",function(p){return l.stanfordLine+(p.class?" "+p.class:"")});_.append("line").attr("x1",function(p){return o.axis_rotated?d(p,"value_y1"):u(p,"value_x1")}).attr("x2",function(p){return o.axis_rotated?d(p,"value_y2"):u(p,"value_x2")}).attr("y1",function(p){return o.axis_rotated?u(p,"value_x1"):d(p,"value_y1")}).attr("y2",function(p){return o.axis_rotated?u(p,"value_x2"):d(p,"value_y2")}).style("opacity",0),a.stanfordLines=_.merge(g),a.stanfordLines.select("line").transition().duration(t).attr("x1",function(p){return o.axis_rotated?d(p,"value_y1"):u(p,"value_x1")}).attr("x2",function(p){return o.axis_rotated?d(p,"value_y2"):u(p,"value_x2")}).attr("y1",function(p){return o.axis_rotated?u(p,"value_x1"):d(p,"value_y1")}).attr("y2",function(p){return o.axis_rotated?u(p,"value_x2"):d(p,"value_y2")}).style("opacity",1),g.exit().transition().duration(t).style("opacity",0).remove(),(r=(n=s.select("."+l.stanfordTexts).selectAll("."+l.stanfordText).data(o.stanford_texts)).enter().append("g").attr("class",function(p){return l.stanfordText+(p.class?" "+p.class:"")})).append("text").attr("x",function(p){return o.axis_rotated?d(p,"y"):u(p,"x")}).attr("y",function(p){return o.axis_rotated?u(p,"x"):d(p,"y")}).style("opacity",0),a.stanfordTexts=r.merge(n),a.stanfordTexts.select("text").transition().duration(t).attr("x",function(p){return o.axis_rotated?d(p,"y"):u(p,"x")}).attr("y",function(p){return o.axis_rotated?u(p,"x"):d(p,"y")}).text(function(p){return p.content}).style("opacity",1),n.exit().transition().duration(t).style("opacity",0).remove(),(i=(e=s.select("."+l.stanfordRegions).selectAll("."+l.stanfordRegion).data(o.stanford_regions)).enter().append("g").attr("class",function(p){return l.stanfordRegion+(p.class?" "+p.class:"")})).append("polygon").attr("points",function(p){return p.points.map(function(x){return[o.axis_rotated?d(x,"y"):u(x,"x"),o.axis_rotated?u(x,"x"):d(x,"y")].join(",")}).join(" ")}).style("opacity",0),i.append("text").attr("x",function(p){return a.getCentroid(p.points).x}).attr("y",function(p){return a.getCentroid(p.points).y}).style("opacity",0),a.stanfordRegions=i.merge(e),a.stanfordRegions.select("polygon").transition().duration(t).attr("points",function(p){return p.points.map(function(x){return[o.axis_rotated?d(x,"y"):u(x,"x"),o.axis_rotated?u(x,"x"):d(x,"y")].join(",")}).join(" ")}).style("opacity",function(p){return p.opacity?p.opacity:.2}),a.stanfordRegions.select("text").transition().duration(t).attr("x",function(p){return o.axis_rotated?d(a.getCentroid(p.points),"y"):u(a.getCentroid(p.points),"x")}).attr("y",function(p){return o.axis_rotated?u(a.getCentroid(p.points),"x"):d(a.getCentroid(p.points),"y")}).text(function(p){var x,y,S;return p.text?(a.isStanfordGraphType()&&(x=(S=h(p.points)).value,y=S.percentage),p.text(x,y)):""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),e.exit().transition().duration(t).style("opacity",0).remove()},c.prototype.initTooltip=function(){var t,e=this,i=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),i.tooltip_init_show){if(e.isTimeSeries()&&z(i.tooltip_init_x)){for(i.tooltip_init_x=e.parseDate(i.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-i.tooltip_init_x!=0;t++);i.tooltip_init_x=t}e.tooltip.html(i.tooltip_contents.call(e,e.data.targets.map(function(n){return e.addName(n.values[i.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},c.prototype.getTooltipSortFunction=function(){var t=this,e=t.config;if(e.data_groups.length!==0&&e.tooltip_order===void 0){var i=t.orderTargets(t.data.targets).map(function(s){return s.id});return(t.isOrderAsc()||t.isOrderDesc())&&(i=i.reverse()),function(s,o){return i.indexOf(s.id)-i.indexOf(o.id)}}var n=e.tooltip_order;n===void 0&&(n=e.data_order);function r(s){return s?s.value:null}if(z(n)&&n.toLowerCase()==="asc")return function(s,o){return r(s)-r(o)};if(z(n)&&n.toLowerCase()==="desc")return function(s,o){return r(o)-r(s)};if(B(n)){var a=n;return e.tooltip_order===void 0&&(a=function(s,o){return n(s?{id:s.id,values:[s]}:null,o?{id:o.id,values:[o]}:null)}),a}return ot(n)?function(s,o){return n.indexOf(s.id)-n.indexOf(o.id)}:void 0},c.prototype.getTooltipContent=function(t,e,i,n){var r,a,s,o,u,d,h=this,g=h.config,_=g.tooltip_format_title||e,p=g.tooltip_format_name||function(S){return S},x=(x=g.tooltip_format_value)||(h.isTargetNormalized(t.id)?function(S,f){return(100*f).toFixed(2)+"%"}:i),y=this.getTooltipSortFunction();for(y&&t.sort(y),a=0;a<t.length;a++)if(t[a]&&(t[a].value||t[a].value===0)){if(h.isStanfordGraphType())r||(s=h.getStanfordTooltipTitle(t[a]),r="<table class='"+h.CLASS.tooltip+"'>"+s),d=h.getStanfordPointColor(t[a]),u=et(g.data_epochs),o=t[a].epochs;else if(r||(s=et(_?_(t[a].x,t[a].index):t[a].x),r="<table class='"+h.CLASS.tooltip+"'>"+(s||s===0?"<tr><th colspan='2'>"+s+"</th></tr>":"")),(o=et(x(t[a].value,t[a].ratio,t[a].id,t[a].index,t)))!==void 0){if(t[a].name===null)continue;u=et(p(t[a].name,t[a].ratio,t[a].id,t[a].index)),d=h.levelColor?h.levelColor(t[a].value):n(t[a].id)}o!==void 0&&(r+="<tr class='"+h.CLASS.tooltipName+"-"+h.getTargetSelectorSuffix(t[a].id)+"'>",r+="<td class='name'><span style='background-color:"+d+"'></span>"+u+"</td>",r+="<td class='value'>"+o+"</td>",r+="</tr>")}return r+"</table>"},c.prototype.tooltipPosition=function(t,e,i,n){var r,a,s,o,u,d=this,h=d.config,g=d.d3,_=d.hasArcType(),p=g.mouse(n);return _?(a=(d.width-(d.isLegendRight?d.getLegendWidth():0))/2+p[0],o=(d.hasType("gauge")?d.height:d.height/2)+p[1]+20):(r=d.getSvgLeft(!0),o=h.axis_rotated?(s=(a=r+p[0]+100)+e,u=d.currentWidth-d.getCurrentPaddingRight(),d.x(t[0].x)+20):(s=(a=r+d.getCurrentPaddingLeft(!0)+d.x(t[0].x)+20)+e,u=r+d.currentWidth-d.getCurrentPaddingRight(),p[1]+15),u<s&&(a-=s-u+20),o+i>d.currentHeight&&(o-=i+30)),o<0&&(o=0),{top:o,left:a}},c.prototype.showTooltip=function(t,e){var i,n,r,a=this,s=a.config,o=a.hasArcType(),u=t.filter(function(h){return h&&O(h.value)}),d=s.tooltip_position||c.prototype.tooltipPosition;u.length!==0&&s.tooltip_show?(a.tooltip.html(s.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(o),a.color)).style("display","block"),i=a.tooltip.property("offsetWidth"),n=a.tooltip.property("offsetHeight"),r=d.call(this,u,i,n,e),a.tooltip.style("top",r.top+"px").style("left",r.left+"px")):a.hideTooltip()},c.prototype.hideTooltip=function(){this.tooltip.style("display","none")},c.prototype.setTargetType=function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(r){i.withoutFadeIn[r]=e===n.data_types[r],n.data_types[r]=e}),t||(n.data_type=e)},c.prototype.hasType=function(t,e){var i=this.config.data_types,n=!1;return(e=e||this.data.targets)&&e.length?e.forEach(function(r){var a=i[r.id];(a&&0<=a.indexOf(t)||!a&&t==="line")&&(n=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(r){i[r]===t&&(n=!0)}):n=this.config.data_type===t,n},c.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},c.prototype.isLineType=function(t){var e=this.config,i=z(t)?t:t.id;return!e.data_types[i]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[i])},c.prototype.isStepType=function(t){var e=z(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[e])},c.prototype.isSplineType=function(t){var e=z(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[e])},c.prototype.isAreaType=function(t){var e=z(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},c.prototype.isBarType=function(t){var e=z(t)?t:t.id;return this.config.data_types[e]==="bar"},c.prototype.isScatterType=function(t){var e=z(t)?t:t.id;return this.config.data_types[e]==="scatter"},c.prototype.isStanfordType=function(t){var e=z(t)?t:t.id;return this.config.data_types[e]==="stanford"},c.prototype.isPieType=function(t){var e=z(t)?t:t.id;return this.config.data_types[e]==="pie"},c.prototype.isGaugeType=function(t){var e=z(t)?t:t.id;return this.config.data_types[e]==="gauge"},c.prototype.isDonutType=function(t){var e=z(t)?t:t.id;return this.config.data_types[e]==="donut"},c.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},c.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]},c.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]},c.prototype.barData=function(t){return this.isBarType(t)?t.values:[]},c.prototype.lineOrScatterOrStanfordData=function(t){return this.isLineType(t)||this.isScatterType(t)||this.isStanfordType(t)?t.values:[]},c.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},c.prototype.isSafari=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},c.prototype.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},c.prototype.initZoom=function(){var t,e=this,i=e.d3,n=e.config;return e.zoom=i.zoom().on("start",function(){var r;n.zoom_type==="scroll"&&((r=i.event.sourceEvent)&&r.type==="brush"||(t=r,n.zoom_onzoomstart.call(e.api,r)))}).on("zoom",function(){var r;n.zoom_type==="scroll"&&((r=i.event.sourceEvent)&&r.type==="brush"||(e.redrawForZoom(),n.zoom_onzoom.call(e.api,e.x.orgDomain())))}).on("end",function(){var r;n.zoom_type==="scroll"&&((r=i.event.sourceEvent)&&r.type==="brush"||r&&t.clientX===r.clientX&&t.clientY===r.clientY||n.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.updateDomain=function(){return i.event&&i.event.transform&&(n.axis_rotated&&n.zoom_type==="scroll"&&i.event.sourceEvent.type==="mousemove"?e.x.domain(i.event.transform.rescaleY(e.subX).domain()):e.x.domain(i.event.transform.rescaleX(e.subX).domain())),this},e.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[e.width,e.height]]).extent([[0,0],[e.width,e.height]]),this},e.zoom.update=function(){return this.updateExtent().updateDomain()},e.zoom.updateExtent()},c.prototype.zoomTransform=function(t){var e=[this.x(t[0]),this.x(t[1])];return this.d3.zoomIdentity.scale(this.width/(e[1]-e[0])).translate(-e[0],0)},c.prototype.initDragZoom=function(){var t,e,i=this,n=i.d3,r=i.config,a=i.context=i.svg,s=i.margin.left+20.5,o=i.margin.top+.5;r.zoom_type==="drag"&&r.zoom_enabled&&(t=function(u){return u&&u.map(function(d){return i.x.invert(d)})},e=i.dragZoomBrush=n.brushX().on("start",function(){i.api.unzoom(),i.svg.select("."+l.dragZoom).classed("disabled",!1),r.zoom_onzoomstart.call(i.api,n.event.sourceEvent)}).on("brush",function(){r.zoom_onzoom.call(i.api,t(n.event.selection))}).on("end",function(){var u;n.event.selection!=null&&(u=t(n.event.selection),r.zoom_disableDefaultBehavior||i.api.zoom(u),i.svg.select("."+l.dragZoom).classed("disabled",!0),r.zoom_onzoomend.call(i.api,u))}),a.append("g").classed(l.dragZoom,!0).attr("clip-path",i.clipPath).attr("transform","translate("+s+","+o+")").call(e))},c.prototype.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},c.prototype.redrawForZoom=function(){var t=this,e=t.d3,i=t.config,n=t.zoom,r=t.x;i.zoom_enabled&&t.filterTargetsToShow(t.data.targets).length!==0&&(n.update(),i.zoom_disableDefaultBehavior||(t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),e.event.sourceEvent&&e.event.sourceEvent.type==="mousemove"&&(t.cancelClick=!0)))},bt})})(Ot);
